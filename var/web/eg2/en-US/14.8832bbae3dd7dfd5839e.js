(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{"07/K":function(e,t,r){"use strict";r.r(t),r.d(t,"AcqProviderModule",(function(){return qo}));var i=r("MZHd"),c=r("tyNb"),o=r("pLZG"),d=r("1G5W"),a=r("XNiG"),s=r("LRne"),n=r("wBwE"),l=r("fXoL"),b=r("cm5s"),h=r("iA0r"),u=r("tNQm"),p=r("YRS1"),f=r("36iw"),g=r("8PDw"),v=r("xbPD"),m=r("lJxs"),S=r("wN9v");class y{constructor(e){this.id=Number(e.id()),this.record=e,this.canDelete=!1,this.canAdmin=!1}}let _=(()=>{class e{constructor(e,t,r){this.idl=e,this.pcrud=t,this.perm=r,this.currentProviderId=null,this.providerUpdatedSource=new a.a,this.providerUpdated$=this.providerUpdatedSource.asObservable(),this.viewOUs=[],this.currentProvider=null,this.loadPerms()}loadPerms(){return this.permissions?Promise.resolve():this.perm.hasWorkPermAt(["ADMIN_PROVIDER","MANAGE_PROVIDER","VIEW_PROVIDER"],!0).then(e=>{this.permissions=e,this.viewOUs.concat(e.VIEW_PROVIDER),this.permissions.ADMIN_PROVIDER.forEach(e=>{this.viewOUs.includes(e)||this.viewOUs.push(e)}),this.permissions.MANAGE_PROVIDER.forEach(e=>{this.viewOUs.includes(e)||this.viewOUs.push(e)})})}getProviderRecord(e){console.debug("fetching provider "+e),this.currentProviderId=e;const t=this.idl.create("acqpro");return t.id("no_provider_fetched"),this.pcrud.search("acqpro",{id:e},{flesh:3,flesh_fields:{acqpro:["attributes","holdings_subfields","contacts","addresses","provider_notes","edi_accounts","currency_type","edi_default"],acqpa:["provider"],acqpc:["provider","addresses"],acqphsm:["provider"],acqlipad:["provider"],acqedi:["attr_set","provider"]}},{}).pipe(Object(v.a)(t),Object(m.a)(e=>{if("no_provider_fetched"===e.id())throw new Error("no provider to fetch");const t=new y(e);return e._holding_tag=e.holding_tag(),e.edi_accounts().forEach(t=>{t._is_default=!1,e.edi_default()&&t.id()===e.edi_default().id()&&(t._is_default=!0)}),e.contacts().forEach(t=>{t._is_primary=!1,e.primary_contact()&&t.id()===e.primary_contact()&&(t._is_primary=!0)}),this.currentProvider=t,this.checkIfCanDelete(t),this.checkIfCanAdmin(t),t}))}checkIfCanDelete(e){this.pcrud.search("acqpo",{provider:e.id},{limit:1}).toPromise().then(t=>{t&&0!==t.length||this.pcrud.search("jub",{provider:e.id},{limit:1}).toPromise().then(t=>{t&&0!==t.length||this.pcrud.search("acqinv",{provider:e.id},{limit:1}).toPromise().then(t=>{e.canDelete=!0})})})}checkIfCanAdmin(e){this.loadPerms().then(t=>{Object.keys(this.permissions).length>0&&this.permissions.ADMIN_PROVIDER.includes(e.record.owner())&&(e.canAdmin=!0)})}checkIfCanAdminAtAll(){return void 0!==this.permissions&&Object.keys(this.permissions).length>0&&this.permissions.ADMIN_PROVIDER.length>0}getViewOUs(){return this.viewOUs}current(){return this.currentProvider?this.currentProvider.record:null}currentProviderRecord(){return this.currentProvider?this.currentProvider:null}fetch(e){return new Promise((t,r)=>{this.getProviderRecord(e).subscribe(e=>{t()},e=>{r()})})}refreshCurrent(){return this.currentProviderId?this.fetch(this.currentProviderId):Promise.reject()}batchUpdate(e){return this.pcrud.autoApply(e)}announceProviderUpdated(){this.providerUpdatedSource.next(this.currentProviderId)}}return e.\u0275fac=function(t){return new(t||e)(l.cc(n.a),l.cc(h.a),l.cc(S.a))},e.\u0275prov=l.Hb({token:e,factory:e.\u0275fac}),e})();var R=r("ofXK"),w=r("LZHW");const x=["deleteSuccessString"],Q=["errorString"],I=["delConfirm"],C=["text",$localize`:␟813d1b5a8e3ee5cc5d827bad69a9c53cefecf2e4␟4019228381036356510:Successfully deleted provider.`],D=["dialogTitle",$localize`:␟a6ecf76f074e2098ee024b6c2586a0475a2d6dd3␟6208564441860154239:Confirm Delete`,"dialogBody",$localize`:␟b1751b720ef2d936a4d9a7dbda840f5f4e1cd742␟4888659930218062730:Delete Provider ${"\ufffd0\ufffd"}:INTERPOLATION:?`];var P,T,z,A;function O(e,t){if(1&e){const e=l.Sb();l.Rb(0,"button",33),l.fc("click",(function(){return l.Bc(e),l.hc().toggleCollapse()})),l.bc(1,P),l.Mb(2,"span",34),l.Yb(),l.Qb()}if(2&e){const e=l.hc();l.oc("hidden",!e.collapsed)}}function M(e,t){if(1&e){const e=l.Sb();l.Rb(0,"button",33),l.fc("click",(function(){return l.Bc(e),l.hc().toggleCollapse()})),l.bc(1,T),l.Mb(2,"span",34),l.Yb(),l.Qb()}if(2&e){const e=l.hc();l.oc("hidden",e.collapsed)}}function E(e,t){1&e&&l.Vb(0,z)}function $(e,t){if(1&e&&(l.Rb(0,"span"),l.Rb(1,"span",36),l.Mc(2),l.Qb(),l.Rb(3,"span"),l.Mc(4),l.Qb(),l.Qb()),2&e){const e=l.hc().$implicit;l.xb(2),l.Oc("",e.role()," : "),l.xb(2),l.Nc(e.name())}}function q(e,t){if(1&e&&(l.Rb(0,"span"),l.Mc(1),l.Qb()),2&e){const e=l.hc().$implicit;l.xb(1),l.Nc(e.name())}}function L(e,t){1&e&&(l.Rb(0,"span"),l.Rb(1,"span",37),l.Mc(2," (primary)"),l.Qb(),l.Qb())}function F(e,t){if(1&e&&(l.Rb(0,"div"),l.Kc(1,$,5,2,"span",35),l.Kc(2,q,2,1,"span",35),l.Kc(3,L,3,0,"span",35),l.Qb()),2&e){const e=t.$implicit;l.xb(1),l.oc("ngIf",e.role()),l.xb(1),l.oc("ngIf",!e.role()),l.xb(1),l.oc("ngIf",e._is_primary)}}function k(e,t){if(1&e&&(l.Rb(0,"div",10),l.Rb(1,"a",38),l.Mc(2),l.Qb(),l.Qb()),2&e){const e=l.hc();l.xb(1),l.pc("href",e.provider_url,l.Ec),l.xb(1),l.Nc(e.provider_url)}}function N(e,t){if(1&e){const e=l.Sb();l.Rb(0,"button",39),l.fc("click",(function(){return l.Bc(e),l.hc().deleteProvider()})),l.Vb(1,A),l.Qb()}if(2&e){const e=l.hc();l.oc("hidden",e.collapsed)("disabled",!e.canDeleteProvider())}}P=$localize`:␟9aded510c3427c6100cebd489901a0fd89ed15cb␟3328410681860429964:${"\ufffd#2\ufffd"}:START_TAG_SPAN:expand_more${"\ufffd/#2\ufffd"}:CLOSE_TAG_SPAN:`,T=$localize`:␟7ad16b52c87def59e6220ffbbe3376f9347d0bae␟5070474390961145559:${"\ufffd#2\ufffd"}:START_TAG_SPAN:expand_less${"\ufffd/#2\ufffd"}:CLOSE_TAG_SPAN:`,z=$localize`:␟7821025ea4a7d7b0d9014cd8d72aa9121cc958f5␟9048575297217946347:Provider Deletion Failed`,A=$localize`:␟fd51b712c3f679d6fd3fbc41bc714f93f8960055␟4419710690523945930:
Delete Provider`;let G=(()=>{class e{constructor(e,t,r,i,c,o,d){this.router=e,this.pcrud=t,this.idl=r,this.org=i,this.toast=c,this.auth=o,this.prov=d,this.collapsed=!1,this.provider_id="",this.provider_name="",this.provider_code="",this.provider_owner="",this.provider_currency_type="",this.provider_holding_tag="",this.provider_addresses="",this.provider_san="",this.provider_edi_default="",this.provider_active="",this.provider_prepayment_required="",this.provider_url="",this.provider_email="",this.provider_phone="",this.provider_fax_phone="",this.provider_default_claim_policy="",this.provider_default_copy_count="",this.provider_contacts="",this.provider_provider_notes="",this.summaryToggled=new l.n}ngOnInit(){this.provider_id_label=this.idl.classes.acqpro.field_map.id.label,this.provider_name_label=this.idl.classes.acqpro.field_map.name.label,this.provider_code_label=this.idl.classes.acqpro.field_map.code.label,this.provider_owner_label=this.idl.classes.acqpro.field_map.owner.label,this.provider_currency_type_label=this.idl.classes.acqpro.field_map.currency_type.label,this.provider_holding_tag_label=this.idl.classes.acqpro.field_map.holding_tag.label,this.provider_addresses_label=this.idl.classes.acqpro.field_map.addresses.label,this.provider_san_label=this.idl.classes.acqpro.field_map.san.label,this.provider_edi_default_label=this.idl.classes.acqpro.field_map.edi_default.label,this.provider_active_label=this.idl.classes.acqpro.field_map.active.label,this.provider_prepayment_required_label=this.idl.classes.acqpro.field_map.prepayment_required.label,this.provider_url_label=this.idl.classes.acqpro.field_map.url.label,this.provider_email_label=this.idl.classes.acqpro.field_map.email.label,this.provider_phone_label=this.idl.classes.acqpro.field_map.phone.label,this.provider_fax_phone_label=this.idl.classes.acqpro.field_map.fax_phone.label,this.provider_default_claim_policy_label=this.idl.classes.acqpro.field_map.default_claim_policy.label,this.provider_default_copy_count_label=this.idl.classes.acqpro.field_map.default_copy_count.label,this.provider_contacts_label=this.idl.classes.acqpro.field_map.contacts.label,this.provider_provider_notes_label=this.idl.classes.acqpro.field_map.provider_notes.label}ngAfterViewInit(){this.providerId&&this.update(this.providerId)}update(e){function t(){this.provider_id="",this.provider_name="",this.provider_code="",this.provider_owner="",this.provider_currency_type="",this.provider_holding_tag="",this.provider_addresses="",this.provider_san="",this.provider_edi_default="",this.provider_active="",this.provider_prepayment_required="",this.provider_url="",this.provider_email="",this.provider_phone="",this.provider_fax_phone="",this.provider_default_claim_policy="",this.provider_default_copy_count="",this.provider_contacts="",this.provider_provider_notes=""}if(e){const e=this.prov.currentProviderRecord(),r=e.record;r?(this.provRec=e,this.provider=r,this.provider_id=r.id(),this.provider_name=r.name(),this.provider_code=r.code(),this.provider_owner=this.org.get(r.owner()).shortname(),this.provider_currency_type=r.currency_type()?r.currency_type().label():"",this.provider_holding_tag=r.holding_tag(),this.provider_addresses=r.addresses(),this.provider_san=r.san(),this.provider_edi_default="object"==typeof r.edi_default()&&r.edi_default()?r.edi_default().label():"",this.provider_active=r.active(),this.provider_prepayment_required=r.prepayment_required(),this.provider_url=r.url(),this.provider_email=r.email(),this.provider_phone=r.phone(),this.provider_fax_phone=r.fax_phone(),this.provider_default_claim_policy=r.default_claim_policy(),this.provider_default_copy_count=r.default_copy_count(),this.provider_contacts=r.contacts(),this.provider_provider_notes=r.provider_notes()):(this.provider=null,t())}else t()}deleteProvider(){this.delConfirm.open().subscribe(e=>{e&&this.pcrud.remove(this.provider).subscribe(e=>{this.deleteSuccessString.current().then(e=>this.toast.success(e)),this.router.navigate(["/staff","acq","provider"])},e=>{this.errorString.current().then(e=>this.toast.danger(e))},()=>{console.log("deleteProvider, what is this?")})})}canDeleteProvider(){return!(!this.provider||!this.provider.id())&&this.provRec.canAdmin&&this.provRec.canDelete}toggleCollapse(){this.collapsed=!this.collapsed,this.summaryToggled.emit(this.collapsed)}}return e.\u0275fac=function(t){return new(t||e)(l.Lb(c.c),l.Lb(h.a),l.Lb(n.a),l.Lb(b.a),l.Lb(p.a),l.Lb(g.a),l.Lb(_))},e.\u0275cmp=l.Fb({type:e,selectors:[["eg-acq-provider-summary-pane"]],viewQuery:function(e,t){var r;1&e&&(l.Ic(x,!0),l.Ic(Q,!0),l.Ic(I,!0)),2&e&&(l.yc(r=l.gc())&&(t.deleteSuccessString=r.first),l.yc(r=l.gc())&&(t.errorString=r.first),l.yc(r=l.gc())&&(t.delConfirm=r.first))},inputs:{providerId:"providerId"},outputs:{summaryToggled:"summaryToggled"},decls:108,vars:44,consts:[["class","btn","type","submit",3,"hidden","click",4,"ngIf"],["id","acq-provider-summary-pane",1,"pl-3","pr-3","pt-3","pb-3","mb-3",3,"hidden"],["errorStrTmpl",""],[6,"text"],["deleteSuccessString",""],[3,"template"],["errorString",""],[6,"dialogTitle","dialogBody"],["delConfirm",""],[1,"row","provider_name"],[1,"col"],[1,"row","provider_code"],[1,"row","provider_owner"],[1,"row","provider_id"],[1,"row","provider_currency_type"],[1,"row","provider_contacts"],[4,"ngFor","ngForOf"],[1,"row","provider_san_tag"],[1,"row","provider_edi_default"],[1,"row","provider_url"],["class","col",4,"ngIf"],[1,"row","provider_holding_tag"],[1,"row","provider_addresses"],[1,"row","provider_active"],[3,"value"],[1,"row","provider_prepayment_required"],[1,"row","provider_email"],[1,"row","provider_phone"],[1,"row","provider_fax_phone"],[1,"row","provider_default_claim_policy"],[1,"row","provider_default_copy_count"],[1,"row","provider_provider_notes"],["class","btn btn-primary","type","submit",3,"hidden","disabled","click",4,"ngIf"],["type","submit",1,"btn",3,"hidden","click"],[1,"material-icons"],[4,"ngIf"],[1,"provider_contact_role"],[1,"provider_primary_contact"],["target","_blank",3,"href"],["type","submit",1,"btn","btn-primary",3,"hidden","disabled","click"]],template:function(e,t){if(1&e&&(l.Kc(0,O,3,1,"button",0),l.Kc(1,M,3,1,"button",0),l.Rb(2,"div",1),l.Kc(3,E,1,0,"ng-template",null,2,l.Lc),l.Rb(5,"eg-string",3,4),l.Xb(7,C),l.Qb(),l.Mb(8,"eg-string",5,6),l.Rb(10,"eg-confirm-dialog",7,8),l.Xb(12,D),l.Qb(),l.Rb(13,"div",9),l.Rb(14,"div",10),l.Mc(15),l.Qb(),l.Rb(16,"div",10),l.Mc(17),l.Qb(),l.Qb(),l.Rb(18,"div",11),l.Rb(19,"div",10),l.Mc(20),l.Qb(),l.Rb(21,"div",10),l.Mc(22),l.Qb(),l.Qb(),l.Rb(23,"div",12),l.Rb(24,"div",10),l.Mc(25),l.Qb(),l.Rb(26,"div",10),l.Mc(27),l.Qb(),l.Qb(),l.Rb(28,"div",13),l.Rb(29,"div",10),l.Mc(30),l.Qb(),l.Rb(31,"div",10),l.Mc(32),l.Qb(),l.Qb(),l.Rb(33,"div",14),l.Rb(34,"div",10),l.Mc(35),l.Qb(),l.Rb(36,"div",10),l.Mc(37),l.Qb(),l.Qb(),l.Rb(38,"div",15),l.Rb(39,"div",10),l.Mc(40),l.Qb(),l.Rb(41,"div",10),l.Kc(42,F,4,3,"div",16),l.Qb(),l.Qb(),l.Rb(43,"div",17),l.Rb(44,"div",10),l.Mc(45),l.Qb(),l.Rb(46,"div",10),l.Mc(47),l.Qb(),l.Qb(),l.Rb(48,"div",18),l.Rb(49,"div",10),l.Mc(50),l.Qb(),l.Rb(51,"div",10),l.Mc(52),l.Qb(),l.Qb(),l.Rb(53,"div",19),l.Rb(54,"div",10),l.Mc(55),l.Qb(),l.Kc(56,k,3,2,"div",20),l.Qb(),l.Rb(57,"div",21),l.Rb(58,"div",10),l.Mc(59),l.Qb(),l.Rb(60,"div",10),l.Mc(61),l.Qb(),l.Qb(),l.Rb(62,"div",22),l.Rb(63,"div",10),l.Mc(64),l.Qb(),l.Rb(65,"div",10),l.Mc(66),l.Qb(),l.Qb(),l.Rb(67,"div",23),l.Rb(68,"div",10),l.Mc(69),l.Qb(),l.Rb(70,"div",10),l.Mb(71,"eg-bool",24),l.Qb(),l.Qb(),l.Rb(72,"div",25),l.Rb(73,"div",10),l.Mc(74),l.Qb(),l.Rb(75,"div",10),l.Mc(76),l.Qb(),l.Qb(),l.Rb(77,"div",26),l.Rb(78,"div",10),l.Mc(79),l.Qb(),l.Rb(80,"div",10),l.Mc(81),l.Qb(),l.Qb(),l.Rb(82,"div",27),l.Rb(83,"div",10),l.Mc(84),l.Qb(),l.Rb(85,"div",10),l.Mc(86),l.Qb(),l.Qb(),l.Rb(87,"div",28),l.Rb(88,"div",10),l.Mc(89),l.Qb(),l.Rb(90,"div",10),l.Mc(91),l.Qb(),l.Qb(),l.Rb(92,"div",29),l.Rb(93,"div",10),l.Mc(94),l.Qb(),l.Rb(95,"div",10),l.Mc(96),l.Qb(),l.Qb(),l.Rb(97,"div",30),l.Rb(98,"div",10),l.Mc(99),l.Qb(),l.Rb(100,"div",10),l.Mc(101),l.Qb(),l.Qb(),l.Rb(102,"div",31),l.Rb(103,"div",10),l.Mc(104),l.Qb(),l.Rb(105,"div",10),l.Mc(106),l.Qb(),l.Qb(),l.Qb(),l.Kc(107,N,2,2,"button",32)),2&e){const e=l.zc(4);l.oc("ngIf",t.provider_id),l.xb(1),l.oc("ngIf",t.provider_id),l.xb(1),l.oc("hidden",!t.provider_id||t.collapsed),l.xb(6),l.oc("template",e),l.xb(2),l.Zb(t.provider?t.provider.code():""),l.Wb(12),l.xb(5),l.Nc(t.provider_name_label),l.xb(2),l.Nc(t.provider_name),l.xb(3),l.Nc(t.provider_code_label),l.xb(2),l.Nc(t.provider_code),l.xb(3),l.Nc(t.provider_owner_label),l.xb(2),l.Nc(t.provider_owner),l.xb(3),l.Nc(t.provider_id_label),l.xb(2),l.Nc(t.provider_id),l.xb(3),l.Nc(t.provider_currency_type_label),l.xb(2),l.Nc(t.provider_currency_type),l.xb(3),l.Nc(t.provider_contacts_label),l.xb(2),l.oc("ngForOf",t.provider_contacts),l.xb(3),l.Nc(t.provider_san_label),l.xb(2),l.Nc(t.provider_san),l.xb(3),l.Nc(t.provider_edi_default_label),l.xb(2),l.Nc(t.provider_edi_default),l.xb(3),l.Nc(t.provider_url_label),l.xb(1),l.oc("ngIf",t.provider_url),l.xb(3),l.Nc(t.provider_holding_tag_label),l.xb(2),l.Nc(t.provider_holding_tag),l.xb(3),l.Nc(t.provider_addresses_label),l.xb(2),l.Nc(t.provider_addresses),l.xb(3),l.Nc(t.provider_active_label),l.xb(2),l.oc("value","t"==t.provider_active),l.xb(3),l.Nc(t.provider_prepayment_required_label),l.xb(2),l.Nc(t.provider_prepayment_required),l.xb(3),l.Nc(t.provider_email_label),l.xb(2),l.Nc(t.provider_email),l.xb(3),l.Nc(t.provider_phone_label),l.xb(2),l.Nc(t.provider_phone),l.xb(3),l.Nc(t.provider_fax_phone_label),l.xb(2),l.Nc(t.provider_fax_phone),l.xb(3),l.Nc(t.provider_default_claim_policy_label),l.xb(2),l.Nc(t.provider_default_claim_policy),l.xb(3),l.Nc(t.provider_default_copy_count_label),l.xb(2),l.Nc(t.provider_default_copy_count),l.xb(3),l.Nc(t.provider_provider_notes_label),l.xb(2),l.Nc(t.provider_provider_notes),l.xb(1),l.oc("ngIf",t.provider_id)}},directives:[R.v,u.a,f.a,R.u,w.a],styles:["#acq-provider-summary-pane[_ngcontent-%COMP%]{border-radius:0 0 7px 7px;background-color:#f7f7f7;box-shadow:1px 2px 3px -1px rgba(0,0,0,.2)}.row[_ngcontent-%COMP%]{border-bottom:thin dotted}.row.provider_addresses[_ngcontent-%COMP%], .row.provider_holding_tag[_ngcontent-%COMP%]{display:none}.row.provider_prepayment_required[_ngcontent-%COMP%]{display:none}.row.provider_default_claim_policy[_ngcontent-%COMP%], .row.provider_default_copy_count[_ngcontent-%COMP%], .row.provider_email[_ngcontent-%COMP%], .row.provider_fax_phone[_ngcontent-%COMP%], .row.provider_phone[_ngcontent-%COMP%]{display:none}.provider_contact_role[_ngcontent-%COMP%]{font-style:italic}.provider_primary_contact[_ngcontent-%COMP%]{color:red}.row.provider_provider_notes[_ngcontent-%COMP%]{display:none}"]}),e})();var X=r("Osig"),V=r("UUQ6");const U=["successString"],j=["updateFailedString"],K=["deleteFailedString"],H=["deleteSuccessString"],B=["editDialog"],W=["text",$localize`:␟9f4f42b9fb654d6d4f6149181b527592b3875f16␟3696687369638603872:Provider Update Succeeded`],Z=["text",$localize`:␟1dcbb2c7a4f0daa4f367ee28b0e813d0dfe740e1␟2289269087325658335:Provider Update Failed`],J=["text",$localize`:␟59f6956177949c82e976d2a5fa86383686686e08␟7057221939815832964:Delete of Provider failed or was not allowed`],Y=["text",$localize`:␟cb183be6ddaafcab006d61001341cb0843d0a4d2␟3607622008414512494:Delete of Provider succeeded`],ee=function(){return{preloadLinkedValues:!0}},te=function(e,t,r){return{currency_type:e,edi_default:t,default_claim_policy:r}};let re=(()=>{class e{constructor(e,t,r,i,c,o,d){this.router=e,this.route=t,this.net=r,this.idl=i,this.auth=c,this.providerRecord=o,this.toast=d,this.desireSummarize=new l.n}ngOnInit(){this.refresh()}_deflesh(){this.provider&&(this.provider.currency_type()&&this.provider.currency_type(this.provider.currency_type().code()),this.provider.edi_default()&&"number"!=typeof this.provider.edi_default()&&this.provider.edi_default(this.provider.edi_default().id()))}updateProvider(e){this.desireSummarize.emit(this.provider.id())}refresh(){this.provider=this.idl.clone(this.providerRecord.current()),this._deflesh()}permittedMode(){return this.providerRecord.currentProviderRecord()&&this.providerRecord.currentProviderRecord().canAdmin?"update":"view"}isDirty(){return!!this.editDialog&&this.editDialog.isDirty()}}return e.\u0275fac=function(t){return new(t||e)(l.Lb(c.c),l.Lb(c.a),l.Lb(X.b),l.Lb(n.a),l.Lb(g.a),l.Lb(_),l.Lb(p.a))},e.\u0275cmp=l.Fb({type:e,selectors:[["eg-provider-details"]],viewQuery:function(e,t){var r;1&e&&(l.Ic(U,!0),l.Sc(j,!0),l.Ic(K,!0),l.Ic(H,!0),l.Sc(B,!0)),2&e&&(l.yc(r=l.gc())&&(t.successString=r.first),l.yc(r=l.gc())&&(t.updateFailedString=r.first),l.yc(r=l.gc())&&(t.deleteFailedString=r.first),l.yc(r=l.gc())&&(t.deleteSuccessString=r.first),l.yc(r=l.gc())&&(t.editDialog=r.first))},outputs:{desireSummarize:"desireSummarize"},decls:14,vars:11,consts:[[6,"text"],["successString",""],["updateFailedString",""],["deleteFailedString",""],["deleteSuccessString",""],["idlClass","acqpro","displayMode","inline","readonlyFields","id","hiddenFields","holding_tag,primary_contact","fieldOrder","active,name,code,id,currency_type,default_claim_policy,default_copy_count,edi_default,owner,phone,fax_phone,email,url,san,prepayment_required",3,"mode","hideBanner","record","fieldOptions","recordSaved"],["editDialog",""]],template:function(e,t){1&e&&(l.Rb(0,"eg-string",0,1),l.Xb(2,W),l.Qb(),l.Rb(3,"eg-string",0,2),l.Xb(5,Z),l.Qb(),l.Rb(6,"eg-string",0,3),l.Xb(8,J),l.Qb(),l.Rb(9,"eg-string",0,4),l.Xb(11,Y),l.Qb(),l.Rb(12,"eg-fm-record-editor",5,6),l.fc("recordSaved",(function(e){return t.updateProvider(e)})),l.Qb()),2&e&&(l.xb(12),l.oc("mode",t.permittedMode())("hideBanner",!0)("record",t.provider)("fieldOptions",l.wc(7,te,l.tc(4,ee),l.tc(5,ee),l.tc(6,ee))))},directives:[u.a,V.a],encapsulation:2}),e})();var ie=r("EY2u"),ce=r("Cfvw"),oe=r("9Zsr"),de=r("MWGh"),ae=r("eXX1"),se=r("QGNW"),ne=r("t7hH"),le=r("3Pt+"),be=r("9rfo"),he=r("ib0n");const ue=["editDialog"],pe=["acqProviderHoldingsGrid"],fe=["successString"],ge=["createString"],ve=["createErrString"],me=["updateFailedString"],Se=["deleteFailedString"],ye=["deleteSuccessString"],_e=["successTagString"],Re=["updateFailedTagString"],we=["holdingTagForm"],xe=["text",$localize`:␟fe4022a1f9d16047d09a75aec2cf640a5a866b90␟8199956052412658331:New Provider Holdings Subfield Added`],Qe=["text",$localize`:␟2dc5afb8c18494fb1c571ab767643e0a5cbd696b␟7195915631192973164:Failed to Create New Provider Holdings Subfield`],Ie=["text",$localize`:␟21edab9925a896c7182a4ed277f09c811ebbb7c7␟8102384490641200669:Provider Holdings Subfield Update Succeeded`],Ce=["text",$localize`:␟93d8d0cecc26f88b454d9be172797ec9bb0dab6a␟716037912508826495:Provider Holdings Subfield Update Failed`],De=["text",$localize`:␟9fcec0ce1e1ef5557862776f88f750db7ba9314e␟6992821783005669451:Delete of Provider Holdings Subfield failed or was not allowed`],Pe=["text",$localize`:␟4d1d0b2615dac0cdda73fbd4d8d8c699a531c016␟6213174174630992715:Delete of Provider Holdings Subfield succeeded`],Te=["text",$localize`:␟c69cf3bfdbf22b414a3a39d069d1ecb9b8de76f0␟8457101240179432841:Provider Holdings Tag Update Succeeded`],ze=["text",$localize`:␟93d8d0cecc26f88b454d9be172797ec9bb0dab6a␟716037912508826495:Provider Holdings Subfield Update Failed`],Ae=["label",$localize`:␟db481c3ac389767096e01dfd9d0da77aaf945f5d␟2135733363263801660:New Holdings Subfield`],Oe=["label",$localize`:␟c525cbf6c3ff841184f81b04f0303bce644b1c51␟2886653045266158715:Edit Selected`],Me=["label",$localize`:␟96e678d5f4bfe1a041ecfcd34804efa5e100d5e8␟5167284364083276913:Delete Selected`];var Ee,$e,qe,Le,Fe,ke,Ne,Ge,Xe,Ve,Ue,je,Ke;function He(e,t){1&e&&(l.Pb(0),l.Vb(1,Ee),l.Ob())}function Be(e,t){1&e&&(l.Pb(0),l.Vb(1,$e),l.Ob())}function We(e,t){1&e&&(l.Pb(0),l.Vb(1,qe),l.Ob())}function Ze(e,t){1&e&&(l.Pb(0),l.Vb(1,Le),l.Ob())}function Je(e,t){1&e&&(l.Pb(0),l.Vb(1,Fe),l.Ob())}function Ye(e,t){1&e&&(l.Pb(0),l.Vb(1,ke),l.Ob())}function et(e,t){1&e&&(l.Pb(0),l.Vb(1,Ne),l.Ob())}function tt(e,t){1&e&&(l.Pb(0),l.Vb(1,Ge),l.Ob())}function rt(e,t){1&e&&(l.Pb(0),l.Vb(1,Xe),l.Ob())}function it(e,t){1&e&&(l.Pb(0),l.Vb(1,Ve),l.Ob())}function ct(e,t){if(1&e&&(l.Pb(0),l.Vb(1,Ue),l.Ob()),2&e){const e=l.hc().row;l.xb(1),l.Zb(e.name()),l.Wb(1)}}function ot(e,t){1&e&&(l.Pb(0,21),l.Kc(1,He,2,0,"ng-container",22),l.Kc(2,Be,2,0,"ng-container",22),l.Kc(3,We,2,0,"ng-container",22),l.Kc(4,Ze,2,0,"ng-container",22),l.Kc(5,Je,2,0,"ng-container",22),l.Kc(6,Ye,2,0,"ng-container",22),l.Kc(7,et,2,0,"ng-container",22),l.Kc(8,tt,2,0,"ng-container",22),l.Kc(9,rt,2,0,"ng-container",22),l.Kc(10,it,2,0,"ng-container",22),l.Kc(11,ct,2,1,"ng-container",23),l.Ob()),2&e&&(l.oc("ngSwitch",t.row.name()),l.xb(1),l.oc("ngSwitchCase","barcode"),l.xb(1),l.oc("ngSwitchCase","call_number"),l.xb(1),l.oc("ngSwitchCase","circ_modifier"),l.xb(1),l.oc("ngSwitchCase","collection_code"),l.xb(1),l.oc("ngSwitchCase","estimated_price"),l.xb(1),l.oc("ngSwitchCase","fund_code"),l.xb(1),l.oc("ngSwitchCase","note"),l.xb(1),l.oc("ngSwitchCase","owning_lib"),l.xb(1),l.oc("ngSwitchCase","quantity"),l.xb(1),l.oc("ngSwitchCase","copy_location"))}function dt(e,t){if(1&e){const e=l.Sb();l.Rb(0,"form",null,24),l.Rb(2,"div",25),l.Rb(3,"label",26),l.Vb(4,je),l.Qb(),l.Rb(5,"div",27),l.Rb(6,"input",28),l.fc("ngModelChange",(function(t){return l.Bc(e),l.hc().provider._holding_tag=t})),l.Qb(),l.Qb(),l.Rb(7,"div",27),l.Rb(8,"button",29),l.fc("click",(function(t){l.Bc(e);const r=l.zc(1);return l.hc().updateProvider(t)&&r.markAsPristine()})),l.Vb(9,Ke),l.Qb(),l.Qb(),l.Qb(),l.Qb()}if(2&e){const e=l.zc(1),t=l.hc();l.xb(6),l.oc("ngModel",t.provider._holding_tag),l.xb(2),l.oc("disabled",!e.dirty||t.provider&&t.provider._holding_tag==t.provider.holding_tag())}}Ee=$localize`:␟d81e7544c57020f4d7355d9aa1a6aaf8f6e37962␟3011112932753861347:Barcode`,$e=$localize`:␟115508ef944d0bdb066e511220b8679efd7fb4b2␟6100860029551607069:Call Number`,qe=$localize`:␟172a27bb1b7db1ef4a56779c6dcdc20a602a16e7␟3860933437516464957:Circulation Modifier`,Le=$localize`:␟c31dc4a651779ec102dfb5d3af212c1e3b23b66d␟4216575990664709098:Collection Code`,Fe=$localize`:␟417c7208ab7fd97d49ad0487b095923ffb21b5b7␟6637520172926258332:Estimated Price`,ke=$localize`:␟1aa553debd4d8b99b8d027511add4de88fc1f2f6␟8917148266436022249:Fund Code`,Ne=$localize`:␟5c54befce78d70e20c215f10a00e617245f53bc9␟4388879716045736175:Note`,Ge=$localize`:␟1ab32f0f2aac0aeeac9ac4184f2afe9ec030ffbc␟8318478181786126182:Owning Library`,Xe=$localize`:␟ca30c1aa79fb5ab487fbd2caa4ca01f2f6691d70␟6762504134540024018:Quantity`,Ve=$localize`:␟5e3e384df062924aa75d2f5ca826e1e077372153␟8734320241258430920:Shelving Location`,Ue=$localize`:␟1fb74a0b176dc51f107284d1b3670015f6b13be1␟5160687639753909283:${"\ufffd0\ufffd"}:INTERPOLATION:`,je=$localize`:␟9afa1045bf4ba4183016da2990eaede3d3f96b38␟2423853792891065764:Holdings Tag`,Ke=$localize`:␟52c9a103b812f258bcddc3d90a6e3f46871d25fe␟3768927257183755959:Save`;const at=["entryLabel",$localize`:␟d81e7544c57020f4d7355d9aa1a6aaf8f6e37962␟3011112932753861347:Barcode`],st=["entryLabel",$localize`:␟115508ef944d0bdb066e511220b8679efd7fb4b2␟6100860029551607069:Call Number`],nt=["entryLabel",$localize`:␟172a27bb1b7db1ef4a56779c6dcdc20a602a16e7␟3860933437516464957:Circulation Modifier`],lt=["entryLabel",$localize`:␟c31dc4a651779ec102dfb5d3af212c1e3b23b66d␟4216575990664709098:Collection Code`],bt=["entryLabel",$localize`:␟417c7208ab7fd97d49ad0487b095923ffb21b5b7␟6637520172926258332:Estimated Price`],ht=["entryLabel",$localize`:␟1aa553debd4d8b99b8d027511add4de88fc1f2f6␟8917148266436022249:Fund Code`],ut=["entryLabel",$localize`:␟5c54befce78d70e20c215f10a00e617245f53bc9␟4388879716045736175:Note`],pt=["entryLabel",$localize`:␟1ab32f0f2aac0aeeac9ac4184f2afe9ec030ffbc␟8318478181786126182:Owning Library`],ft=["entryLabel",$localize`:␟ca30c1aa79fb5ab487fbd2caa4ca01f2f6691d70␟6762504134540024018:Quantity`],gt=["entryLabel",$localize`:␟5e3e384df062924aa75d2f5ca826e1e077372153␟8734320241258430920:Shelving Location`];function vt(e,t){if(1&e){const e=l.Sb();l.Rb(0,"eg-combobox",30),l.fc("onChange",(function(r){return l.Bc(e),t.record[t.field.name](r.id)})),l.Rb(1,"eg-combobox-entry",31),l.Xb(2,at),l.Qb(),l.Rb(3,"eg-combobox-entry",32),l.Xb(4,st),l.Qb(),l.Rb(5,"eg-combobox-entry",33),l.Xb(6,nt),l.Qb(),l.Rb(7,"eg-combobox-entry",34),l.Xb(8,lt),l.Qb(),l.Rb(9,"eg-combobox-entry",35),l.Xb(10,bt),l.Qb(),l.Rb(11,"eg-combobox-entry",36),l.Xb(12,ht),l.Qb(),l.Rb(13,"eg-combobox-entry",37),l.Xb(14,ut),l.Qb(),l.Rb(15,"eg-combobox-entry",38),l.Xb(16,pt),l.Qb(),l.Rb(17,"eg-combobox-entry",39),l.Xb(18,ft),l.Qb(),l.Rb(19,"eg-combobox-entry",40),l.Xb(20,gt),l.Qb(),l.Qb()}if(2&e){const e=t.field;l.oc("startId",t.record[e.name]())("required",e.isRequired())("allowFreeText",!1)}}const mt=function(e){return{template:e}},St=function(e){return{customTemplate:e}},yt=function(e){return{name:e}};let _t=(()=>{class e{constructor(e,t,r,i,c,o,d){this.router=e,this.route=t,this.net=r,this.auth=i,this.idl=c,this.providerRecord=o,this.toast=d,this.holdings=[],this.dialogSize="lg"}ngOnInit(){this.gridSource=this.getDataSource(),this.cellTextGenerator={name:e=>e.name()},this.deleteSelected=e=>{e.forEach(e=>e.isdeleted(!0)),this.providerRecord.batchUpdate(e).subscribe(e=>{console.debug("deleted: "+e),this.deleteSuccessString.current().then(e=>this.toast.success(e))},e=>{this.deleteFailedString.current().then(e=>this.toast.danger(e))},()=>{this.providerRecord.refreshCurrent().then(()=>this.providerHoldingsGrid.reload())})},this.providerHoldingsGrid.onRowActivate.subscribe(e=>this.showEditDialog(e)),this.subscription=this.providerRecord.providerUpdated$.subscribe(e=>{this.providerHoldingsGrid.reload()})}ngAfterViewInit(){this.providerRecord.current()&&(this.providerRecord.current()._holding_tag=this.providerRecord.current().holding_tag())}ngOnDestroy(){this.subscription.unsubscribe()}updateProvider(e){this.provider.holding_tag(this.provider._holding_tag),this.provider.ischanged(!0),this.providerRecord.batchUpdate([this.provider]).subscribe(e=>{this.successTagString.current().then(e=>this.toast.success(e))},e=>{this.updateFailedTagString.current().then(e=>this.toast.danger(e))},()=>{this.providerRecord.refreshCurrent().then(()=>{this.provider=this.providerRecord.current()})})}getDataSource(){const e=new de.c;return e.getRows=(e,t)=>{if(this.provider=this.providerRecord.current(),!this.provider)return Object(ie.b)();let r=this.provider.holdings_subfields();return t.length>0&&(r=r.sort((e,r)=>{for(let i=0;i<t.length;i++){let c=-1;const o=t[i].name;if("d"===t[i].dir.substring(0,1).toLowerCase()&&(c*=-1),e[o]()<r[o]())return c;if(e[o]()>r[o]())return-1*c}return 0})),Object(ce.a)(r.slice(e.offset,e.offset+e.limit))},e}showEditDialog(e){return this.editDialog.mode="update",this.editDialog.recordId=e.id(),new Promise((e,t)=>{this.editDialog.open({size:this.dialogSize}).subscribe(t=>{this.successString.current().then(e=>this.toast.success(e)),this.providerRecord.refreshCurrent().then(()=>this.providerHoldingsGrid.reload()),e(t)},e=>{this.updateFailedString.current().then(e=>this.toast.danger(e)),t(e)})})}editSelected(e){const t=r=>{r&&this.showEditDialog(r).then(()=>t(e.shift()))};t(e.shift())}createNew(){this.editDialog.mode="create";const e=this.idl.create("acqphsm");e.provider(this.provider.id()),this.editDialog.record=e,this.editDialog.recordId=null,this.editDialog.open({size:this.dialogSize}).subscribe(e=>{this.createString.current().then(e=>this.toast.success(e)),this.providerRecord.refreshCurrent().then(()=>this.providerHoldingsGrid.reload())},e=>{e.dismissed||this.createErrString.current().then(e=>this.toast.danger(e))})}isDirty(){return this.providerRecord.current()._holding_tag!==this.providerRecord.current().holding_tag()&&!(!this.holdingTagForm||!this.holdingTagForm.dirty)&&this.holdingTagForm.dirty}}return e.\u0275fac=function(t){return new(t||e)(l.Lb(c.c),l.Lb(c.a),l.Lb(X.b),l.Lb(g.a),l.Lb(n.a),l.Lb(_),l.Lb(p.a))},e.\u0275cmp=l.Fb({type:e,selectors:[["eg-provider-holdings"]],viewQuery:function(e,t){var r;1&e&&(l.Ic(ue,!0),l.Ic(pe,!0),l.Ic(fe,!0),l.Sc(ge,!0),l.Sc(ve,!0),l.Sc(me,!0),l.Ic(Se,!0),l.Ic(ye,!0),l.Ic(_e,!0),l.Sc(Re,!0),l.Sc(we,!0)),2&e&&(l.yc(r=l.gc())&&(t.editDialog=r.first),l.yc(r=l.gc())&&(t.providerHoldingsGrid=r.first),l.yc(r=l.gc())&&(t.successString=r.first),l.yc(r=l.gc())&&(t.createString=r.first),l.yc(r=l.gc())&&(t.createErrString=r.first),l.yc(r=l.gc())&&(t.updateFailedString=r.first),l.yc(r=l.gc())&&(t.deleteFailedString=r.first),l.yc(r=l.gc())&&(t.deleteSuccessString=r.first),l.yc(r=l.gc())&&(t.successTagString=r.first),l.yc(r=l.gc())&&(t.updateFailedTagString=r.first),l.yc(r=l.gc())&&(t.holdingTagForm=r.first))},inputs:{providerId:"providerId",dialogSize:"dialogSize"},decls:42,vars:13,consts:[[6,"text"],["createString",""],["createErrString",""],["successString",""],["updateFailedString",""],["deleteFailedString",""],["deleteSuccessString",""],["successTagString",""],["updateFailedTagString",""],["nameCellTemplate",""],[4,"ngIf"],["persistKey","acq.provider.holdings","idlClass","acqphsm","hideFields","provider",3,"dataSource","sortable","cellTextGenerator"],["acqProviderHoldingsGrid",""],[3,"disabled","onClick",6,"label"],[3,"onClick",6,"label"],["path","id"],["path","name",3,"cellTemplate"],["path","subfield"],["nameTemplate",""],["idlClass","acqphsm","readonlyFields","id,provider","fieldOrder","id,provider,name,subfield",3,"fieldOptions"],["editDialog",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["holdingTagForm","ngForm"],[1,"form-group","row"],["for","holdings-tag",1,"col-auto","col-form-label"],[1,"col-auto"],["id","holdings-tag","type","text","name","holding_tag",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-info",3,"disabled","click"],[3,"startId","required","allowFreeText","onChange"],["entryId","barcode",6,"entryLabel"],["entryId","call_number",6,"entryLabel"],["entryId","circ_modifier",6,"entryLabel"],["entryId","collection_code",6,"entryLabel"],["entryId","estimated_price",6,"entryLabel"],["entryId","fund_code",6,"entryLabel"],["entryId","note",6,"entryLabel"],["entryId","owning_lib",6,"entryLabel"],["entryId","quantity",6,"entryLabel"],["entryId","copy_location",6,"entryLabel"]],template:function(e,t){if(1&e&&(l.Rb(0,"eg-string",0,1),l.Xb(2,xe),l.Qb(),l.Rb(3,"eg-string",0,2),l.Xb(5,Qe),l.Qb(),l.Rb(6,"eg-string",0,3),l.Xb(8,Ie),l.Qb(),l.Rb(9,"eg-string",0,4),l.Xb(11,Ce),l.Qb(),l.Rb(12,"eg-string",0,5),l.Xb(14,De),l.Qb(),l.Rb(15,"eg-string",0,6),l.Xb(17,Pe),l.Qb(),l.Rb(18,"eg-string",0,7),l.Xb(20,Te),l.Qb(),l.Rb(21,"eg-string",0,8),l.Xb(23,ze),l.Qb(),l.Kc(24,ot,12,11,"ng-template",null,9,l.Lc),l.Kc(26,dt,10,2,"form",10),l.Rb(27,"eg-grid",11,12),l.Rb(29,"eg-grid-toolbar-button",13),l.Xb(30,Ae),l.fc("onClick",(function(){return t.createNew()})),l.Qb(),l.Rb(31,"eg-grid-toolbar-action",14),l.Xb(32,Oe),l.fc("onClick",(function(e){return t.editSelected(e)})),l.Qb(),l.Rb(33,"eg-grid-toolbar-action",14),l.Xb(34,Me),l.fc("onClick",(function(e){return t.deleteSelected(e)})),l.Qb(),l.Mb(35,"eg-grid-column",15),l.Mb(36,"eg-grid-column",16),l.Mb(37,"eg-grid-column",17),l.Qb(),l.Kc(38,vt,21,3,"ng-template",null,18,l.Lc),l.Mb(40,"eg-fm-record-editor",19,20)),2&e){const e=l.zc(25),r=l.zc(39);l.xb(26),l.oc("ngIf",t.provider),l.xb(1),l.oc("dataSource",t.gridSource)("sortable",!0)("cellTextGenerator",t.cellTextGenerator),l.xb(2),l.oc("disabled",!(t.provider&&t.provider.holding_tag())),l.xb(7),l.oc("cellTemplate",e),l.xb(4),l.oc("fieldOptions",l.uc(11,yt,l.uc(9,St,l.uc(7,mt,r))))}},directives:[u.a,R.v,oe.a,ae.a,se.a,ne.a,V.a,R.z,R.A,R.B,le.J,le.u,le.v,le.c,le.t,le.w,be.a,he.a],encapsulation:2}),e})();var Rt=r("z6cu"),wt=r("EQDH");let xt=(()=>{class e{constructor(e,t,r,i){this.evt=e,this.auth=t,this.pcrud=r,this.providerRecord=i,this._terms=[],this.firstRun=!0,this.firstRun=!0}setSearch(e){this._terms=e.terms,this.firstRun=!1}generateSearchJoins(){const e=new Object;let t=new Array;return this._terms.forEach(e=>{t=t.concat(e.classes)}),t=t.filter((e,t,r)=>e&&"acqpro"!==e&&r.indexOf(e)===t),t.forEach(t=>{e[t]={type:"left"}}),0===Object.keys(e).length?null:e}generateSearch(e){const t=new Array;return t.push({id:{"!=":null}}),this._terms.forEach(e=>{if(""===e.value)return;let r=new Object;const i=new Array;let c=e.op;c||(c="=");let o=e.value;"ilike"===c&&(o="%"+o+"%");let d=!1;e.fields.forEach((t,a)=>{const s=e.classes[a];if("acqpro"===s&&"owner"===t&&"in"===c&&(o=o.filter(e=>this.providerRecord.getViewOUs().includes(e))),1===a){const t=e.classes[0];d=!0;let c=new Object;t?c["+"+t]=r:c=r,i.push(c)}if(s)if(d){const e=new Object;e["+"+s]=new Object,e["+"+s][t]=new Object,e["+"+s][t][c]=o,i.push(e)}else r["+"+s]=new Object,r["+"+s][t]=new Object,r["+"+s][t][c]=o;else if(d){const e=new Object;e[t]=new Object,e[t][c]=o,i.push(e)}else r[t]=new Object,r[t][c]=o}),d&&(r={"-or":i}),t.push(r)}),Object.keys(e).forEach(r=>{e[r].forEach(e=>{t.push(e)})}),t}getDataSource(){const e=new de.c;return e.sort=[{name:"name",dir:"ASC"}],e.getRows=(t,r)=>{if(this.firstRun)return this.firstRun=!1,Object(ie.b)();const i=this.generateSearchJoins(),c=this.generateSearch(e.filters),o={};return i&&(o.join=i),o.offset=t.offset,o.limit=t.limit,o.au_by_id=!0,r.length>0&&(o.order_by=[],r.forEach(e=>{o.order_by.push({class:"acqpro",field:e.name,direction:e.dir})})),this.pcrud.search("acqpro",c,o).pipe(Object(m.a)(e=>{if(this.evt.parse(e))throw Object(Rt.a)(e);return e}))},e}}return e.\u0275fac=function(t){return new(t||e)(l.cc(wt.a),l.cc(g.a),l.cc(h.a),l.cc(_))},e.\u0275prov=l.Hb({token:e,factory:e.\u0275fac}),e})();var Qt=r("OXuP"),It=r("UjDu");const Ct=["placeholder",$localize`:␟d21383a7b343e8ff3ae0c3377dbe4e94a3472ee2␟6571771365080617267:Provider Name`],Dt=["placeholder",$localize`:␟68572de01b84c678be4bf8a27b990ecac2f41ce9␟8186013988289067040:Code`],Pt=["labelText",$localize`:␟0ee5132a8da30e0b7f9f5c70dbc91928d17dd909␟3715596725146409911:Owner`];var Tt,zt,At,Ot;Tt=$localize`:␟7e892ba15f2c6c17e83510e273b3e10fc32ea016␟4580988005648117665:Search`,zt=$localize`:␟60abcfd4a91851bd7385fdd29bc7f36ad1bbc885␟9108180304755790254:Reset Form`,At=$localize`:␟7ad16b52c87def59e6220ffbbe3376f9347d0bae␟5070474390961145559:${"\ufffd#19\ufffd"}:START_TAG_SPAN:expand_less${"\ufffd/#19\ufffd"}:CLOSE_TAG_SPAN:`,Ot=$localize`:␟9aded510c3427c6100cebd489901a0fd89ed15cb␟3328410681860429964:${"\ufffd#22\ufffd"}:START_TAG_SPAN:expand_more${"\ufffd/#22\ufffd"}:CLOSE_TAG_SPAN:`;const Mt=["placeholder",$localize`:␟e0e8b3214de0ffe8bc186c42773b425e366ed646␟9044503995162566400:Contact Name`],Et=["placeholder",$localize`:␟824c942c0feb841043897fa3f299e33e4ad49a99␟2924048547030997890:Provider Email`],$t=["placeholder",$localize`:␟1bd7fc22008f53cf5dc6f86ac09888720c215e0e␟4991142413742293987:Provider Phone`],qt=["placeholder",$localize`:␟32072c7fb0469aaf82d256a59b3e0d6ecce973b9␟4327471061205783634:Currency`],Lt=["placeholder",$localize`:␟a6812ad097628d74af5a1f05c1c4b41c9c63f2f8␟148537076105086758:SAN`],Ft=["placeholder",$localize`:␟870ac4d97102b6fe6e7b06dc6eaca7c5de917440␟8464060964330896591:EDI Default`],kt=["placeholder",$localize`:␟801b98c6f02fe3b32f6afa3ee854c99ed83474e6␟2375260419993138758:URL`];var Nt,Gt,Xt,Vt;Nt=$localize`:␟969b5da63e6a30c09fef3339fc4b39480a430b3a␟2676943403720697665:Active?`,Gt=$localize`:␟4f20f2d5a6882190892e58b85f6ccbedfa737952␟2807800733729323332:Yes`,Xt=$localize`:␟3d3ae7deebc5949b0c1c78b9847886a94321d9fd␟3542042671420335679:No`,Vt=$localize`:␟16d449549ab7bc61caf3d636372a4a56b5870383␟3184700926171002527:Any`;const Ut=function(){return{standalone:!0}},jt=function(){return["VIEW_PROVIDER","MANAGE_PROVIDER","ADMIN_PROVIDER"]};let Kt=(()=>{class e{constructor(e,t,r,i,c,o,d){this.router=e,this.route=t,this.pcrud=r,this.localStore=i,this.idl=c,this.toast=o,this.auth=d,this.searchSubmitted=new l.n,this.collapsed=!1,this.providerName="",this.providerCode="",this.contactName="",this.providerEmail="",this.providerPhone="",this.providerCurrencyType="",this.providerSAN="",this.providerEDIDefault=null,this.providerURL="",this.providerIsActive="active"}ngOnInit(){this.providerOwners={primaryOrgId:this.auth.user().ws_ou(),includeDescendants:!0},this.collapsed=this.localStore.getLocalItem("eg.acq.provider.search.collapse_form")||!1}ngAfterViewInit(){}clearSearch(){this.providerName="",this.providerCode="",this.providerOwners={primaryOrgId:this.auth.user().ws_ou(),includeDescendants:!0},this.contactName="",this.providerEmail="",this.providerPhone="",this.providerCurrencyType="",this.providerSAN="",this.providerEDIDefault=null,this.providerURL="",this.providerIsActive="active"}submitSearch(){const e=[];switch(this.providerName&&e.push({classes:["acqpro"],fields:["name"],op:"ilike",value:this.providerName}),this.providerCode&&e.push({classes:["acqpro"],fields:["code"],op:"ilike",value:this.providerCode}),this.providerOwners&&e.push({classes:["acqpro"],fields:["owner"],op:"in",value:this.providerOwners.orgIds}),this.contactName&&e.push({classes:["acqpc"],fields:["name"],op:"ilike",value:this.contactName}),this.providerEmail&&e.push({classes:["acqpro","acqpc"],fields:["email","email"],op:"ilike",value:this.providerEmail}),this.providerPhone&&e.push({classes:["acqpc","acqpro","acqpro"],fields:["phone","phone","fax_phone"],op:"ilike",value:this.providerPhone}),this.providerCurrencyType&&e.push({classes:["acqpro"],fields:["currency_type"],op:"=",value:this.providerCurrencyType}),this.providerSAN&&e.push({classes:["acqpro"],fields:["san"],op:"ilike",value:this.providerSAN}),this.providerEDIDefault&&e.push({classes:["acqpro"],fields:["edi_default"],op:"=",value:this.providerEDIDefault}),this.providerURL&&e.push({classes:["acqpro"],fields:["url"],op:"ilike",value:this.providerURL}),this.providerIsActive){case"active":e.push({classes:["acqpro"],fields:["active"],op:"=",value:"t"});break;case"inactive":e.push({classes:["acqpro"],fields:["active"],op:"=",value:"f"})}setTimeout(()=>{this.searchSubmitted.emit({terms:e})})}toggleCollapse(){this.collapsed=!this.collapsed,this.localStore.setLocalItem("eg.acq.provider.search.collapse_form",this.collapsed)}}return e.\u0275fac=function(t){return new(t||e)(l.Lb(c.c),l.Lb(c.a),l.Lb(h.a),l.Lb(Qt.a),l.Lb(n.a),l.Lb(p.a),l.Lb(g.a))},e.\u0275cmp=l.Fb({type:e,selectors:[["eg-acq-provider-search-form"]],outputs:{searchSubmitted:"searchSubmitted"},decls:56,vars:36,consts:[["id","acq-provider-search-form",1,"pl-3","pr-3","pt-3","pb-3","mb-3"],[1,"row","mb-1"],[1,"col-lg"],["type","text",1,"form-control",3,"ngModelOptions","ngModel","ngModelChange",6,"placeholder"],[1,"col-lg-4"],[3,"limitPerms","ngModelOptions","ngModel","ngModelChange",6,"labelText"],[1,"col-lg-2","text-right"],["type","submit",1,"btn","btn-primary","mr-1",3,"click"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn",3,"hidden","click"],[1,"material-icons"],[1,"row","mb-1",3,"hidden"],["idlClass","acqct",3,"asyncSupportsEmptyTermClick","onChange",6,"placeholder"],["idlClass","acqedi",3,"asyncSupportsEmptyTermClick","onChange",6,"placeholder"],[1,"col-lg","form-group"],["for","acqproIsActive"],["id","acqproIsActive",1,"form-control",3,"ngModelOptions","ngModel","ngModelChange"],["value","active"],["value","inactive"],["value","any"]],template:function(e,t){1&e&&(l.Rb(0,"div",0),l.Rb(1,"form"),l.Rb(2,"div",1),l.Rb(3,"div",2),l.Rb(4,"input",3),l.Xb(5,Ct),l.fc("ngModelChange",(function(e){return t.providerName=e})),l.Qb(),l.Qb(),l.Rb(6,"div",2),l.Rb(7,"input",3),l.Xb(8,Dt),l.fc("ngModelChange",(function(e){return t.providerCode=e})),l.Qb(),l.Qb(),l.Rb(9,"div",4),l.Rb(10,"eg-org-family-select",5),l.Xb(11,Pt),l.fc("ngModelChange",(function(e){return t.providerOwners=e})),l.Qb(),l.Qb(),l.Rb(12,"div",6),l.Rb(13,"button",7),l.fc("click",(function(){return t.submitSearch()})),l.Vb(14,Tt),l.Qb(),l.Rb(15,"button",8),l.fc("click",(function(){return t.clearSearch()})),l.Vb(16,zt),l.Qb(),l.Rb(17,"button",9),l.fc("click",(function(){return t.toggleCollapse()})),l.bc(18,At),l.Mb(19,"span",10),l.Yb(),l.Qb(),l.Rb(20,"button",9),l.fc("click",(function(){return t.toggleCollapse()})),l.bc(21,Ot),l.Mb(22,"span",10),l.Yb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(23,"div",11),l.Rb(24,"div",2),l.Rb(25,"input",3),l.Xb(26,Mt),l.fc("ngModelChange",(function(e){return t.contactName=e})),l.Qb(),l.Qb(),l.Rb(27,"div",2),l.Rb(28,"input",3),l.Xb(29,Et),l.fc("ngModelChange",(function(e){return t.providerEmail=e})),l.Qb(),l.Qb(),l.Rb(30,"div",2),l.Rb(31,"input",3),l.Xb(32,$t),l.fc("ngModelChange",(function(e){return t.providerPhone=e})),l.Qb(),l.Qb(),l.Rb(33,"div",2),l.Rb(34,"eg-combobox",12),l.Xb(35,qt),l.fc("onChange",(function(e){return t.providerCurrencyType=e?e.id:null})),l.Qb(),l.Qb(),l.Qb(),l.Rb(36,"div",11),l.Rb(37,"div",2),l.Rb(38,"input",3),l.Xb(39,Lt),l.fc("ngModelChange",(function(e){return t.providerSAN=e})),l.Qb(),l.Qb(),l.Rb(40,"div",2),l.Rb(41,"eg-combobox",13),l.Xb(42,Ft),l.fc("onChange",(function(e){return t.providerEDIDefault=e?e.id:null})),l.Qb(),l.Qb(),l.Rb(43,"div",2),l.Rb(44,"input",3),l.Xb(45,kt),l.fc("ngModelChange",(function(e){return t.providerURL=e})),l.Qb(),l.Qb(),l.Rb(46,"div",14),l.Rb(47,"label",15),l.Vb(48,Nt),l.Qb(),l.Rb(49,"select",16),l.fc("ngModelChange",(function(e){return t.providerIsActive=e})),l.Rb(50,"option",17),l.Vb(51,Gt),l.Qb(),l.Rb(52,"option",18),l.Vb(53,Xt),l.Qb(),l.Rb(54,"option",19),l.Vb(55,Vt),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb()),2&e&&(l.xb(4),l.oc("ngModelOptions",l.tc(26,Ut))("ngModel",t.providerName),l.xb(3),l.oc("ngModelOptions",l.tc(27,Ut))("ngModel",t.providerCode),l.xb(3),l.oc("limitPerms",l.tc(28,jt))("ngModelOptions",l.tc(29,Ut))("ngModel",t.providerOwners),l.xb(7),l.oc("hidden",t.collapsed),l.xb(3),l.oc("hidden",!t.collapsed),l.xb(3),l.oc("hidden",t.collapsed),l.xb(2),l.oc("ngModelOptions",l.tc(30,Ut))("ngModel",t.contactName),l.xb(3),l.oc("ngModelOptions",l.tc(31,Ut))("ngModel",t.providerEmail),l.xb(3),l.oc("ngModelOptions",l.tc(32,Ut))("ngModel",t.providerPhone),l.xb(3),l.oc("asyncSupportsEmptyTermClick",!0)("asyncSupportsEmptyTermClick",!0),l.xb(2),l.oc("hidden",t.collapsed),l.xb(2),l.oc("ngModelOptions",l.tc(33,Ut))("ngModel",t.providerSAN),l.xb(3),l.oc("asyncSupportsEmptyTermClick",!0),l.xb(3),l.oc("ngModelOptions",l.tc(34,Ut))("ngModel",t.providerURL),l.xb(5),l.oc("ngModelOptions",l.tc(35,Ut))("ngModel",t.providerIsActive))},directives:[le.J,le.u,le.v,le.c,le.t,le.w,It.a,be.a,le.F,le.y,le.I],styles:["#acq-provider-search-form[_ngcontent-%COMP%]{border-radius:0 0 7px 7px;background-color:#f7f7f7;box-shadow:1px 2px 3px -1px rgba(0,0,0,.2)}"]}),e})();const Ht=["acqSearchProviderGrid"],Bt=["providerSearchForm"],Wt=["label",$localize`:␟99d3940bf535a5118237af3a32236c69fec5a2c0␟324924317500263259:Retrieve Provider`];function Zt(e,t){if(1&e&&(l.Rb(0,"li"),l.Mc(1),l.Qb()),2&e){const e=t.$implicit;l.xb(1),l.Nc(e.name())}}function Jt(e,t){if(1&e&&(l.Rb(0,"ul"),l.Kc(1,Zt,2,1,"li",9),l.Qb()),2&e){const e=t.row;l.xb(1),l.oc("ngForOf",e.contacts())}}let Yt=(()=>{class e{constructor(e,t,r,i,c,o){this.elementRef=e,this.router=t,this.route=r,this.net=i,this.auth=c,this.providerSearch=o,this.desireSummarize=new l.n,this.summarizeSearchFormOpen=new l.n}ngOnInit(){this.gridSource=this.providerSearch.getDataSource(),this.cellTextGenerator={provider:e=>e.provider().code(),name:e=>e.name()},this.previewRow=(e,t=!0)=>{t?this.desireSummarize.emit(e.id()):this.summarizeSearchFormOpen.emit(e.id())}}ngAfterViewInit(){null!==this.elementRef.nativeElement.offsetParent&&setTimeout(e=>this.providerSearchForm.submitSearch())}retrieveRow(e){this.desireSummarize.emit(e[0].id())}resetSearch(){this.providerSearchForm.clearSearch(),setTimeout(e=>this.providerSearchForm.submitSearch())}doSearch(e){setTimeout(()=>{this.providerSearch.setSearch(e),this.providerResultsGrid.reload()})}}return e.\u0275fac=function(t){return new(t||e)(l.Lb(l.l),l.Lb(c.c),l.Lb(c.a),l.Lb(X.b),l.Lb(g.a),l.Lb(xt))},e.\u0275cmp=l.Fb({type:e,selectors:[["eg-provider-results"]],viewQuery:function(e,t){var r;1&e&&(l.Ic(Ht,!0),l.Ic(Bt,!0)),2&e&&(l.yc(r=l.gc())&&(t.providerResultsGrid=r.first),l.yc(r=l.gc())&&(t.providerSearchForm=r.first))},outputs:{previewRow:"previewRow",desireSummarize:"desireSummarize",summarizeSearchFormOpen:"summarizeSearchFormOpen"},features:[l.wb([xt])],decls:11,vars:15,consts:[[3,"searchSubmitted"],["providerSearchForm",""],["contactTmpl",""],["persistKey","acq.provider.search.results","idlClass","acqpro",3,"dataSource","stickyHeader","filterable","sortable","disableMultiSelect","cellTextGenerator","onRowClick","onRowActivate"],["acqSearchProviderGrid",""],[3,"onClick",6,"label"],["path","currency_type",3,"asyncSupportsEmptyTermClick","hidden"],["path","default_claim_policy",3,"asyncSupportsEmptyTermClick","hidden"],["path","contacts",3,"cellTemplate","filterable","sortable","hidden","disableTooltip"],[4,"ngFor","ngForOf"]],template:function(e,t){if(1&e&&(l.Rb(0,"eg-acq-provider-search-form",0,1),l.fc("searchSubmitted",(function(e){return t.doSearch(e)})),l.Qb(),l.Kc(2,Jt,2,1,"ng-template",null,2,l.Lc),l.Rb(4,"eg-grid",3,4),l.fc("onRowClick",(function(e){return t.previewRow(e,!1)}))("onRowActivate",(function(e){return t.previewRow(e)})),l.Rb(6,"eg-grid-toolbar-action",5),l.Xb(7,Wt),l.fc("onClick",(function(e){return t.retrieveRow(e)})),l.Qb(),l.Mb(8,"eg-grid-column",6),l.Mb(9,"eg-grid-column",7),l.Mb(10,"eg-grid-column",8),l.Qb()),2&e){const e=l.zc(3);l.xb(4),l.oc("dataSource",t.gridSource)("stickyHeader",!0)("filterable",!0)("sortable",!0)("disableMultiSelect",!0)("cellTextGenerator",t.cellTextGenerator),l.xb(4),l.oc("asyncSupportsEmptyTermClick",!0)("hidden",!0),l.xb(1),l.oc("asyncSupportsEmptyTermClick",!0)("hidden",!0),l.xb(1),l.oc("cellTemplate",e)("filterable",!1)("sortable",!1)("hidden",!0)("disableTooltip",!0)}},directives:[Kt,oe.a,se.a,ne.a,R.u],encapsulation:2}),e})();var er=r("ufrD"),tr=r("1kSV");const rr=["editDialog"],ir=["acqProviderAddressesGrid"],cr=["successString"],or=["createString"],dr=["createErrString"],ar=["updateFailedString"],sr=["deleteFailedString"],nr=["deleteSuccessString"],lr=["text",$localize`:␟bc7fa9bee418135fe9746bd65306fed2302d8a75␟8291024729722838561:New Provider Address Added`],br=["text",$localize`:␟fce0792e792778bf2b44836f7423953a5dd5d64a␟1533575622645161986:Failed to Create New Provider Address`],hr=["text",$localize`:␟fb2cb2dee364d77aed8fb2c58ccc01d3582c3a95␟2818673118211197560:Provider Address Update Succeeded`],ur=["text",$localize`:␟3bce28a4fe688fc30311d9ab29f4cb3953b03159␟1058078784956968019:Provider Address Update Failed`],pr=["text",$localize`:␟4af5d5299c7f9e5538e6111dfe4f7949637304b7␟8610209280139714123:Delete of Provider Address failed or was not allowed`],fr=["text",$localize`:␟615aa6ab4c7536d288e1a8c5d40a2334f80f7258␟2244735674492639567:Delete of Provider Address succeeded`],gr=["label",$localize`:␟b3f80b483dae492c260fd437921d2b67b52fd28e␟804224782344272814:New Provider Address`],vr=["label",$localize`:␟c525cbf6c3ff841184f81b04f0303bce644b1c51␟2886653045266158715:Edit Selected`],mr=["label",$localize`:␟96e678d5f4bfe1a041ecfcd34804efa5e100d5e8␟5167284364083276913:Delete Selected`];let Sr=(()=>{class e{constructor(e,t,r,i,c,o,d,a,s){this.router=e,this.route=t,this.net=r,this.evt=i,this.pcrud=c,this.idl=o,this.auth=d,this.providerRecord=a,this.toast=s,this.addresses=[],this.dialogSize="lg"}ngOnInit(){this.gridSource=this.getDataSource(),this.cellTextGenerator={},this.deleteSelected=e=>{e.forEach(e=>e.isdeleted(!0)),this.providerRecord.batchUpdate(e).subscribe(e=>{console.debug("deleted: "+e),this.deleteSuccessString.current().then(e=>this.toast.success(e))},e=>{this.deleteFailedString.current().then(e=>this.toast.danger(e))},()=>{this.providerRecord.refreshCurrent().then(()=>this.providerAddressesGrid.reload())})},this.providerAddressesGrid.onRowActivate.subscribe(e=>this.showEditDialog(e)),this.subscription=this.providerRecord.providerUpdated$.subscribe(e=>{this.providerAddressesGrid.reload()})}ngAfterViewInit(){console.log("this.providerRecord",this.providerRecord)}ngOnDestroy(){this.subscription.unsubscribe()}generateSearch(e){const t=new Array;return Object.keys(e).forEach(r=>{e[r].forEach(e=>{t.push(e)})}),t}getDataSource(){const e=new de.c;return e.getRows=(t,r)=>{if(this.provider=this.providerRecord.current(),!this.provider)return Object(ie.b)();let i=this.provider.addresses();const c=this.generateSearch(e.filters);if(c.length){c.unshift({id:i.map(e=>e.id())});const e={};return e.offset=t.offset,e.limit=t.limit,e.au_by_id=!0,r.length>0&&(e.order_by=[],r.forEach(t=>{e.order_by.push({class:"acqpa",field:t.name,direction:t.dir})})),this.pcrud.search("acqpa",c,e).pipe(Object(m.a)(e=>{if(this.evt.parse(e))throw Object(Rt.a)(e);return e}))}return r.length>0&&(i=i.sort((e,t)=>{for(let i=0;i<r.length;i++){let c=-1;const o=r[i].name;if("d"===r[i].dir.substring(0,1).toLowerCase()&&(c*=-1),e[o]()<t[o]())return c;if(e[o]()>t[o]())return-1*c}return 0})),Object(ce.a)(i.slice(t.offset,t.offset+t.limit))},e}showEditDialog(e){return this.editDialog.mode="update",this.editDialog.recordId=e.id(),new Promise((e,t)=>{this.editDialog.open({size:this.dialogSize}).subscribe(t=>{this.successString.current().then(e=>this.toast.success(e)),this.providerRecord.refreshCurrent().then(()=>this.providerAddressesGrid.reload()),e(t)},e=>{this.updateFailedString.current().then(e=>this.toast.danger(e)),t(e)})})}editSelected(e){const t=r=>{r&&this.showEditDialog(r).then(()=>t(e.shift()))};t(e.shift())}createNew(){this.editDialog.mode="create";const e=this.idl.create("acqpa");e.provider(this.provider.id()),e.valid(!0),this.editDialog.record=e,this.editDialog.recordId=null,this.editDialog.open({size:this.dialogSize}).subscribe(e=>{this.createString.current().then(e=>this.toast.success(e)),this.providerRecord.refreshCurrent().then(()=>this.providerAddressesGrid.reload())},e=>{e.dismissed||this.createErrString.current().then(e=>this.toast.danger(e))})}}return e.\u0275fac=function(t){return new(t||e)(l.Lb(c.c),l.Lb(c.a),l.Lb(X.b),l.Lb(wt.a),l.Lb(h.a),l.Lb(n.a),l.Lb(g.a),l.Lb(_),l.Lb(p.a))},e.\u0275cmp=l.Fb({type:e,selectors:[["eg-provider-addresses"]],viewQuery:function(e,t){var r;1&e&&(l.Ic(rr,!0),l.Ic(ir,!0),l.Ic(cr,!0),l.Sc(or,!0),l.Sc(dr,!0),l.Sc(ar,!0),l.Ic(sr,!0),l.Ic(nr,!0)),2&e&&(l.yc(r=l.gc())&&(t.editDialog=r.first),l.yc(r=l.gc())&&(t.providerAddressesGrid=r.first),l.yc(r=l.gc())&&(t.successString=r.first),l.yc(r=l.gc())&&(t.createString=r.first),l.yc(r=l.gc())&&(t.createErrString=r.first),l.yc(r=l.gc())&&(t.updateFailedString=r.first),l.yc(r=l.gc())&&(t.deleteFailedString=r.first),l.yc(r=l.gc())&&(t.deleteSuccessString=r.first))},inputs:{dialogSize:"dialogSize"},decls:38,vars:4,consts:[[6,"text"],["createString",""],["createErrString",""],["successString",""],["updateFailedString",""],["deleteFailedString",""],["deleteSuccessString",""],["persistKey","acq.provider.addresses","idlClass","acqpa","hideFields","provider,id",3,"dataSource","sortable","filterable","cellTextGenerator"],["acqProviderAddressesGrid",""],[3,"onClick",6,"label"],["name","address_type"],["name","street1"],["name","street2"],["name","city"],["name","county"],["name","state"],["name","country"],["name","post_code"],["name","fax_phone"],["name","valid"],["idlClass","acqpa","readonlyFields","id,provider","fieldOrder","id,valid,address_type,provider,street1,street2,city,county,state,country,post_code,fax_phone"],["editDialog",""]],template:function(e,t){1&e&&(l.Rb(0,"eg-string",0,1),l.Xb(2,lr),l.Qb(),l.Rb(3,"eg-string",0,2),l.Xb(5,br),l.Qb(),l.Rb(6,"eg-string",0,3),l.Xb(8,hr),l.Qb(),l.Rb(9,"eg-string",0,4),l.Xb(11,ur),l.Qb(),l.Rb(12,"eg-string",0,5),l.Xb(14,pr),l.Qb(),l.Rb(15,"eg-string",0,6),l.Xb(17,fr),l.Qb(),l.Rb(18,"eg-grid",7,8),l.Rb(20,"eg-grid-toolbar-button",9),l.Xb(21,gr),l.fc("onClick",(function(){return t.createNew()})),l.Qb(),l.Rb(22,"eg-grid-toolbar-action",9),l.Xb(23,vr),l.fc("onClick",(function(e){return t.editSelected(e)})),l.Qb(),l.Rb(24,"eg-grid-toolbar-action",9),l.Xb(25,mr),l.fc("onClick",(function(e){return t.deleteSelected(e)})),l.Qb(),l.Mb(26,"eg-grid-column",10),l.Mb(27,"eg-grid-column",11),l.Mb(28,"eg-grid-column",12),l.Mb(29,"eg-grid-column",13),l.Mb(30,"eg-grid-column",14),l.Mb(31,"eg-grid-column",15),l.Mb(32,"eg-grid-column",16),l.Mb(33,"eg-grid-column",17),l.Mb(34,"eg-grid-column",18),l.Mb(35,"eg-grid-column",19),l.Qb(),l.Mb(36,"eg-fm-record-editor",20,21)),2&e&&(l.xb(18),l.oc("dataSource",t.gridSource)("sortable",!0)("filterable",!0)("cellTextGenerator",t.cellTextGenerator))},directives:[u.a,oe.a,ae.a,se.a,ne.a,V.a],encapsulation:2}),e})();const yr=["editDialog"],_r=["acqProviderContactAddressesGrid"],Rr=["successString"],wr=["createString"],xr=["createErrString"],Qr=["updateFailedString"],Ir=["deleteFailedString"],Cr=["deleteSuccessString"],Dr=["text",$localize`:␟28965c0387768008affb666378d996a272a9e1c1␟5723116413827501824:New Contact Address Added`],Pr=["text",$localize`:␟890b77124cf00322dd8ec0be0b0e6d1252c43dca␟5848414140258554519:Failed to Create New Contact Address`],Tr=["text",$localize`:␟537b2c9c7760606c76933681eeb3ceb07df953cf␟3351115896495022558:Contact Address Update Succeeded`],zr=["text",$localize`:␟360ec6b703efcc4b4a6dbd6000c064f916358f0b␟5682837786888147127:Contact Address Update Failed`],Ar=["text",$localize`:␟65af82c8a320f6cb0406a75492c7cb8a49084ca7␟600178640932842744:Delete of Contact Address failed or was not allowed`],Or=["text",$localize`:␟d531be3afbe4d56a0f14e85d1dfead1caf56a1ef␟3123692050721328292:Delete of Contact Address succeeded`],Mr=["label",$localize`:␟3b1067510f13b328e8ffd872d6c31b59d2acc949␟6429826638852698855:New Contact Address`],Er=["label",$localize`:␟c525cbf6c3ff841184f81b04f0303bce644b1c51␟2886653045266158715:Edit Selected`],$r=["label",$localize`:␟96e678d5f4bfe1a041ecfcd34804efa5e100d5e8␟5167284364083276913:Delete Selected`];let qr=(()=>{class e{constructor(e,t,r,i,c,o,d,a,s){this.router=e,this.route=t,this.net=r,this.evt=i,this.idl=c,this.auth=o,this.providerRecord=d,this.toast=a,this.pcrud=s,this.addresses=[],this.dialogSize="lg"}ngOnInit(){this.gridSource=this.getDataSource(),this.cellTextGenerator={},this.reloadGrid=()=>this.providerContactAddressesGrid.reload(),this.deleteSelected=e=>{e.forEach(e=>e.isdeleted(!0)),this.pcrud.autoApply(e).subscribe(e=>{console.debug("deleted: "+e),this.deleteSuccessString.current().then(e=>this.toast.success(e))},e=>{this.deleteFailedString.current().then(e=>this.toast.danger(e))},()=>{this.providerRecord.refreshCurrent().then(()=>this.providerContactAddressesGrid.reload())})},this.providerContactAddressesGrid.onRowActivate.subscribe(e=>this.showEditDialog(e))}ngAfterViewInit(){console.log("this.contactId",this.contactId)}generateSearch(e){const t=new Array;return Object.keys(e).forEach(r=>{e[r].forEach(e=>{t.push(e)})}),t}getDataSource(){const e=new de.c;return e.getRows=(t,r)=>{if(!this.contactId)return Object(ie.b)();const i=this.contactId;let c=this.providerRecord.current().contacts().filter(e=>e.id()===i)[0].addresses();const o=this.generateSearch(e.filters);if(o.length){o.unshift({id:c.map(e=>e.id())});const e={};return e.offset=t.offset,e.limit=t.limit,e.au_by_id=!0,r.length>0&&(e.order_by=[],r.forEach(t=>{e.order_by.push({class:"acqpca",field:t.name,direction:t.dir})})),this.pcrud.search("acqpca",o,e).pipe(Object(m.a)(e=>{if(this.evt.parse(e))throw Object(Rt.a)(e);return e}))}return r.length>0&&(c=c.sort((e,t)=>{for(let i=0;i<r.length;i++){let c=-1;const o=r[i].name;if("d"===r[i].dir.substring(0,1).toLowerCase()&&(c*=-1),e[o]()<t[o]())return c;if(e[o]()>t[o]())return-1*c}return 0})),Object(ce.a)(c.slice(t.offset,t.offset+t.limit))},e}showEditDialog(e){return this.editDialog.mode="update",this.editDialog.recordId=e.id(),new Promise((e,t)=>{this.editDialog.open({size:this.dialogSize}).subscribe(t=>{this.successString.current().then(e=>this.toast.success(e)),this.providerRecord.refreshCurrent().then(()=>this.providerContactAddressesGrid.reload()),e(t)},e=>{this.updateFailedString.current().then(e=>this.toast.danger(e)),t(e)})})}editSelected(e){const t=r=>{r&&this.showEditDialog(r).then(()=>t(e.shift()))};t(e.shift())}createNew(){this.editDialog.mode="create";const e=this.idl.create("acqpca");e.contact(this.contactId),e.valid(!0),this.editDialog.record=e,this.editDialog.recordId=null,this.editDialog.open({size:this.dialogSize}).subscribe(e=>{this.createString.current().then(e=>this.toast.success(e)),this.providerRecord.refreshCurrent().then(()=>this.providerContactAddressesGrid.reload())},e=>{e.dismissed||this.createErrString.current().then(e=>this.toast.danger(e))})}}return e.\u0275fac=function(t){return new(t||e)(l.Lb(c.c),l.Lb(c.a),l.Lb(X.b),l.Lb(wt.a),l.Lb(n.a),l.Lb(g.a),l.Lb(_),l.Lb(p.a),l.Lb(h.a))},e.\u0275cmp=l.Fb({type:e,selectors:[["eg-provider-contact-addresses"]],viewQuery:function(e,t){var r;1&e&&(l.Ic(yr,!0),l.Ic(_r,!0),l.Ic(Rr,!0),l.Sc(wr,!0),l.Sc(xr,!0),l.Sc(Qr,!0),l.Ic(Ir,!0),l.Ic(Cr,!0)),2&e&&(l.yc(r=l.gc())&&(t.editDialog=r.first),l.yc(r=l.gc())&&(t.providerContactAddressesGrid=r.first),l.yc(r=l.gc())&&(t.successString=r.first),l.yc(r=l.gc())&&(t.createString=r.first),l.yc(r=l.gc())&&(t.createErrString=r.first),l.yc(r=l.gc())&&(t.updateFailedString=r.first),l.yc(r=l.gc())&&(t.deleteFailedString=r.first),l.yc(r=l.gc())&&(t.deleteSuccessString=r.first))},inputs:{dialogSize:"dialogSize",contactId:"contactId"},decls:38,vars:4,consts:[[6,"text"],["createString",""],["createErrString",""],["successString",""],["updateFailedString",""],["deleteFailedString",""],["deleteSuccessString",""],["persistKey","acq.provider.contact.addresses","idlClass","acqpca","hideFields","contact,id",3,"dataSource","sortable","filterable","cellTextGenerator"],["acqProviderContactAddressesGrid",""],[3,"onClick",6,"label"],["name","address_type"],["name","street1"],["name","street2"],["name","city"],["name","county"],["name","state"],["name","country"],["name","post_code"],["name","fax_phone"],["name","valid"],["idlClass","acqpca","readonlyFields","id,contact","fieldOrder","id,valid,address_type,contact,street1,street2,city,county,state,country,post_code,fax_phone"],["editDialog",""]],template:function(e,t){1&e&&(l.Rb(0,"eg-string",0,1),l.Xb(2,Dr),l.Qb(),l.Rb(3,"eg-string",0,2),l.Xb(5,Pr),l.Qb(),l.Rb(6,"eg-string",0,3),l.Xb(8,Tr),l.Qb(),l.Rb(9,"eg-string",0,4),l.Xb(11,zr),l.Qb(),l.Rb(12,"eg-string",0,5),l.Xb(14,Ar),l.Qb(),l.Rb(15,"eg-string",0,6),l.Xb(17,Or),l.Qb(),l.Rb(18,"eg-grid",7,8),l.Rb(20,"eg-grid-toolbar-button",9),l.Xb(21,Mr),l.fc("onClick",(function(){return t.createNew()})),l.Qb(),l.Rb(22,"eg-grid-toolbar-action",9),l.Xb(23,Er),l.fc("onClick",(function(e){return t.editSelected(e)})),l.Qb(),l.Rb(24,"eg-grid-toolbar-action",9),l.Xb(25,$r),l.fc("onClick",(function(e){return t.deleteSelected(e)})),l.Qb(),l.Mb(26,"eg-grid-column",10),l.Mb(27,"eg-grid-column",11),l.Mb(28,"eg-grid-column",12),l.Mb(29,"eg-grid-column",13),l.Mb(30,"eg-grid-column",14),l.Mb(31,"eg-grid-column",15),l.Mb(32,"eg-grid-column",16),l.Mb(33,"eg-grid-column",17),l.Mb(34,"eg-grid-column",18),l.Mb(35,"eg-grid-column",19),l.Qb(),l.Mb(36,"eg-fm-record-editor",20,21)),2&e&&(l.xb(18),l.oc("dataSource",t.gridSource)("sortable",!0)("filterable",!0)("cellTextGenerator",t.cellTextGenerator))},directives:[u.a,oe.a,ae.a,se.a,ne.a,V.a],encapsulation:2}),e})();const Lr=["editDialog"],Fr=["providerContactAddresses"],kr=["acqProviderContactsGrid"],Nr=["confirmSetAsPrimary"],Gr=["confirmUnsetAsPrimary"],Xr=["successString"],Vr=["createString"],Ur=["createErrString"],jr=["updateFailedString"],Kr=["deleteFailedString"],Hr=["deleteSuccessString"],Br=["setAsPrimarySuccessString"],Wr=["setAsPrimaryFailedString"],Zr=["unsetAsPrimarySuccessString"],Jr=["unsetAsPrimaryFailedString"],Yr=["text",$localize`:␟978c24e9688fcdbdadb6158d214d4db75ef478a7␟8992737775919791090:New Provider Contact Added`],ei=["text",$localize`:␟b68ff6540afcab1197c2bf14395e0a006ca6f7e6␟4628471988487508314:Failed to Create New Provider Contact`],ti=["text",$localize`:␟185967aba0a7cb469ce9392c5b38b6297759e48d␟6463900853430103592:Provider Contact Update Succeeded`],ri=["text",$localize`:␟fdb5e5d9e4f7b6aead3481fc72e9330c877a15b2␟780397497227117104:Provider Contact Update Failed`],ii=["text",$localize`:␟33857b75c1ef6baa5f031a666e117ddc99f64b2d␟1475836254291182335:Delete of Provider Contact failed or was not allowed`],ci=["text",$localize`:␟054fa3d215ff292e6692252b07724ca93080772c␟5032135421313512169:Delete of Provider Contact succeeded`],oi=["text",$localize`:␟cfc32ed4507c9ea03f59159666118fda15f4655d␟3947653941155528177:Successfully set primary contact`],di=["text",$localize`:␟56f1e3699ad371feb77b74e80222a3a97887e68a␟4036925192909801760:Failed to set primary contact`],ai=["text",$localize`:␟39a95242e79e1eef8672252858ecb15d7d5bf61b␟5605958453593595176:Successfully removed primary contact`],si=["text",$localize`:␟b11bc5bd59c35c3d5f30a998e326854852d1757d␟4160738569051975474:Failed to remove primary contact`],ni=["dialogTitle",$localize`:␟dee382543d4551c91c1f42683ec30412f04098d9␟8190009857171206252:Confirm Setting Primary Contact`,"dialogBody",$localize`:␟fd69d3a9ca269bf16f505cbe386e1c0aad86237e␟3401309853200679699:Set ${"\ufffd0\ufffd"}:INTERPOLATION: as the primary contact for ${"\ufffd1\ufffd"}:INTERPOLATION_1:?`],li=["dialogTitle",$localize`:␟28e1d37ecdf506d5b57d29f02f5a64b130c8f3b8␟3225276749975239125:Confirm Unsetting Primary Contact`,"dialogBody",$localize`:␟d1794fc900c30b777fe59a77d639d5f3b7e980ea␟1113099594647277630:Unset ${"\ufffd0\ufffd"}:INTERPOLATION: as the primary contact for ${"\ufffd1\ufffd"}:INTERPOLATION_1:?`],bi=["label",$localize`:␟e35f6fc871fb082455f4465c6f1bee06f25026aa␟5988543797728971924:New Provider Contact`],hi=["label",$localize`:␟c525cbf6c3ff841184f81b04f0303bce644b1c51␟2886653045266158715:Edit Selected`],ui=["label",$localize`:␟96e678d5f4bfe1a041ecfcd34804efa5e100d5e8␟5167284364083276913:Delete Selected`],pi=["label",$localize`:␟93be34f86fb37fe0f84fa9ef6b4fd08879ae1e76␟5206159355827387014:Set as Primary Contact`],fi=["label",$localize`:␟2c7c5f52595c18fffee0386ab2f23d452567b119␟7547914265413456634:Unset as Primary Contact`],gi=["label",$localize`:␟c20e14976af37c62cfef3179e3a429c6328e5b8f␟6023660725853395916:Is Primary?`];function vi(e,t){if(1&e&&(l.Rb(0,"a",26),l.Mc(1),l.Qb()),2&e){const e=t.row;l.qc("href","mailto:",e.email(),"",l.Ec),l.xb(1),l.Nc(e.email())}}function mi(e,t){if(1&e&&(l.Rb(0,"a",26),l.Mc(1),l.Qb()),2&e){const e=t.row;l.qc("href","tel:",e.phone(),"",l.Ec),l.xb(1),l.Nc(e.phone())}}var Si;function yi(e,t){if(1&e&&(l.Pb(0),l.Mb(1,"hr"),l.Rb(2,"h3"),l.Vb(3,Si),l.Qb(),l.Mb(4,"eg-provider-contact-addresses",27,28),l.Ob()),2&e){const e=l.hc();l.xb(3),l.Zb(e.selectedContact.name()),l.Wb(3),l.xb(1),l.oc("contactId",e.selectedContact.id())}}Si=$localize`:␟4a54774f4b0fa87871a70ba94b9520f3e6b8f565␟2470695936901461576:Addresses for: ${"\ufffd0\ufffd"}:INTERPOLATION:`;let _i=(()=>{class e{constructor(e,t,r,i,c,o,d,a,s,n){this.router=e,this.route=t,this.changeDetector=r,this.net=i,this.pcrud=c,this.evt=o,this.auth=d,this.idl=a,this.providerRecord=s,this.toast=n,this.contacts=[],this.desireSummarize=new l.n,this.dialogSize="lg"}ngOnInit(){this.gridSource=this.getDataSource(),this.cellTextGenerator={email:e=>e.email(),phone:e=>e.phone()},this.cannotSetPrimaryContact=e=>1!==e.length||1===e.length&&e[0]._is_primary,this.cannotUnsetPrimaryContact=e=>1!==e.length||1===e.length&&!e[0]._is_primary,this.deleteSelected=e=>{e.forEach(e=>e.isdeleted(!0)),this.providerRecord.batchUpdate(e).subscribe(e=>{console.debug("deleted: "+e),this.deleteSuccessString.current().then(e=>this.toast.success(e)),this.desireSummarize.emit(this.provider.id())},e=>{this.deleteFailedString.current().then(e=>this.toast.danger(e))},()=>{this.providerRecord.refreshCurrent().then(()=>this.providerContactsGrid.reload())})},this.providerContactsGrid.onRowActivate.subscribe(e=>this.showEditDialog(e)),this.subscription=this.providerRecord.providerUpdated$.subscribe(e=>{this.providerContactsGrid.reload()})}ngAfterViewInit(){console.log("this.providerRecord",this.providerRecord),console.log("this.providerContactAddresses",this.providerContactAddresses),this.providerContactsGrid.onRowClick.subscribe(e=>{this.selectedContact=e,console.debug("selected contact",this.selectedContact),this.changeDetector.detectChanges(),this.providerContactAddresses.reloadGrid()})}ngOnDestroy(){this.subscription.unsubscribe()}generateSearch(e){const t=new Array;return Object.keys(e).forEach(r=>{e[r].forEach(e=>{t.push(e)})}),t}getDataSource(){const e=new de.c;return e.getRows=(t,r)=>{if(this.provider=this.providerRecord.current(),!this.provider)return Object(ie.b)();let i=this.provider.contacts();const c=this.generateSearch(e.filters);if(c.length){c.unshift({id:i.map(e=>e.id())});const e={};return e.offset=t.offset,e.limit=t.limit,e.au_by_id=!0,r.length>0&&(e.order_by=[],r.forEach(t=>{e.order_by.push({class:"acqpc",field:t.name,direction:t.dir})})),this.pcrud.search("acqpc",c,e).pipe(Object(m.a)(e=>{if(this.evt.parse(e))throw Object(Rt.a)(e);return e}))}return r.length>0&&(i=i.sort((e,t)=>{for(let i=0;i<r.length;i++){let c=-1;const o=r[i].name;if("d"===r[i].dir.substring(0,1).toLowerCase()&&(c*=-1),e[o]()<t[o]())return c;if(e[o]()>t[o]())return-1*c}return 0})),Object(ce.a)(i.slice(t.offset,t.offset+t.limit))},e}showEditDialog(e){return this.editDialog.mode="update",this.editDialog.recordId=e.id(),new Promise((e,t)=>{this.editDialog.open({size:this.dialogSize}).subscribe(t=>{this.successString.current().then(e=>this.toast.success(e)),this.providerRecord.refreshCurrent().then(()=>this.providerContactsGrid.reload()),this.desireSummarize.emit(this.provider.id()),e(t)},e=>{this.updateFailedString.current().then(e=>this.toast.danger(e)),t(e)})})}editSelected(e){const t=r=>{r&&this.showEditDialog(r).then(()=>t(e.shift()))};t(e.shift())}createNew(){this.editDialog.mode="create";const e=this.idl.create("acqpc");e.provider(this.provider.id()),this.editDialog.record=e,this.editDialog.recordId=null,this.editDialog.open({size:this.dialogSize}).subscribe(e=>{this.createString.current().then(e=>this.toast.success(e)),this.providerRecord.refreshCurrent().then(()=>this.providerContactsGrid.reload()),this.desireSummarize.emit(this.provider.id())},e=>{e.dismissed||this.createErrString.current().then(e=>this.toast.danger(e))})}setAsPrimary(e){this.selectedContact=e[0],this.confirmSetAsPrimary.open().subscribe(t=>{t&&this.providerRecord.refreshCurrent().then(()=>{this.provider.primary_contact(e[0].id()),this.provider.ischanged(!0),this.providerRecord.batchUpdate(this.provider).subscribe(e=>{this.setAsPrimarySuccessString.current().then(e=>this.toast.success(e))},e=>{this.setAsPrimaryFailedString.current().then(e=>this.toast.danger(e))},()=>{this.providerRecord.refreshCurrent().then(()=>{this.providerContactsGrid.reload(),this.desireSummarize.emit(this.provider.id())})})})})}unsetAsPrimary(e){this.selectedContact=e[0],this.confirmUnsetAsPrimary.open().subscribe(e=>{e&&this.providerRecord.refreshCurrent().then(()=>{this.provider.primary_contact(null),this.provider.ischanged(!0),this.providerRecord.batchUpdate(this.provider).subscribe(e=>{this.unsetAsPrimarySuccessString.current().then(e=>this.toast.success(e))},e=>{this.unsetAsPrimaryFailedString.current().then(e=>this.toast.danger(e))},()=>{this.providerRecord.refreshCurrent().then(()=>{this.providerContactsGrid.reload(),this.desireSummarize.emit(this.provider.id())})})})})}}return e.\u0275fac=function(t){return new(t||e)(l.Lb(c.c),l.Lb(c.a),l.Lb(l.h),l.Lb(X.b),l.Lb(h.a),l.Lb(wt.a),l.Lb(g.a),l.Lb(n.a),l.Lb(_),l.Lb(p.a))},e.\u0275cmp=l.Fb({type:e,selectors:[["eg-provider-contacts"]],viewQuery:function(e,t){var r;1&e&&(l.Ic(Lr,!0),l.Sc(Fr,!0),l.Ic(kr,!0),l.Ic(Nr,!0),l.Ic(Gr,!0),l.Ic(Xr,!0),l.Sc(Vr,!0),l.Sc(Ur,!0),l.Sc(jr,!0),l.Ic(Kr,!0),l.Ic(Hr,!0),l.Ic(Br,!0),l.Ic(Wr,!0),l.Ic(Zr,!0),l.Ic(Jr,!0)),2&e&&(l.yc(r=l.gc())&&(t.editDialog=r.first),l.yc(r=l.gc())&&(t.providerContactAddresses=r.first),l.yc(r=l.gc())&&(t.providerContactsGrid=r.first),l.yc(r=l.gc())&&(t.confirmSetAsPrimary=r.first),l.yc(r=l.gc())&&(t.confirmUnsetAsPrimary=r.first),l.yc(r=l.gc())&&(t.successString=r.first),l.yc(r=l.gc())&&(t.createString=r.first),l.yc(r=l.gc())&&(t.createErrString=r.first),l.yc(r=l.gc())&&(t.updateFailedString=r.first),l.yc(r=l.gc())&&(t.deleteFailedString=r.first),l.yc(r=l.gc())&&(t.deleteSuccessString=r.first),l.yc(r=l.gc())&&(t.setAsPrimarySuccessString=r.first),l.yc(r=l.gc())&&(t.setAsPrimaryFailedString=r.first),l.yc(r=l.gc())&&(t.unsetAsPrimarySuccessString=r.first),l.yc(r=l.gc())&&(t.unsetAsPrimaryFailedString=r.first))},inputs:{providerId:"providerId",dialogSize:"dialogSize"},outputs:{desireSummarize:"desireSummarize"},decls:59,vars:18,consts:[[6,"text"],["createString",""],["createErrString",""],["successString",""],["updateFailedString",""],["deleteFailedString",""],["deleteSuccessString",""],["setAsPrimarySuccessString",""],["setAsPrimaryFailedtring",""],["unsetAsPrimarySuccessString",""],["unsetAsPrimaryFailedtring",""],["emailTmpl",""],["phoneTmpl",""],[6,"dialogTitle","dialogBody"],["confirmSetAsPrimary",""],["confirmUnsetAsPrimary",""],["persistKey","acq.provider.contacts","idlClass","acqpc","hideFields","provider",3,"dataSource","sortable","disableMultiSelect","filterable","cellTextGenerator"],["acqProviderContactsGrid",""],[3,"onClick",6,"label"],[3,"disableOnRows","onClick",6,"label"],["path","email",3,"cellTemplate","disableTooltip"],["path","phone",3,"cellTemplate","disableTooltip"],["path","_is_primary","datatype","bool",3,"filterable","sortable",6,"label"],[4,"ngIf"],["idlClass","acqpc","readonlyFields","id,provider","fieldOrder","id,provider,name,role,email,phone"],["editDialog",""],[3,"href"],[3,"contactId"],["providerContactAddresses",""]],template:function(e,t){if(1&e&&(l.Rb(0,"eg-string",0,1),l.Xb(2,Yr),l.Qb(),l.Rb(3,"eg-string",0,2),l.Xb(5,ei),l.Qb(),l.Rb(6,"eg-string",0,3),l.Xb(8,ti),l.Qb(),l.Rb(9,"eg-string",0,4),l.Xb(11,ri),l.Qb(),l.Rb(12,"eg-string",0,5),l.Xb(14,ii),l.Qb(),l.Rb(15,"eg-string",0,6),l.Xb(17,ci),l.Qb(),l.Rb(18,"eg-string",0,7),l.Xb(20,oi),l.Qb(),l.Rb(21,"eg-string",0,8),l.Xb(23,di),l.Qb(),l.Rb(24,"eg-string",0,9),l.Xb(26,ai),l.Qb(),l.Rb(27,"eg-string",0,10),l.Xb(29,si),l.Qb(),l.Kc(30,vi,2,2,"ng-template",null,11,l.Lc),l.Kc(32,mi,2,2,"ng-template",null,12,l.Lc),l.Rb(34,"eg-confirm-dialog",13,14),l.Xb(36,ni),l.Qb(),l.Rb(37,"eg-confirm-dialog",13,15),l.Xb(39,li),l.Qb(),l.Rb(40,"eg-grid",16,17),l.Rb(42,"eg-grid-toolbar-button",18),l.Xb(43,bi),l.fc("onClick",(function(){return t.createNew()})),l.Qb(),l.Rb(44,"eg-grid-toolbar-action",18),l.Xb(45,hi),l.fc("onClick",(function(e){return t.editSelected(e)})),l.Qb(),l.Rb(46,"eg-grid-toolbar-action",18),l.Xb(47,ui),l.fc("onClick",(function(e){return t.deleteSelected(e)})),l.Qb(),l.Rb(48,"eg-grid-toolbar-action",19),l.Xb(49,pi),l.fc("onClick",(function(e){return t.setAsPrimary(e)})),l.Qb(),l.Rb(50,"eg-grid-toolbar-action",19),l.Xb(51,fi),l.fc("onClick",(function(e){return t.unsetAsPrimary(e)})),l.Qb(),l.Mb(52,"eg-grid-column",20),l.Mb(53,"eg-grid-column",21),l.Rb(54,"eg-grid-column",22),l.Xb(55,gi),l.Qb(),l.Qb(),l.Kc(56,yi,6,2,"ng-container",23),l.Mb(57,"eg-fm-record-editor",24,25)),2&e){const e=l.zc(31),r=l.zc(33);l.xb(34),l.Zb(t.selectedContact?t.selectedContact.name():"")(t.provider?t.provider.name():""),l.Wb(36),l.xb(3),l.Zb(t.selectedContact?t.selectedContact.name():"")(t.provider?t.provider.name():""),l.Wb(39),l.xb(3),l.oc("dataSource",t.gridSource)("sortable",!0)("disableMultiSelect",!0)("filterable",!0)("cellTextGenerator",t.cellTextGenerator),l.xb(8),l.oc("disableOnRows",t.cannotSetPrimaryContact),l.xb(2),l.oc("disableOnRows",t.cannotUnsetPrimaryContact),l.xb(2),l.oc("cellTemplate",e)("disableTooltip",!0),l.xb(1),l.oc("cellTemplate",r)("disableTooltip",!0),l.xb(1),l.oc("filterable",!1)("sortable",!1),l.xb(2),l.oc("ngIf",t.selectedContact)}},directives:[u.a,f.a,oe.a,ae.a,se.a,ne.a,R.v,V.a,qr],encapsulation:2}),e})();const Ri=["editDialog"],wi=["acqProviderAttributesGrid"],xi=["successString"],Qi=["createString"],Ii=["createErrString"],Ci=["updateFailedString"],Di=["deleteFailedString"],Pi=["deleteSuccessString"],Ti=["text",$localize`:␟8b65dfa1ba59effe291c1a3bf2fbec3c6394436d␟4695366801547629835:New Provider Attributes Added`],zi=["text",$localize`:␟c462d8e3cf2e878c55dbbd8777197cb777b23b49␟5037032021892133306:Failed to Create New Provider Attributes`],Ai=["text",$localize`:␟7e945e313e44841a32e8a69af64f050d0dfe3d99␟6009823455555505696:Provider Attributes Update Succeeded`],Oi=["text",$localize`:␟61baf34019aac53400bd9ee05829dc7909a65f2d␟3156558658168784007:Provider Attributes Update Failed`],Mi=["text",$localize`:␟ae220f36ad0f2b8b40804b67514d7218bfcb2b19␟4944580452177953495:Delete of Provider Attributes failed or was not allowed`],Ei=["text",$localize`:␟a539322f023bf7aadba62e1dd8dc5e658d3e588e␟5152289525267729727:Delete of Provider Attributes succeeded`],$i=["label",$localize`:␟cce6c82706e7ec6fd0f179c74591082e15f4c9cb␟573186653230181915:New Attributes`],qi=["label",$localize`:␟c525cbf6c3ff841184f81b04f0303bce644b1c51␟2886653045266158715:Edit Selected`],Li=["label",$localize`:␟96e678d5f4bfe1a041ecfcd34804efa5e100d5e8␟5167284364083276913:Delete Selected`];let Fi=(()=>{class e{constructor(e,t,r,i,c,o,d){this.router=e,this.route=t,this.net=r,this.auth=i,this.idl=c,this.providerRecord=o,this.toast=d,this.attributes=[],this.dialogSize="lg"}ngOnInit(){this.gridSource=this.getDataSource(),this.cellTextGenerator={},this.deleteSelected=e=>{e.forEach(e=>e.isdeleted(!0)),this.providerRecord.batchUpdate(e).subscribe(e=>{console.debug("deleted: "+e),this.deleteSuccessString.current().then(e=>this.toast.success(e))},e=>{this.deleteFailedString.current().then(e=>this.toast.danger(e))},()=>{this.providerRecord.refreshCurrent().then(()=>this.providerAttributesGrid.reload())})},this.providerAttributesGrid.onRowActivate.subscribe(e=>this.showEditDialog(e)),this.subscription=this.providerRecord.providerUpdated$.subscribe(e=>{this.providerAttributesGrid.reload()})}ngAfterViewInit(){console.log("this.providerRecord",this.providerRecord)}ngOnDestroy(){this.subscription.unsubscribe()}getDataSource(){const e=new de.c;return e.getRows=(e,t)=>{if(this.provider=this.providerRecord.current(),!this.provider)return Object(ie.b)();let r=this.provider.attributes();return t.length>0&&(r=r.sort((e,r)=>{for(let i=0;i<t.length;i++){let c=-1;const o=t[i].name;if("d"===t[i].dir.substring(0,1).toLowerCase()&&(c*=-1),e[o]()<r[o]())return c;if(e[o]()>r[o]())return-1*c}return 0})),Object(ce.a)(r.slice(e.offset,e.offset+e.limit))},e}showEditDialog(e){return this.editDialog.mode="update",this.editDialog.recordId=e.id(),new Promise((e,t)=>{this.editDialog.open({size:this.dialogSize}).subscribe(t=>{this.successString.current().then(e=>this.toast.success(e)),this.providerRecord.refreshCurrent().then(()=>this.providerAttributesGrid.reload()),e(t)},e=>{this.updateFailedString.current().then(e=>this.toast.danger(e)),t(e)})})}editSelected(e){const t=r=>{r&&this.showEditDialog(r).then(()=>t(e.shift()))};t(e.shift())}createNew(){this.editDialog.mode="create";const e=this.idl.create("acqlipad");e.provider(this.provider.id()),this.editDialog.record=e,this.editDialog.recordId=null,this.editDialog.open({size:this.dialogSize}).subscribe(e=>{this.createString.current().then(e=>this.toast.success(e)),this.providerRecord.refreshCurrent().then(()=>this.providerAttributesGrid.reload())},e=>{e.dismissed||this.createErrString.current().then(e=>this.toast.danger(e))})}}return e.\u0275fac=function(t){return new(t||e)(l.Lb(c.c),l.Lb(c.a),l.Lb(X.b),l.Lb(g.a),l.Lb(n.a),l.Lb(_),l.Lb(p.a))},e.\u0275cmp=l.Fb({type:e,selectors:[["eg-provider-attributes"]],viewQuery:function(e,t){var r;1&e&&(l.Ic(Ri,!0),l.Ic(wi,!0),l.Ic(xi,!0),l.Sc(Qi,!0),l.Sc(Ii,!0),l.Sc(Ci,!0),l.Ic(Di,!0),l.Ic(Pi,!0)),2&e&&(l.yc(r=l.gc())&&(t.editDialog=r.first),l.yc(r=l.gc())&&(t.providerAttributesGrid=r.first),l.yc(r=l.gc())&&(t.successString=r.first),l.yc(r=l.gc())&&(t.createString=r.first),l.yc(r=l.gc())&&(t.createErrString=r.first),l.yc(r=l.gc())&&(t.updateFailedString=r.first),l.yc(r=l.gc())&&(t.deleteFailedString=r.first),l.yc(r=l.gc())&&(t.deleteSuccessString=r.first))},inputs:{providerId:"providerId",dialogSize:"dialogSize"},decls:28,vars:3,consts:[[6,"text"],["createString",""],["createErrString",""],["successString",""],["updateFailedString",""],["deleteFailedString",""],["deleteSuccessString",""],["persistKey","acq.provider.attributes","idlClass","acqlipad","hideFields","provider",3,"dataSource","sortable","cellTextGenerator"],["acqProviderAttributesGrid",""],[3,"onClick",6,"label"],["idlClass","acqlipad","readonlyFields","id,provider","fieldOrder","id,provider,code,description,xpath,remove,ident"],["editDialog",""]],template:function(e,t){1&e&&(l.Rb(0,"eg-string",0,1),l.Xb(2,Ti),l.Qb(),l.Rb(3,"eg-string",0,2),l.Xb(5,zi),l.Qb(),l.Rb(6,"eg-string",0,3),l.Xb(8,Ai),l.Qb(),l.Rb(9,"eg-string",0,4),l.Xb(11,Oi),l.Qb(),l.Rb(12,"eg-string",0,5),l.Xb(14,Mi),l.Qb(),l.Rb(15,"eg-string",0,6),l.Xb(17,Ei),l.Qb(),l.Rb(18,"eg-grid",7,8),l.Rb(20,"eg-grid-toolbar-button",9),l.Xb(21,$i),l.fc("onClick",(function(){return t.createNew()})),l.Qb(),l.Rb(22,"eg-grid-toolbar-action",9),l.Xb(23,qi),l.fc("onClick",(function(e){return t.editSelected(e)})),l.Qb(),l.Rb(24,"eg-grid-toolbar-action",9),l.Xb(25,Li),l.fc("onClick",(function(e){return t.deleteSelected(e)})),l.Qb(),l.Qb(),l.Mb(26,"eg-fm-record-editor",10,11)),2&e&&(l.xb(18),l.oc("dataSource",t.gridSource)("sortable",!0)("cellTextGenerator",t.cellTextGenerator))},directives:[u.a,oe.a,ae.a,se.a,V.a],encapsulation:2}),e})();const ki=["editDialog"],Ni=["acqProviderEdiAccountsGrid"],Gi=["acqProviderEdiMessagesGrid"],Xi=["confirmSetAsDefault"],Vi=["successString"],Ui=["createString"],ji=["createErrString"],Ki=["updateFailedString"],Hi=["deleteFailedString"],Bi=["deleteSuccessString"],Wi=["setAsDefaultSuccessString"],Zi=["setAsDefaultFailedString"],Ji=["text",$localize`:␟aa14f6fa2a659efd5e3cdc27f586eae32807836c␟3407553384995521012:New EDI Account Added`],Yi=["text",$localize`:␟3a60f3ea8b08ff2a04c0b808ce312014a3aeb032␟111492390992409977:Failed to Create New EDI Account`],ec=["text",$localize`:␟a4526d8261457491a21b9641079670a119027115␟7114030634368524293:EDI Account Update Succeeded`],tc=["text",$localize`:␟f517868a29612be96ee6119dae45fc68dec53b9d␟2769062071037850529:EDI Account Update Failed`],rc=["text",$localize`:␟b538906bb5cda032f89cd047e68dbca55d03275c␟5853143714547801401:Delete of EDI Account failed or was not allowed`],ic=["text",$localize`:␟d9e80d71e7eb6823779ad5a9ea3f9162ec688ce7␟8470590707446378900:Delete of EDI Account succeeded`],cc=["text",$localize`:␟b7dd2badfde696f0129a3bed34b1d4d26f06a3c1␟3844732804206708893:Successfully set EDI default account`],oc=["text",$localize`:␟1dfb27b52557be810830c4f70c158b0452947abf␟4292620636706996909:Failed to set EDI default account`],dc=["dialogTitle",$localize`:␟91cdc657d21764163c89f5b0eda596920714ae8a␟2103610876065821138:Confirm Setting Default EDI Account`,"dialogBody",$localize`:␟296184a104278a2cd1df430f87b49a3c3d4f8d5b␟3314128032169666968:Set ${"\ufffd0\ufffd"}:INTERPOLATION: as the default EDI account for ${"\ufffd1\ufffd"}:INTERPOLATION_1:?`],ac=["label",$localize`:␟7e2e7b94b5c07e6621bae1b4570169aaec582a61␟5630539237434639350:New EDI Account`],sc=["label",$localize`:␟0d9b75d8cebc0819bc4e34c383287e7dfc8fa22e␟5718230641867732402:View EDI Messages`],nc=["label",$localize`:␟c525cbf6c3ff841184f81b04f0303bce644b1c51␟2886653045266158715:Edit Selected`],lc=["label",$localize`:␟96e678d5f4bfe1a041ecfcd34804efa5e100d5e8␟5167284364083276913:Delete Selected`],bc=["label",$localize`:␟7e4acdffa175aed67367579432d2fff4c3b667b6␟1935116885688531079:Set as Default`],hc=["label",$localize`:␟0d9b75d8cebc0819bc4e34c383287e7dfc8fa22e␟5718230641867732402:View EDI Messages`],uc=["label",$localize`:␟2665025c5f6ee8399d75acd49d3798150d84316f␟8565073629166698795:Is Default?`],pc=["text",$localize`:␟3fe3b627d3193588f9f582f73044eaa6c6d12c76␟7754016079160377456:EDI FTP or SCP server, including protocol. For example, ftp://ftp.example.org.`];var fc;function gc(e,t){if(1&e&&(l.Pb(0),l.Rb(1,"h2"),l.Vb(2,fc),l.Qb(),l.Mb(3,"eg-grid",33,34),l.Ob()),2&e){const e=l.hc();l.xb(2),l.Zb(e.selectedEdiAccountLabel),l.Wb(2),l.xb(1),l.oc("dataSource",e.ediMessagesSource)("sortable",!0)("filterable",!0)}}fc=$localize`:␟eb94e98597488130fff92b5a7a67fcbd37f009c3␟8380831348122386581:EDI messages for account ${"\ufffd0\ufffd"}:INTERPOLATION:`;const vc=function(e){return{helpText:e}},mc=function(e,t,r,i,c,o,d,a){return{host:e,username:t,password:r,path:i,in_dir:c,vendacct:o,vendcode:d,account:a}};let Sc=(()=>{class e{constructor(e,t,r,i,c,o,d,a,s){this.router=e,this.route=t,this.changeDetector=r,this.net=i,this.idl=c,this.auth=o,this.pcrud=d,this.providerRecord=a,this.toast=s,this.edi_accounts=[],this.selectedEdiAccountLabel="",this.dialogSize="lg",this.desireSummarize=new l.n}ngOnInit(){this.gridSource=this.getDataSource(),this.ediMessagesSource=this.getEdiMessagesSource(),this.viewEdiMessages=!1,this.selectedEdiAccountId=null,this.cellTextGenerator={},this.notOneSelectedRow=e=>1!==e.length,this.deleteSelected=e=>{e.forEach(e=>e.isdeleted(!0)),this.providerRecord.batchUpdate(e).subscribe(e=>{console.debug("deleted: "+e),this.deleteSuccessString.current().then(e=>this.toast.success(e))},e=>{this.deleteFailedString.current().then(e=>this.toast.danger(e))},()=>{this.providerRecord.refreshCurrent().then(()=>{this.providerEdiAccountsGrid.reload()})})},this.providerEdiAccountsGrid.onRowActivate.subscribe(e=>this.showEditDialog(e)),this.subscription=this.providerRecord.providerUpdated$.subscribe(e=>{this.providerEdiAccountsGrid.reload()})}ngAfterViewInit(){console.log("this.providerRecord",this.providerRecord)}ngOnDestroy(){this.subscription.unsubscribe()}getDataSource(){const e=new de.c;return e.getRows=(e,t)=>{if(this.provider=this.providerRecord.current(),!this.provider)return Object(ie.b)();let r=this.provider.edi_accounts();return t.length>0&&(r=r.sort((e,r)=>{for(let i=0;i<t.length;i++){let c=-1;const o=t[i].name;if("d"===t[i].dir.substring(0,1).toLowerCase()&&(c*=-1),e[o]()<r[o]())return c;if(e[o]()>r[o]())return-1*c}return 0})),Object(ce.a)(r.slice(e.offset,e.offset+e.limit))},e}getEdiMessagesSource(){const e=new de.c;return e.getRows=(t,r)=>{const i={acqedim:"create_time desc"};r.length&&(i.acqedim=r[0].name+" "+r[0].dir);const c={account:this.selectedEdiAccountId},o=new Array;return o.push(c),Object.keys(e.filters).forEach(t=>{Object.keys(e.filters[t]).forEach(r=>{o.push(e.filters[t][r])})}),this.pcrud.search("acqedim",o,{flesh:3,flesh_fields:{acqedim:["account","purchase_order"]},offset:t.offset,limit:t.limit,order_by:i})},e}showEditDialog(e){return this.editDialog.mode="update",this.editDialog.recordId=e.id(),new Promise((e,t)=>{this.editDialog.open({size:this.dialogSize}).subscribe(t=>{this.successString.current().then(e=>this.toast.success(e)),this.providerRecord.refreshCurrent().then(()=>this.providerEdiAccountsGrid.reload()),e(t)},e=>{this.updateFailedString.current().then(e=>this.toast.danger(e)),t(e)})})}editSelected(e){const t=r=>{r&&this.showEditDialog(r).then(()=>t(e.shift()))};t(e.shift())}setAsDefault(e){this.selected=e[0],this.confirmSetAsDefault.open().subscribe(t=>{t&&this.providerRecord.refreshCurrent().then(()=>{this.provider.edi_default(e[0].id()),this.provider.ischanged(!0),this.providerRecord.batchUpdate(this.provider).subscribe(e=>{this.setAsDefaultSuccessString.current().then(e=>this.toast.success(e))},e=>{this.setAsDefaultFailedString.current().then(e=>this.toast.danger(e))},()=>{this.providerRecord.refreshCurrent().then(()=>{this.providerEdiAccountsGrid.reload(),this.desireSummarize.emit(this.provider.id())})})})})}displayEdiMessages(e){this.selectedEdiAccountId=e[0].id(),this.selectedEdiAccountLabel=e[0].label(),this.viewEdiMessages=!0,this.changeDetector.detectChanges(),this.providerEdiMessagesGrid.reload()}createNew(){this.editDialog.mode="create";const e=this.idl.create("acqedi");e.provider(this.provider.id()),e.owner(this.auth.user().ws_ou()),e.use_attrs(!0),this.editDialog.record=e,this.editDialog.recordId=null,this.editDialog.open({size:this.dialogSize}).subscribe(e=>{this.createString.current().then(e=>this.toast.success(e)),this.providerRecord.refreshCurrent().then(()=>this.providerEdiAccountsGrid.reload())},e=>{e.dismissed||this.createErrString.current().then(e=>this.toast.danger(e))})}}return e.\u0275fac=function(t){return new(t||e)(l.Lb(c.c),l.Lb(c.a),l.Lb(l.h),l.Lb(X.b),l.Lb(n.a),l.Lb(g.a),l.Lb(h.a),l.Lb(_),l.Lb(p.a))},e.\u0275cmp=l.Fb({type:e,selectors:[["eg-provider-edi-accounts"]],viewQuery:function(e,t){var r;1&e&&(l.Ic(ki,!0),l.Ic(Ni,!0),l.Sc(Gi,!0),l.Ic(Xi,!0),l.Ic(Vi,!0),l.Sc(Ui,!0),l.Sc(ji,!0),l.Sc(Ki,!0),l.Ic(Hi,!0),l.Ic(Bi,!0),l.Ic(Wi,!0),l.Ic(Zi,!0)),2&e&&(l.yc(r=l.gc())&&(t.editDialog=r.first),l.yc(r=l.gc())&&(t.providerEdiAccountsGrid=r.first),l.yc(r=l.gc())&&(t.providerEdiMessagesGrid=r.first),l.yc(r=l.gc())&&(t.confirmSetAsDefault=r.first),l.yc(r=l.gc())&&(t.successString=r.first),l.yc(r=l.gc())&&(t.createString=r.first),l.yc(r=l.gc())&&(t.createErrString=r.first),l.yc(r=l.gc())&&(t.updateFailedString=r.first),l.yc(r=l.gc())&&(t.deleteFailedString=r.first),l.yc(r=l.gc())&&(t.deleteSuccessString=r.first),l.yc(r=l.gc())&&(t.setAsDefaultSuccessString=r.first),l.yc(r=l.gc())&&(t.setAsDefaultFailedString=r.first))},inputs:{dialogSize:"dialogSize"},outputs:{desireSummarize:"desireSummarize"},decls:63,vars:37,consts:[[6,"text"],["createString",""],["createErrString",""],["successString",""],["updateFailedString",""],["deleteFailedString",""],["deleteSuccessString",""],["setAsDefaultSuccessString",""],["setAsDefaultFailedtring",""],[6,"dialogTitle","dialogBody"],["confirmSetAsDefault",""],["persistKey","acq.provider.edi_accounts","idlClass","acqedi","hideFields","provider",3,"dataSource","sortable","cellTextGenerator"],["acqProviderEdiAccountsGrid",""],[3,"onClick",6,"label"],[3,"disabled","onClick",6,"label"],[3,"disableOnRows","onClick",6,"label"],["path","_is_default","datatype","bool",3,"filterable","sortable",6,"label"],[4,"ngIf"],["hostHelpStr",""],["text","Username supplied by provider."],["usernameHelpStr",""],["text","Password supplied by provider."],["passwordHelpStr",""],["text","Directory on the provider's server where Evergreen should deposit order files."],["pathHelpStr",""],["text","Directory on the provider's server where Evergreen should retrieve order responses and invoices."],["indirHelpStr",""],["text","Supplied by provider."],["vendacctHelpStr",""],["vendcodeHelpStr",""],["accountHelpStr",""],["idlClass","acqedi","readonlyFields","id,provider","hiddenFields","provider,last_activity","fieldOrder","id,label,host,username,password,account,owner,path,in_dir,vendacct,vendcode,attr_set,use_attrs",3,"fieldOptions"],["editDialog",""],["persistKey","acq.provider.edi_messages","idlClass","acqedim",3,"dataSource","sortable","filterable"],["acqProviderEdiMessagesGrid",""]],template:function(e,t){if(1&e&&(l.Rb(0,"eg-string",0,1),l.Xb(2,Ji),l.Qb(),l.Rb(3,"eg-string",0,2),l.Xb(5,Yi),l.Qb(),l.Rb(6,"eg-string",0,3),l.Xb(8,ec),l.Qb(),l.Rb(9,"eg-string",0,4),l.Xb(11,tc),l.Qb(),l.Rb(12,"eg-string",0,5),l.Xb(14,rc),l.Qb(),l.Rb(15,"eg-string",0,6),l.Xb(17,ic),l.Qb(),l.Rb(18,"eg-string",0,7),l.Xb(20,cc),l.Qb(),l.Rb(21,"eg-string",0,8),l.Xb(23,oc),l.Qb(),l.Rb(24,"eg-confirm-dialog",9,10),l.Xb(26,dc),l.Qb(),l.Rb(27,"eg-grid",11,12),l.Rb(29,"eg-grid-toolbar-button",13),l.Xb(30,ac),l.fc("onClick",(function(){return t.createNew()})),l.Qb(),l.Rb(31,"eg-grid-toolbar-button",14),l.Xb(32,sc),l.fc("onClick",(function(e){return t.displayEdiMessages(e)})),l.Qb(),l.Rb(33,"eg-grid-toolbar-action",13),l.Xb(34,nc),l.fc("onClick",(function(e){return t.editSelected(e)})),l.Qb(),l.Rb(35,"eg-grid-toolbar-action",13),l.Xb(36,lc),l.fc("onClick",(function(e){return t.deleteSelected(e)})),l.Qb(),l.Rb(37,"eg-grid-toolbar-action",15),l.Xb(38,bc),l.fc("onClick",(function(e){return t.setAsDefault(e)})),l.Qb(),l.Rb(39,"eg-grid-toolbar-action",15),l.Xb(40,hc),l.fc("onClick",(function(e){return t.displayEdiMessages(e)})),l.Qb(),l.Rb(41,"eg-grid-column",16),l.Xb(42,uc),l.Qb(),l.Qb(),l.Kc(43,gc,5,4,"ng-container",17),l.Rb(44,"eg-string",0,18),l.Xb(46,pc),l.Qb(),l.Mb(47,"eg-string",19,20),l.Mb(49,"eg-string",21,22),l.Mb(51,"eg-string",23,24),l.Mb(53,"eg-string",25,26),l.Mb(55,"eg-string",27,28),l.Mb(57,"eg-string",27,29),l.Mb(59,"eg-string",27,30),l.Mb(61,"eg-fm-record-editor",31,32)),2&e){const e=l.zc(28),r=l.zc(45),i=l.zc(48),c=l.zc(50),o=l.zc(52),d=l.zc(54),a=l.zc(56),s=l.zc(58),n=l.zc(60);l.xb(24),l.Zb(t.selected?t.selected.label():"")(t.provider?t.provider.name():""),l.Wb(26),l.xb(3),l.oc("dataSource",t.gridSource)("sortable",!0)("cellTextGenerator",t.cellTextGenerator),l.xb(4),l.oc("disabled",1!==e.context.getSelectedRows().length),l.xb(6),l.oc("disableOnRows",t.notOneSelectedRow),l.xb(2),l.oc("disableOnRows",t.notOneSelectedRow),l.xb(2),l.oc("filterable",!1)("sortable",!1),l.xb(2),l.oc("ngIf",t.viewEdiMessages),l.xb(18),l.oc("fieldOptions",l.xc(28,mc,l.uc(12,vc,r),l.uc(14,vc,i),l.uc(16,vc,c),l.uc(18,vc,o),l.uc(20,vc,d),l.uc(22,vc,a),l.uc(24,vc,s),l.uc(26,vc,n)))}},directives:[u.a,f.a,oe.a,ae.a,se.a,ne.a,R.v,V.a],encapsulation:2}),e})();var yc=r("/xpB"),_c=r("E45d"),Rc=r("n44+"),wc=r("TWQ8");const xc=["acqProviderInvoicesGrid"],Qc=["printfail"],Ic=["label",$localize`:␟37a94969f39d714af37e7fa6647a26a848d820a9␟5729316809383292871:Print Selected Invoices`],Cc=["dialogBody",$localize`:␟ea4e0a6de9a38898c2d6ab51f1947315226065bf␟9056538087466546092:Could not print the selected invoices.`];function Dc(e,t){if(1&e&&(l.Rb(0,"a",15),l.Mc(1),l.Qb()),2&e){const e=t.row;l.qc("href","/eg/staff/acq/legacy/invoice/view/",e.id(),"",l.Ec),l.xb(1),l.Oc(" ",e.inv_ident()," ")}}function Pc(e,t){if(1&e&&(l.Rb(0,"a",16),l.Mc(1),l.Qb()),2&e){const e=t.row;l.qc("routerLink","/staff/acq/provider/",e.provider().id(),""),l.xb(1),l.Oc(" ",e.provider().code()," ")}}function Tc(e,t){if(1&e&&(l.Rb(0,"a",16),l.Mc(1),l.Qb()),2&e){const e=t.row;l.qc("routerLink","/staff/acq/provider/",e.shipper().id(),""),l.xb(1),l.Oc(" ",e.shipper().code()," ")}}let zc=(()=>{class e{constructor(e,t,r,i,c,o,d,a){this.router=e,this.route=t,this.printer=r,this.evt=i,this.net=c,this.auth=o,this.providerRecord=d,this.acqSearch=a,this.initialSearchTerms=[]}ngOnInit(){this.gridSource=this.acqSearch.getAcqSearchDataSource("invoice"),this.noSelectedRows=e=>0===e.length,this.cellTextGenerator={inv_ident:e=>e.inv_ident(),provider:e=>e.provider().code(),shipper:e=>e.shipper().code()},this.subscription=this.providerRecord.providerUpdated$.subscribe(e=>{this.resetSearch()})}ngAfterViewInit(){this.resetSearch()}ngOnDestroy(){this.subscription.unsubscribe()}resetSearch(){const e=this.providerRecord.current();e&&setTimeout(()=>{this.acqSearch.setSearch({terms:[{field:"acqinv:provider",op:"",value1:e.id(),value2:""}],conjunction:"all"}),this.providerInvoicesGrid.reload()})}printSelectedInvoices(e){let t='<style type="text/css">.acq-invoice-voucher {page-break-after:always;}</style>\n';this.net.request("open-ils.acq","open-ils.acq.invoice.print.html",this.auth.token(),e.map(e=>e.id())).subscribe(e=>{this.evt.parse(e)?(console.error(e),this.printfail.open()):t+=e.template_output().data()},e=>{console.error(e),this.printfail.open()},()=>this.printer.print({text:t,printContext:"default"}))}}return e.\u0275fac=function(t){return new(t||e)(l.Lb(c.c),l.Lb(c.a),l.Lb(_c.a),l.Lb(wt.a),l.Lb(X.b),l.Lb(g.a),l.Lb(_),l.Lb(Rc.a))},e.\u0275cmp=l.Fb({type:e,selectors:[["eg-provider-invoices"]],viewQuery:function(e,t){var r;1&e&&(l.Ic(xc,!0),l.Ic(Qc,!0)),2&e&&(l.yc(r=l.gc())&&(t.providerInvoicesGrid=r.first),l.yc(r=l.gc())&&(t.printfail=r.first))},inputs:{initialSearchTerms:"initialSearchTerms"},features:[l.wb([Rc.a,wc.a])],decls:20,vars:15,consts:[["inv_identTmpl",""],["providerTmpl",""],["shipperTmpl",""],["persistKey","acq.provider.invoices","idlClass","acqinv",3,"stickyHeader","filterable","sortable","cellTextGenerator","dataSource"],["acqProviderInvoicesGrid",""],[3,"disableOnRows","onClick",6,"label"],["path","inv_ident",3,"cellTemplate"],["path","provider",3,"cellTemplate","filterable","hidden"],["path","shipper",3,"cellTemplate"],["path","id",3,"hidden"],["path","recv_date",3,"hidden"],["path","recv_method",3,"asyncSupportsEmptyTermClick"],["path","payment_method",3,"asyncSupportsEmptyTermClick"],[6,"dialogBody"],["printfail",""],["target","_blank",3,"href"],["target","_blank",3,"routerLink"]],template:function(e,t){if(1&e&&(l.Kc(0,Dc,2,2,"ng-template",null,0,l.Lc),l.Kc(2,Pc,2,2,"ng-template",null,1,l.Lc),l.Kc(4,Tc,2,2,"ng-template",null,2,l.Lc),l.Rb(6,"eg-grid",3,4),l.Rb(8,"eg-grid-toolbar-action",5),l.Xb(9,Ic),l.fc("onClick",(function(e){return t.printSelectedInvoices(e)})),l.Qb(),l.Mb(10,"eg-grid-column",6),l.Mb(11,"eg-grid-column",7),l.Mb(12,"eg-grid-column",8),l.Mb(13,"eg-grid-column",9),l.Mb(14,"eg-grid-column",10),l.Mb(15,"eg-grid-column",11),l.Mb(16,"eg-grid-column",12),l.Qb(),l.Rb(17,"eg-alert-dialog",13,14),l.Xb(19,Cc),l.Qb()),2&e){const e=l.zc(1),r=l.zc(3),i=l.zc(5);l.xb(6),l.oc("stickyHeader",!0)("filterable",!0)("sortable",!0)("cellTextGenerator",t.cellTextGenerator)("dataSource",t.gridSource),l.xb(2),l.oc("disableOnRows",t.noSelectedRows),l.xb(2),l.oc("cellTemplate",e),l.xb(1),l.oc("cellTemplate",r)("filterable",!1)("hidden",!0),l.xb(1),l.oc("cellTemplate",i),l.xb(1),l.oc("hidden",!0),l.xb(1),l.oc("hidden",!0),l.xb(1),l.oc("asyncSupportsEmptyTermClick",!0),l.xb(1),l.oc("asyncSupportsEmptyTermClick",!0)}},directives:[oe.a,se.a,ne.a,yc.a,c.f],encapsulation:2}),e})();const Ac=["acqProviderPurchaseOrdersGrid"],Oc=["printfail"],Mc=["label",$localize`:␟81b97b8ea996ad1e4f9fca8415021850214884b1␟5611592591303869712:Status`];function Ec(e,t){if(1&e&&(l.Rb(0,"a",17),l.Mc(1),l.Qb()),2&e){const e=t.row;l.qc("href","/eg/staff/acq/legacy/po/view/",e.id(),"",l.Ec),l.xb(1),l.Oc(" ",e.name()," ")}}function $c(e,t){if(1&e&&(l.Rb(0,"a",18),l.Mc(1),l.Qb()),2&e){const e=t.row;l.qc("routerLink","/staff/acq/provider/",e.provider().id(),""),l.xb(1),l.Oc(" ",e.provider().code()," ")}}let qc=(()=>{class e{constructor(e,t,r,i,c,o,d,a){this.router=e,this.route=t,this.printer=r,this.evt=i,this.net=c,this.auth=o,this.providerRecord=d,this.acqSearch=a,this.initialSearchTerms=[]}ngOnInit(){this.gridSource=this.acqSearch.getAcqSearchDataSource("purchase_order"),this.noSelectedRows=e=>0===e.length,this.cellTextGenerator={inv_ident:e=>e.inv_ident(),provider:e=>e.provider().code(),shipper:e=>e.shipper().code()},this.subscription=this.providerRecord.providerUpdated$.subscribe(e=>{this.resetSearch()})}ngAfterViewInit(){this.resetSearch()}resetSearch(){const e=this.providerRecord.current();e&&setTimeout(()=>{this.acqSearch.setSearch({terms:[{field:"acqpo:provider",op:"",value1:e.id(),value2:""}],conjunction:"all"}),this.providerPurchaseOrdersGrid.reload()})}ngOnDestroy(){this.subscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(l.Lb(c.c),l.Lb(c.a),l.Lb(_c.a),l.Lb(wt.a),l.Lb(X.b),l.Lb(g.a),l.Lb(_),l.Lb(Rc.a))},e.\u0275cmp=l.Fb({type:e,selectors:[["eg-provider-purchase-orders"]],viewQuery:function(e,t){var r;1&e&&(l.Ic(Ac,!0),l.Ic(Oc,!0)),2&e&&(l.yc(r=l.gc())&&(t.providerPurchaseOrdersGrid=r.first),l.yc(r=l.gc())&&(t.printfail=r.first))},inputs:{initialSearchTerms:"initialSearchTerms"},features:[l.wb([Rc.a,wc.a])],decls:20,vars:16,consts:[["nameTmpl",""],["providerTmpl",""],["persistKey","acq.provider.purchaseorders","idlClass","acqpo",3,"stickyHeader","filterable","sortable","cellTextGenerator","dataSource"],["acqProviderPurchaseOrdersGrid",""],["path","name",3,"cellTemplate"],["path","id"],["path","provider",3,"hidden","filterable","cellTemplate"],["path","ordering_agency"],["path","create_time"],["path","edit_time"],["path","order_date"],["path","creator",3,"hidden"],["path","editor",3,"hidden"],["path","owner",3,"hidden"],["path","state",3,"asyncSupportsEmptyTermClick","disableTooltip",6,"label"],["path","cancel_reason",3,"asyncSupportsEmptyTermClick"],["path","prepayment_required",3,"sortable"],["target","_blank",3,"href"],["target","_blank",3,"routerLink"]],template:function(e,t){if(1&e&&(l.Kc(0,Ec,2,2,"ng-template",null,0,l.Lc),l.Kc(2,$c,2,2,"ng-template",null,1,l.Lc),l.Rb(4,"eg-grid",2,3),l.Mb(6,"eg-grid-column",4),l.Mb(7,"eg-grid-column",5),l.Mb(8,"eg-grid-column",6),l.Mb(9,"eg-grid-column",7),l.Mb(10,"eg-grid-column",8),l.Mb(11,"eg-grid-column",9),l.Mb(12,"eg-grid-column",10),l.Mb(13,"eg-grid-column",11),l.Mb(14,"eg-grid-column",12),l.Mb(15,"eg-grid-column",13),l.Rb(16,"eg-grid-column",14),l.Xb(17,Mc),l.Qb(),l.Mb(18,"eg-grid-column",15),l.Mb(19,"eg-grid-column",16),l.Qb()),2&e){const e=l.zc(1),r=l.zc(3);l.xb(4),l.oc("stickyHeader",!0)("filterable",!0)("sortable",!0)("cellTextGenerator",t.cellTextGenerator)("dataSource",t.gridSource),l.xb(2),l.oc("cellTemplate",e),l.xb(2),l.oc("hidden",!0)("filterable",!1)("cellTemplate",r),l.xb(5),l.oc("hidden",!0),l.xb(1),l.oc("hidden",!0),l.xb(1),l.oc("hidden",!0),l.xb(1),l.oc("asyncSupportsEmptyTermClick",!0)("disableTooltip",!0),l.xb(2),l.oc("asyncSupportsEmptyTermClick",!0),l.xb(1),l.oc("sortable",!1)}},directives:[oe.a,ne.a,c.f],encapsulation:2}),e})();const Lc=["acqSearchProviderSummary"],Fc=["acqProviderResults"],kc=["providerDetails"],Nc=["providerHoldings"],Gc=["createDialog"],Xc=["createString"],Vc=["createErrString"],Uc=["leaveConfirm"],jc=["bannerText",$localize`:␟d0e2ba9e96fa32ac7b749b31be14b29367ad4add␟3362033469957869127:Providers`],Kc=["text",$localize`:␟6c9f285eb1b8fac202387adc184d4d59017aa16b␟7577342743301684844:New Provider Added`],Hc=["text",$localize`:␟137cf12532140f286aa8ec5cff1c37c5844300a0␟1148744205067308622:Failed to Create New Provider`],Bc=["dialogTitle",$localize`:␟3d3d565c728a36d2d4f03dcd1cb3a05d802276ea␟7474429911231654139:Unsaved Changes Warning`,"dialogBody",$localize`:␟aad5229079772eef556057d43e8c985823d2a2c8␟5726901694701586223:There are unsaved changes. Are you sure you want to leave?`];var Wc,Zc,Jc;Wc=$localize`:␟bccd6b48ad3dbc947cb60e2ed01dbf5e51e50b90␟6746215693755342858:Show Search Form`,Zc=$localize`:␟c93c80260868866ae0fb0e5104ce3dc216b79b98␟6130333124181388314:Hide Search Form`,Jc=$localize`:␟4887f2369f66683cadb5a054c94b2bb041fcf666␟9206155393233590407:New Provider`;const Yc=["title",$localize`:␟c2278db1049d5f3d08a06d74f5bb681f7015275b␟8232773653071363045:Provider`],eo=["title",$localize`:␟7882f2edb1d4139800b276b6b0bbf5ae0b2234ef␟5159814115056353668:Addresses`],to=["title",$localize`:␟9b475bb63675494482effde989c7f1f18c232620␟5945986349492910662:Contacts`],ro=["title",$localize`:␟1e18b39f2aa0f5bbf93d05b99a459268c7bb52aa␟990414287671516182:Attribute Definitions`],io=["title",$localize`:␟a5dbfe35c20ef3ff07fd1fee60260d7fd63c3d50␟6608950901692142149:Holdings Definitions`],co=["title",$localize`:␟95dff3165909e1df5b609f7463f75ccd0a5f0d19␟7879167102351905034:EDI`],oo=["title",$localize`:␟268a63311a400adb655a25d6b6dbb2da287c1e6b␟2363158409383485440:Invoices`],ao=["title",$localize`:␟ed50456bf9d4954ac2126781930a51561c2f9039␟6843695304209808261:POs`];var so,no,lo,bo,ho,uo,po,fo,go,vo;function mo(e,t){if(1&e&&(l.Rb(0,"h3"),l.Vb(1,so),l.Qb()),2&e){const e=l.hc();l.xb(1),l.Zb(null==e.providerRecord.currentProvider?null:e.providerRecord.currentProvider.record.name())(null==e.providerRecord.currentProvider?null:e.providerRecord.currentProvider.record.code()),l.Wb(1)}}function So(e,t){if(1&e&&(l.Rb(0,"h3"),l.Vb(1,no),l.Qb()),2&e){const e=l.hc();l.xb(1),l.Zb(null==e.providerRecord.currentProvider?null:e.providerRecord.currentProvider.record.name())(null==e.providerRecord.currentProvider?null:e.providerRecord.currentProvider.record.code()),l.Wb(1)}}function yo(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",37),l.Rb(1,"div",38),l.Rb(2,"button",39),l.fc("click",(function(){return l.Bc(e),l.hc().setDefaultTab()})),l.Vb(3,lo),l.Qb(),l.Qb(),l.Qb(),l.Rb(4,"eg-provider-details",40,41),l.fc("desireSummarize",(function(t){return l.Bc(e),l.hc().onDesireSummarize(t,!0)})),l.Qb()}if(2&e){const e=l.hc();l.xb(2),l.oc("disabled",e.activeTab==e.defaultTabType)}}function _o(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",37),l.Rb(1,"div",38),l.Rb(2,"button",39),l.fc("click",(function(){return l.Bc(e),l.hc().setDefaultTab()})),l.Vb(3,bo),l.Qb(),l.Qb(),l.Qb(),l.Mb(4,"eg-provider-addresses")}if(2&e){const e=l.hc();l.xb(2),l.oc("disabled",e.activeTab==e.defaultTabType)}}function Ro(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",37),l.Rb(1,"div",38),l.Rb(2,"button",39),l.fc("click",(function(){return l.Bc(e),l.hc().setDefaultTab()})),l.Vb(3,ho),l.Qb(),l.Qb(),l.Qb(),l.Rb(4,"eg-provider-contacts",40),l.fc("desireSummarize",(function(t){return l.Bc(e),l.hc().onDesireSummarize(t,!0)})),l.Qb()}if(2&e){const e=l.hc();l.xb(2),l.oc("disabled",e.activeTab==e.defaultTabType)}}function wo(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",37),l.Rb(1,"div",38),l.Rb(2,"button",39),l.fc("click",(function(){return l.Bc(e),l.hc().setDefaultTab()})),l.Vb(3,uo),l.Qb(),l.Qb(),l.Qb(),l.Mb(4,"eg-provider-attributes")}if(2&e){const e=l.hc();l.xb(2),l.oc("disabled",e.activeTab==e.defaultTabType)}}function xo(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",37),l.Rb(1,"div",38),l.Rb(2,"button",39),l.fc("click",(function(){return l.Bc(e),l.hc().setDefaultTab()})),l.Vb(3,po),l.Qb(),l.Qb(),l.Qb(),l.Mb(4,"eg-provider-holdings",null,42)}if(2&e){const e=l.hc();l.xb(2),l.oc("disabled",e.activeTab==e.defaultTabType)}}function Qo(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",37),l.Rb(1,"div",38),l.Rb(2,"button",39),l.fc("click",(function(){return l.Bc(e),l.hc().setDefaultTab()})),l.Vb(3,fo),l.Qb(),l.Qb(),l.Qb(),l.Rb(4,"eg-provider-edi-accounts",40),l.fc("desireSummarize",(function(t){return l.Bc(e),l.hc().onDesireSummarize(t,!0)})),l.Qb()}if(2&e){const e=l.hc();l.xb(2),l.oc("disabled",e.activeTab==e.defaultTabType)}}function Io(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",37),l.Rb(1,"div",38),l.Rb(2,"button",39),l.fc("click",(function(){return l.Bc(e),l.hc().setDefaultTab()})),l.Vb(3,go),l.Qb(),l.Qb(),l.Qb(),l.Mb(4,"eg-provider-invoices")}if(2&e){const e=l.hc();l.xb(2),l.oc("disabled",e.activeTab==e.defaultTabType)}}function Co(e,t){if(1&e){const e=l.Sb();l.Rb(0,"div",37),l.Rb(1,"div",38),l.Rb(2,"button",39),l.fc("click",(function(){return l.Bc(e),l.hc().setDefaultTab()})),l.Vb(3,vo),l.Qb(),l.Qb(),l.Qb(),l.Mb(4,"eg-provider-purchase-orders")}if(2&e){const e=l.hc();l.xb(2),l.oc("disabled",e.activeTab==e.defaultTabType)}}so=$localize`:␟cafee121269b7a39abd9c40cd9ed263d6b7ac9fb␟4429638637455080114:${"\ufffd0\ufffd"}:INTERPOLATION: (${"\ufffd1\ufffd"}:INTERPOLATION_1:)`,no=$localize`:␟cafee121269b7a39abd9c40cd9ed263d6b7ac9fb␟4429638637455080114:${"\ufffd0\ufffd"}:INTERPOLATION: (${"\ufffd1\ufffd"}:INTERPOLATION_1:)`,lo=$localize`:␟4bbab2a67828f5bc387f46a9e33eb1b316ab4665␟6398483646371730954:Set Default View`,bo=$localize`:␟4bbab2a67828f5bc387f46a9e33eb1b316ab4665␟6398483646371730954:Set Default View`,ho=$localize`:␟4bbab2a67828f5bc387f46a9e33eb1b316ab4665␟6398483646371730954:Set Default View`,uo=$localize`:␟4bbab2a67828f5bc387f46a9e33eb1b316ab4665␟6398483646371730954:Set Default View`,po=$localize`:␟4bbab2a67828f5bc387f46a9e33eb1b316ab4665␟6398483646371730954:Set Default View`,fo=$localize`:␟4bbab2a67828f5bc387f46a9e33eb1b316ab4665␟6398483646371730954:Set Default View`,go=$localize`:␟4bbab2a67828f5bc387f46a9e33eb1b316ab4665␟6398483646371730954:Set Default View`,vo=$localize`:␟4bbab2a67828f5bc387f46a9e33eb1b316ab4665␟6398483646371730954:Set Default View`;const Do=function(){return{preloadLinkedValues:!0}},Po=function(e,t,r){return{currency_type:e,edi_default:t,default_claim_policy:r}};let To=(()=>{class e{constructor(e,t,r,i,s,n,l,b){this.router=e,this.route=t,this.auth=r,this.idl=i,this.providerRecord=s,this.toast=n,this.store=l,this.changeDetector=b,this.activeTab="",this.showSearchForm=!1,this.id=null,this.validTabTypes=["details","addresses","contacts","attributes","holdings","edi_accounts","purchase_orders","invoices"],this.defaultTabType="details",this.previousUrl=null,this.destroyed=new a.a,this._alreadyDeactivated=!1,this.router.events.pipe(Object(o.a)(e=>e instanceof c.b),Object(d.a)(this.destroyed)).subscribe(e=>{e instanceof c.b&&(null!=this.previousUrl&&"/staff/acq/provider"===e.url&&(this.acqProviderResults.resetSearch(),this.showSearchForm=!0,this.id=null),this.previousUrl=e.url)})}ngOnInit(){const e=this.route.snapshot.paramMap.get("tab"),t=this.route.snapshot.paramMap.get("id");this.defaultTabType=this.store.getLocalItem("eg.acq.provider.default_tab")||"details";const r=!!history.state.hasOwnProperty("keepSearchForm")&&history.state.keepSearchForm;r&&(this.showSearchForm=!0),t&&(r||(this.showSearchForm=!1),this.id=t,e||(this.activeTab=this.defaultTabType,this.router.navigate(["/staff","acq","provider",this.id,this.activeTab]))),e?(r||(this.showSearchForm=!1),this.validTabTypes.includes(e)?this.activeTab=e:(this.activeTab=this.defaultTabType,this.router.navigate(["/staff","acq","provider",this.id,this.activeTab]))):this.showSearchForm=!0,this.onTabChange=e=>{e.preventDefault(),this.canDeactivate().subscribe(t=>{t&&(this._alreadyDeactivated=!0,this.validTabTypes.includes(e.nextId))&&(this.activeTab=e.nextId,this.route.snapshot.paramMap.get("id"),this.router.navigate(["/staff","acq","provider",this.id,e.nextId]))})},this.onDesireSummarize=(e,t=!1,r=!0)=>{this.id=e,this.providerRecord.fetch(this.id).then(()=>{this.providerSummaryPane.update(e),this.providerDetails&&this.providerDetails.refresh(),t||(this.providerRecord.announceProviderUpdated(),r&&(this.showSearchForm=!1),this.activeTab=this.defaultTabType,this.router.navigate(["/staff","acq","provider",this.id,this.activeTab],{state:{keepSearchForm:!r}}))})},this.onSummaryToggled=e=>{}}ngAfterViewInit(){this.changeDetector.detectChanges()}ngOnDestroy(){this.destroyed.next(),this.destroyed.complete()}setDefaultTab(){this.defaultTabType=this.activeTab,this.store.setLocalItem("eg.acq.provider.default_tab",this.activeTab)}createNew(){this.createDialog.mode="create";const e=this.idl.create("acqpro");e.active(!0),e.owner(this.auth.user().ws_ou()),e.default_copy_count(1),this.createDialog.record=e,this.createDialog.recordId=null,this.createDialog.open({size:"lg"}).subscribe(e=>{this.createString.current().then(e=>this.toast.success(e)),this.onDesireSummarize(e.id())},e=>{e.dismissed||this.createErrString.current().then(e=>this.toast.danger(e))})}canDeactivate(){return this._alreadyDeactivated?(this._alreadyDeactivated=!1,Object(s.a)(!0)):this.providerHoldings&&this.providerHoldings.isDirty()||this.providerDetails&&this.providerDetails.isDirty()?this.leaveConfirm.open():Object(s.a)(!0)}}return e.\u0275fac=function(t){return new(t||e)(l.Lb(c.c),l.Lb(c.a),l.Lb(g.a),l.Lb(n.a),l.Lb(_),l.Lb(p.a),l.Lb(Qt.a),l.Lb(l.h))},e.\u0275cmp=l.Fb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var r;1&e&&(l.Ic(Lc,!0),l.Ic(Fc,!0),l.Sc(kc,!0),l.Sc(Nc,!0),l.Ic(Gc,!0),l.Sc(Xc,!0),l.Sc(Vc,!0),l.Ic(Uc,!0)),2&e&&(l.yc(r=l.gc())&&(t.providerSummaryPane=r.first),l.yc(r=l.gc())&&(t.acqProviderResults=r.first),l.yc(r=l.gc())&&(t.providerDetails=r.first),l.yc(r=l.gc())&&(t.providerHoldings=r.first),l.yc(r=l.gc())&&(t.createDialog=r.first),l.yc(r=l.gc())&&(t.createString=r.first),l.yc(r=l.gc())&&(t.createErrString=r.first),l.yc(r=l.gc())&&(t.leaveConfirm=r.first))},decls:67,vars:27,consts:[[6,"bannerText"],[6,"text"],["createString",""],["createErrString",""],[6,"dialogTitle","dialogBody"],["leaveConfirm",""],[1,"row"],[1,"col"],[1,"row","mb-2"],[1,"col-lg"],[4,"ngIf"],[1,"col-lg-auto"],["role","toolbar",1,"btn-toolbar"],[1,"button-grp","mr-2"],[1,"btn","btn-primary",3,"hidden","click"],[1,"btn","btn-primary",3,"disabled","click"],[1,"row","mb-5",3,"hidden"],[1,"col-lg-12"],[3,"desireSummarize","summarizeSearchFormOpen"],["acqProviderResults",""],[1,"col-lg-auto",3,"hidden"],[3,"providerId","summaryToggled"],["acqSearchProviderSummary",""],["id","acq-provider-page",1,"row",3,"hidden"],[3,"activeId","tabChange"],["acqProviderTabs",""],["id","details",3,"disabled",6,"title"],["ngbTabContent",""],["id","addresses",3,"disabled",6,"title"],["id","contacts",3,"disabled",6,"title"],["id","attributes",3,"disabled",6,"title"],["id","holdings",3,"disabled",6,"title"],["id","edi_accounts",3,"disabled",6,"title"],["id","invoices",3,"disabled",6,"title"],["id","purchase_orders",3,"disabled",6,"title"],["idlClass","acqpro","fieldOrder","active,name,code,currency_type,default_claim_policy,default_copy_count,edi_default,owner,url,san,prepayment_required","hiddenFields","id,email,phone,fax_phone,holding_tag,primary_contact",3,"remainOpenOnError","fieldOptions"],["createDialog",""],[1,"row","mt-3"],[1,"col-lg-12","text-right","pb-1"],[1,"btn","btn-secondary","btn-sm",3,"disabled","click"],[3,"desireSummarize"],["providerDetails",""],["providerHoldings",""]],template:function(e,t){1&e&&(l.Rb(0,"eg-staff-banner",0),l.Xb(1,jc),l.Qb(),l.Rb(2,"eg-string",1,2),l.Xb(4,Kc),l.Qb(),l.Rb(5,"eg-string",1,3),l.Xb(7,Hc),l.Qb(),l.Rb(8,"eg-confirm-dialog",4,5),l.Xb(10,Bc),l.Qb(),l.Rb(11,"div"),l.Rb(12,"div",6),l.Rb(13,"div",7),l.Rb(14,"div",8),l.Rb(15,"div",9),l.Kc(16,mo,2,2,"h3",10),l.Qb(),l.Rb(17,"div",11),l.Rb(18,"div",12),l.Rb(19,"div",13),l.Rb(20,"button",14),l.fc("click",(function(){return t.showSearchForm=!t.showSearchForm})),l.Vb(21,Wc),l.Qb(),l.Rb(22,"button",14),l.fc("click",(function(){return t.showSearchForm=!t.showSearchForm})),l.Vb(23,Zc),l.Qb(),l.Qb(),l.Rb(24,"div",13),l.Rb(25,"button",15),l.fc("click",(function(){return t.createNew()})),l.Vb(26,Jc),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Rb(27,"div",16),l.Rb(28,"div",17),l.Rb(29,"eg-provider-results",18,19),l.fc("desireSummarize",(function(e){return t.onDesireSummarize(e)}))("summarizeSearchFormOpen",(function(e){return t.onDesireSummarize(e,!1,!1)})),l.Qb(),l.Qb(),l.Qb(),l.Kc(31,So,2,2,"h3",10),l.Rb(32,"div",6),l.Rb(33,"div",20),l.Rb(34,"eg-acq-provider-summary-pane",21,22),l.fc("summaryToggled",(function(e){return t.onSummaryToggled(e)})),l.Qb(),l.Qb(),l.Rb(36,"div",7),l.Rb(37,"div",23),l.Rb(38,"div",17),l.Rb(39,"ngb-tabset",24,25),l.fc("tabChange",(function(e){return t.onTabChange(e)})),l.Rb(41,"ngb-tab",26),l.Xb(42,Yc),l.Kc(43,yo,6,1,"ng-template",27),l.Qb(),l.Rb(44,"ngb-tab",28),l.Xb(45,eo),l.Kc(46,_o,5,1,"ng-template",27),l.Qb(),l.Rb(47,"ngb-tab",29),l.Xb(48,to),l.Kc(49,Ro,5,1,"ng-template",27),l.Qb(),l.Rb(50,"ngb-tab",30),l.Xb(51,ro),l.Kc(52,wo,5,1,"ng-template",27),l.Qb(),l.Rb(53,"ngb-tab",31),l.Xb(54,io),l.Kc(55,xo,6,1,"ng-template",27),l.Qb(),l.Rb(56,"ngb-tab",32),l.Xb(57,co),l.Kc(58,Qo,5,1,"ng-template",27),l.Qb(),l.Rb(59,"ngb-tab",33),l.Xb(60,oo),l.Kc(61,Io,5,1,"ng-template",27),l.Qb(),l.Rb(62,"ngb-tab",34),l.Xb(63,ao),l.Kc(64,Co,5,1,"ng-template",27),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Qb(),l.Mb(65,"eg-fm-record-editor",35,36)),2&e&&(l.xb(16),l.oc("ngIf",t.id&&!t.showSearchForm),l.xb(4),l.oc("hidden",t.showSearchForm),l.xb(2),l.oc("hidden",!t.showSearchForm),l.xb(3),l.oc("disabled",!t.providerRecord.checkIfCanAdminAtAll()),l.xb(2),l.oc("hidden",!t.showSearchForm),l.xb(4),l.oc("ngIf",t.id&&t.showSearchForm),l.xb(2),l.oc("hidden",!t.id),l.xb(1),l.oc("providerId",t.id),l.xb(3),l.oc("hidden",!t.id),l.xb(2),l.oc("activeId",t.activeTab),l.xb(2),l.oc("disabled",!t.id),l.xb(3),l.oc("disabled",!t.id||!t.providerRecord.currentProvider||!t.providerRecord.currentProvider.canAdmin),l.xb(3),l.oc("disabled",!t.id||!t.providerRecord.currentProvider||!t.providerRecord.currentProvider.canAdmin),l.xb(3),l.oc("disabled",!t.id||!t.providerRecord.currentProvider||!t.providerRecord.currentProvider.canAdmin),l.xb(3),l.oc("disabled",!t.id||!t.providerRecord.currentProvider||!t.providerRecord.currentProvider.canAdmin),l.xb(3),l.oc("disabled",!t.id||!t.providerRecord.currentProvider||!t.providerRecord.currentProvider.canAdmin),l.xb(3),l.oc("disabled",!t.id),l.xb(3),l.oc("disabled",!t.id),l.xb(3),l.oc("remainOpenOnError",!0)("fieldOptions",l.wc(23,Po,l.tc(20,Do),l.tc(21,Do),l.tc(22,Do))))},directives:[er.a,u.a,f.a,R.v,Yt,G,tr.W,tr.T,tr.U,V.a,re,Sr,_i,Fi,_t,Sc,zc,qc],encapsulation:2}),e})(),zo=(()=>{class e{constructor(e,t){this.router=e,this.providerRecord=t,this.savedId=null}resolve(e,t){console.debug("ProviderResolver:resolve()");const r=Number(e.paramMap.get("id"));return null!==this.savedId&&this.savedId===r?Promise.all([Promise.resolve()]):(this.savedId=r,Promise.all([this.providerRecord.fetch(r).then(e=>{console.debug(this.providerRecord.current())},e=>{this.router.navigate(["/staff","acq","provider"])})]))}}return e.\u0275fac=function(t){return new(t||e)(l.cc(c.c),l.cc(_))},e.\u0275prov=l.Hb({token:e,factory:e.\u0275fac}),e})(),Ao=(()=>{class e{canDeactivate(e){return!e.canDeactivate||e.canDeactivate()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l.Hb({token:e,factory:e.\u0275fac}),e})();const Oo=[{matcher:function(e){return 0===e.length?{consumed:e,posParams:{}}:1===e.length?{consumed:e,posParams:{id:e[0]}}:e.length>1?{consumed:e,posParams:{id:e[0],tab:e[1]}}:null},component:To,resolve:{providerResolver:zo},canDeactivate:[Ao],runGuardsAndResolvers:"always"}];let Mo=(()=>{class e{}return e.\u0275mod=l.Jb({type:e}),e.\u0275inj=l.Ib({factory:function(t){return new(t||e)},providers:[zo,Ao],imports:[[c.g.forChild(Oo)],c.g]}),e})();var Eo=r("csFu"),$o=r("zF8d");let qo=(()=>{class e{}return e.\u0275mod=l.Jb({type:e}),e.\u0275inj=l.Ib({factory:function(t){return new(t||e)},providers:[_],imports:[[i.a,Eo.a,$o.a,Mo]]}),e})()},UjDu:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var i,c,o=r("fXoL"),d=r("3Pt+"),a=r("8PDw"),s=r("cm5s"),n=r("wVJ/"),l=r("ofXK");function b(e,t){if(1&e){const e=o.Sb();o.Rb(0,"div",7),o.Rb(1,"input",8),o.fc("blur",(function(){return o.Bc(e),o.hc().propagateTouch()})),o.Qb(),o.Rb(2,"label",9),o.Vb(3,i),o.Qb(),o.Qb()}if(2&e){const e=o.hc();o.xb(1),o.qc("id","",e.domId,"-include-ancestors"),o.xb(1),o.qc("for","",e.domId,"-include-ancestors")}}function h(e,t){if(1&e){const e=o.Sb();o.Rb(0,"div",7),o.Rb(1,"input",10),o.fc("blur",(function(){return o.Bc(e),o.hc().propagateTouch()})),o.Qb(),o.Rb(2,"label",9),o.Vb(3,c),o.Qb(),o.Qb()}if(2&e){const e=o.hc();o.xb(1),o.qc("id","",e.domId,"-include-descendants"),o.xb(1),o.qc("for","",e.domId,"-include-descendants")}}i=$localize`:␟4615d2661fa26d4fc4a16370e015882a21fb0666␟6169615151051315407:+ Ancestors`,c=$localize`:␟834572c167c788dda79f6a184894c2c93fcac8c7␟8654149606703826544:+ Descendants`;let u=(()=>{class e{constructor(e,t){this.auth=e,this.org=t,this.labelText="Library",this.hideAncestorSelector=!1,this.hideDescendantSelector=!1,this.ancestorSelectorChecked=!1,this.descendantSelectorChecked=!1,this.propagateChange=e=>{},this.propagateTouch=()=>{}}ngOnInit(){this.selectedOrgId?this.options={primaryOrgId:this.selectedOrgId}:this.auth.user()&&(this.options={primaryOrgId:this.auth.user().ws_ou()}),this.familySelectors=new d.j({includeAncestors:new d.g({value:this.ancestorSelectorChecked,disabled:this.disableAncestorSelector()}),includeDescendants:new d.g({value:this.descendantSelectorChecked,disabled:this.disableDescendantSelector()})}),this.domId||(this.domId="org-family-select-"+Math.floor(1e5*Math.random())),this.familySelectors.valueChanges.subscribe(e=>{this.emitArray()}),this.orgOnChange=e=>{this.options.primaryOrgId=e.id(),this.disableAncestorSelector()?this.includeAncestors.disable():this.includeAncestors.enable(),this.disableDescendantSelector()?this.includeDescendants.disable():this.includeDescendants.enable(),this.emitArray()},this.emitArray=()=>{this.options.orgIds=[this.options.primaryOrgId],this.includeAncestors.value&&(this.options.orgIds=this.org.ancestors(this.options.primaryOrgId,!0)),this.includeDescendants.value&&(this.options.orgIds=this.options.orgIds.concat(this.org.descendants(this.options.primaryOrgId,!0)));const e={};this.options.orgIds.forEach(t=>e[t]=!0),this.options.orgIds=Object.keys(e).map(e=>Number(e)),this.propagateChange(this.options)}}writeValue(e){e&&(this.selectedOrgId=e.primaryOrgId,this.orgSelects&&(this.orgSelects.toArray()[0].applyOrgId=this.selectedOrgId,this.options={primaryOrgId:this.selectedOrgId}),this.familySelectors.patchValue({includeAncestors:!!e.includeAncestors&&e.includeAncestors,includeDescendants:!!e.includeDescendants&&e.includeDescendants}))}registerOnChange(e){this.propagateChange=e}registerOnTouched(e){this.propagateTouch=e}disableAncestorSelector(){return this.options.primaryOrgId===this.org.root().id()}disableDescendantSelector(){return 0===this.org.get(this.options.primaryOrgId).children().length}get includeAncestors(){return this.familySelectors.get("includeAncestors")}get includeDescendants(){return this.familySelectors.get("includeDescendants")}}return e.\u0275fac=function(t){return new(t||e)(o.Lb(a.a),o.Lb(s.a))},e.\u0275cmp=o.Fb({type:e,selectors:[["eg-org-family-select"]],viewQuery:function(e,t){var r;1&e&&o.Sc(n.a,!0),2&e&&o.yc(r=o.gc())&&(t.orgSelects=r)},inputs:{labelText:"labelText",hideAncestorSelector:"hideAncestorSelector",hideDescendantSelector:"hideDescendantSelector",ancestorSelectorChecked:"ancestorSelectorChecked",descendantSelectorChecked:"descendantSelectorChecked",selectedOrgId:"selectedOrgId",limitPerms:"limitPerms",domId:"domId"},features:[o.wb([{provide:d.r,useExisting:Object(o.S)(()=>e),multi:!0}])],decls:9,vars:7,consts:[[1,"form-inline",3,"formGroup"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],[3,"domId","limitPerms","applyOrgId","onChange"],[1,"ml-2","d-flex","flex-column","align-items-start"],["class","form-check",4,"ngIf"],[1,"form-check"],["type","checkbox","formControlName","includeAncestors",1,"form-check-input",3,"id","blur"],[1,"form-check-label",3,"for"],["type","checkbox","formControlName","includeDescendants",1,"form-check-input",3,"id","blur"]],template:function(e,t){1&e&&(o.Rb(0,"form",0),o.Rb(1,"div",1),o.Rb(2,"div",2),o.Rb(3,"span",3),o.Mc(4),o.Qb(),o.Qb(),o.Rb(5,"eg-org-select",4),o.fc("onChange",(function(e){return t.orgOnChange(e)})),o.Qb(),o.Qb(),o.Rb(6,"div",5),o.Kc(7,b,4,2,"div",6),o.Kc(8,h,4,2,"div",6),o.Qb(),o.Qb()),2&e&&(o.oc("formGroup",t.familySelectors),o.xb(4),o.Nc(t.labelText),o.xb(1),o.oc("domId",t.domId)("limitPerms",t.limitPerms)("applyOrgId",t.selectedOrgId),o.xb(2),o.oc("ngIf",!t.hideAncestorSelector),o.xb(1),o.oc("ngIf",!t.hideDescendantSelector))},directives:[d.J,d.u,d.k,n.a,l.v,d.a,d.t,d.i],encapsulation:2}),e})()},csFu:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r("VEwP"),c=r("pKmL"),o=r("r2N+"),d=r("3Pt+"),a=r("fXoL");let s=(()=>{class e{}return e.\u0275mod=a.Jb({type:e}),e.\u0275inj=a.Ib({factory:function(t){return new(t||e)},providers:[],imports:[[i.a,c.a,o.a,d.D]]}),e})()}}]);