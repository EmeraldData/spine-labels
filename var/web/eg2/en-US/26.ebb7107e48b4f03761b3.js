(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{jGaZ:function(e,t,i){"use strict";i.r(t),i.d(t,"AdminServerModule",(function(){return ia}));var a=i("tNs6"),l=i("GLCv"),c=i("tyNb"),n=i("fXoL"),r=i("ufrD"),b=i("TI7v");const o=["bannerText",$localize`:␟76046fa6f13fb0524ca1d3777247ab13d73660c8␟2210415377969858551:Server Administration`],s=["label",$localize`:␟6c874ba2c611e88d15fc92cc1f659d1b8477a755␟3488013932255743814:Actor Stat Cat Sip Fields`],d=["label",$localize`:␟0c866921e3e1b5ae5d6e17ea6896d3738d995087␟1012992910919184989:Age Hold Protect Rules`],f=["label",$localize`:␟931d685c87266ac24257139ff7b28651763e2494␟661106483212780104:Asset Stat Cat Sip Fields`],p=["label",$localize`:␟a2e234b05356f53500fdc4064488d7cea3b55727␟7769602143054750366:Authority Browse Axes`],g=["label",$localize`:␟7eee4254a58e760c812165bfa12902d62c2a462b␟3468408691591481740:Authority Control Sets`],u=["label",$localize`:␟412dce3a3f32723b54f5a36d884a611f3c0167a7␟4630306830739481026:Authority Heading Fields`],h=["label",$localize`:␟286022597eeaa39aa81947aca36c9503cccc065a␟5785564512619285998:Authority Thesauri`],m=["label",$localize`:␟3eb9071b066288b98d00d744a8b8c0472056a138␟4281515024453383507:Best-Hold Selection Sort Order`],R=["label",$localize`:␟835c400ff107afe048d34fff1d625147916c03cd␟7450188990455282680:Billing Types`],v=["label",$localize`:␟cf64e943f9a5a39903a7e4dc1d6658980ae64063␟5204270755339083771:Call Number Prefixes`],Q=["label",$localize`:␟431e577f65109a11a95e94a88d52510500014ca6␟2019955291636229243:Call Number Suffixes`],k=["label",$localize`:␟3aded3914bafa01fc795fef2a36efb93cfa259ba␟6146540077985770318:Carousel Types`],_=["label",$localize`:␟0840b741d5f5dea1049107f205d644e109c7555f␟2394766442022531658:Circulation Duration Rules`],$=["label",$localize`:␟10825cea5d562f0dbd99be7b8c6c420bbbc1c3dc␟1904093065846571384:Circulation Limit Groups`],C=["label",$localize`:␟de32e96b1f72e836a8ae9834583f4920b26a61ad␟4840975111733629283:Circulation Matchpoint Weights`],M=["label",$localize`:␟12f977592df53838b1ccb7871155366eb5c9b41d␟4790553009998986024:Circulation Max Fine Rules`],y=["label",$localize`:␟8c9cc3c8b3c35973e2ab98f0846be20e484f1099␟8906533436689790101:Circulation Modifiers`],z=["label",$localize`:␟95d35c3760470f8016fadd4cc32bd8a9964d7c2e␟7531910232031240322:Circulation Recurring Fine Rules`],x=["label",$localize`:␟0cf4626926cb09763701890c8d032bad8caf0ea4␟6524540776805789851:Custom Org Unit Trees`],T=["label",$localize`:␟4e830cb5eae5f15740d0f3a8ec13a33a9443fa45␟9004670140340998729:Floating Groups`],S=["label",$localize`:␟c90e68904ae51cb8834bb1c583c193a268c3ea4f␟2000146328966846358:Global Flags`],D=["label",$localize`:␟9e1b69909049daf64f3028cb0845a8e96a447c21␟2987239323462126581:Hard Due Date Changes`],L=["label",$localize`:␟a55933434e9de0edf3c0e0530a0283b8e738020c␟1643261425018634605:Hold Matchpoint Weights`],I=["label",$localize`:␟2c6156010c7002979bf5cc9513699c714f39b333␟8472623256298183271:Import Match Sets`],O=["label",$localize`:␟84fcf900f0af4af8cfeea7bf22e7bd8a85ff515f␟6827938972175285751:Item Statuses`],P=["label",$localize`:␟90bfc0745d316383312f84a193c2aec5d0d93e6d␟6054738004489615285:Item Tag Types`],w=["label",$localize`:␟686ab3e0c3d60f7ade15a1b72621418c895af70a␟2866784227212221685:MARC Coded Value Maps`],X=["label",$localize`:␟f869e68086e1f71e873ea27258431d4fe4ce8c1a␟1039314476500619212:MARC Import Remove Fields`],A=["label",$localize`:␟1afb6d0757ac974b7d4c390bd2fde3459faaeefd␟7532586785046041429:MARC Record Attributes`],V=["label",$localize`:␟4625ff37c0e7d429f29fc88448c9e1f089a7b189␟344106656728562202:MARC Search/Facet Class FTS Maps`],F=["label",$localize`:␟4ba78e688803c9cf430591e9849dca44115ffb07␟1181613194927382130:MARC Search/Facet Classes`],N=["label",$localize`:␟0e2a4545fad2f723204a54267fc98759c357dda6␟2717162814672128596:MARC Search/Facet Field FTS Maps`],E=["label",$localize`:␟938ad23cb1edccbc0811aef0222c1de70d3f79c7␟1863472866041674450:MARC Search/Facet Fields`],B=["label",$localize`:␟c8baa363273bebfd7be956bc67ee69c676966e6f␟6818519868762732327:MARC Tag Tables`],G=["label",$localize`:␟20f4b9d65d930c09228fce6686cca4ff6ebdcbed␟731084260747601657:Org Unit Proximity Adjustments`],U=["label",$localize`:␟57c0f0b7b868a52840a90aa36609c9b4755ff768␟946901240460163173:Org Unit Setting Types`],K=["label",$localize`:␟0040d1cecbbe83a3ef620bf0a27a40c547ede192␟2747688569418820673:Organization Types`],j=["label",$localize`:␟bf77f9a94bffb099d91f5f9912a39ce94703ccfb␟7352697762547369016:Organizational Units`],J=["label",$localize`:␟06b5190d8ef6f193f51aba909e208cb7f772064f␟3214560260966945675:Permission Groups`],W=["label",$localize`:␟70f45880fce6ac5d8e468e25e82aefbba8098cfe␟7314814725704332646:Permissions`],H=["label",$localize`:␟961636107379c43b258cbcc0fb5584fcdd3ce9a1␟1028332463391082981:Print Templates`],Z=["label",$localize`:␟88c0a2beac3e4904e198fe62e183a899216b0b6d␟2860954532988498084:Remote Accounts`],Y=["label",$localize`:␟bab3e3525db28253da51913e0bf9a4abc0c922fb␟6617253417436723920:Remote Authentication Profiles`],q=["label",$localize`:␟97e9081557e5ae0fd6cd285dfcb3324c86bc4451␟9166421043673328704:SMS Carriers`],ee=["label",$localize`:␟9b0d4637f1be2edd34d115ac5a51d3d73b4f7368␟4294241743928603246:User Activity Types`],te=["label",$localize`:␟64f332303b7d39fd89ce5526ce9cf4104f2b12ec␟5573097597543084647:User Setting Types`],ie=["label",$localize`:␟d6ba733c34e4c7ef3db70b02f45a1c67c31284f6␟1315220257660692796:Weights Association`],ae=["label",$localize`:␟a7a528105b1884513463744da8016a3fd75083ba␟5439441526139338047:Z39.50 Index Field Maps`],le=["label",$localize`:␟705f64e1314fd7a5a6174d73f24f144bfc7d8ee7␟5120899909514296902:Z39.50 Servers`];let ce=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Fb({type:e,selectors:[["ng-component"]],decls:102,vars:0,consts:[[6,"bannerText"],[1,"container"],["columnCount","3"],["routerLink","/staff/admin/server/actor/stat_cat_sip_fields",6,"label"],["routerLink","/staff/admin/server/config/rule_age_hold_protect",6,"label"],["routerLink","/staff/admin/server/asset/stat_cat_sip_fields",6,"label"],["routerLink","/staff/admin/server/authority/browse_axis",6,"label"],["routerLink","/staff/admin/server/authority/control_set",6,"label"],["routerLink","/staff/admin/server/authority/heading_field",6,"label"],["routerLink","/staff/admin/server/authority/thesaurus",6,"label"],["routerLink","/staff/admin/server/config/best_hold_order",6,"label"],["routerLink","/staff/admin/server/config/billing_type",6,"label"],["routerLink","/staff/admin/server/asset/call_number_prefix",6,"label"],["routerLink","/staff/admin/server/asset/call_number_suffix",6,"label"],["routerLink","/staff/admin/server/config/carousel_type",6,"label"],["routerLink","/staff/admin/server/config/rule_circ_duration",6,"label"],["routerLink","/staff/admin/server/config/circ_limit_group",6,"label"],["routerLink","/staff/admin/server/config/circ_matrix_weights",6,"label"],["routerLink","/staff/admin/server/config/rule_max_fine",6,"label"],["routerLink","/staff/admin/server/config/circ_modifier",6,"label"],["routerLink","/staff/admin/server/config/rule_recurring_fine",6,"label"],["url","/eg/staff/admin/server/actor/org_unit_custom_tree",6,"label"],["routerLink","/staff/admin/server/config/floating_group",6,"label"],["routerLink","/staff/admin/server/config/global_flag",6,"label"],["routerLink","/staff/admin/server/config/hard_due_date",6,"label"],["routerLink","/staff/admin/server/config/hold_matrix_weights",6,"label"],["routerLink","/staff/cat/vandelay/match_sets",6,"label"],["routerLink","/staff/admin/server/config/copy_status",6,"label"],["routerLink","/staff/admin/server/config/copy_tag_type",6,"label"],["routerLink","/staff/admin/server/config/coded_value_map",6,"label"],["routerLink","/staff/admin/server/vandelay/import_bib_trash_group",6,"label"],["routerLink","/staff/admin/server/config/record_attr_definition",6,"label"],["routerLink","/staff/admin/server/config/metabib_class_ts_map",6,"label"],["routerLink","/staff/admin/server/config/metabib_class",6,"label"],["routerLink","/staff/admin/server/config/metabib_field_ts_map",6,"label"],["routerLink","/staff/admin/server/config/metabib_field",6,"label"],["routerLink","/staff/admin/server/config/marc_field",6,"label"],["routerLink","/staff/admin/server/actor/org_unit_proximity_adjustment",6,"label"],["routerLink","/staff/admin/server/config/org_unit_setting_type",6,"label"],["routerLink","/staff/admin/server/actor/org_unit_type",6,"label"],["routerLink","/staff/admin/server/actor/org_unit",6,"label"],["routerLink","/staff/admin/server/permission/grp_tree",6,"label"],["routerLink","/staff/admin/server/permission/perm_list",6,"label"],["routerLink","/staff/admin/server/config/print_template",6,"label"],["routerLink","/staff/admin/server/config/remote_account",6,"label"],["routerLink","/staff/admin/server/config/remoteauth_profile",6,"label"],["routerLink","/staff/admin/server/config/sms_carrier",6,"label"],["routerLink","/staff/admin/server/config/usr_activity_type",6,"label"],["routerLink","/staff/admin/server/config/usr_setting_type",6,"label"],["routerLink","/staff/admin/server/config/weight_assoc",6,"label"],["routerLink","/staff/admin/server/config/z3950_index_field_map",6,"label"],["routerLink","/staff/admin/server/config/z3950_source",6,"label"]],template:function(e,t){1&e&&(n.Rb(0,"eg-staff-banner",0),n.Xb(1,o),n.Qb(),n.Rb(2,"div",1),n.Rb(3,"eg-link-table",2),n.Rb(4,"eg-link-table-link",3),n.Xb(5,s),n.Qb(),n.Rb(6,"eg-link-table-link",4),n.Xb(7,d),n.Qb(),n.Rb(8,"eg-link-table-link",5),n.Xb(9,f),n.Qb(),n.Rb(10,"eg-link-table-link",6),n.Xb(11,p),n.Qb(),n.Rb(12,"eg-link-table-link",7),n.Xb(13,g),n.Qb(),n.Rb(14,"eg-link-table-link",8),n.Xb(15,u),n.Qb(),n.Rb(16,"eg-link-table-link",9),n.Xb(17,h),n.Qb(),n.Rb(18,"eg-link-table-link",10),n.Xb(19,m),n.Qb(),n.Rb(20,"eg-link-table-link",11),n.Xb(21,R),n.Qb(),n.Rb(22,"eg-link-table-link",12),n.Xb(23,v),n.Qb(),n.Rb(24,"eg-link-table-link",13),n.Xb(25,Q),n.Qb(),n.Rb(26,"eg-link-table-link",14),n.Xb(27,k),n.Qb(),n.Rb(28,"eg-link-table-link",15),n.Xb(29,_),n.Qb(),n.Rb(30,"eg-link-table-link",16),n.Xb(31,$),n.Qb(),n.Rb(32,"eg-link-table-link",17),n.Xb(33,C),n.Qb(),n.Rb(34,"eg-link-table-link",18),n.Xb(35,M),n.Qb(),n.Rb(36,"eg-link-table-link",19),n.Xb(37,y),n.Qb(),n.Rb(38,"eg-link-table-link",20),n.Xb(39,z),n.Qb(),n.Rb(40,"eg-link-table-link",21),n.Xb(41,x),n.Qb(),n.Rb(42,"eg-link-table-link",22),n.Xb(43,T),n.Qb(),n.Rb(44,"eg-link-table-link",23),n.Xb(45,S),n.Qb(),n.Rb(46,"eg-link-table-link",24),n.Xb(47,D),n.Qb(),n.Rb(48,"eg-link-table-link",25),n.Xb(49,L),n.Qb(),n.Rb(50,"eg-link-table-link",26),n.Xb(51,I),n.Qb(),n.Rb(52,"eg-link-table-link",27),n.Xb(53,O),n.Qb(),n.Rb(54,"eg-link-table-link",28),n.Xb(55,P),n.Qb(),n.Rb(56,"eg-link-table-link",29),n.Xb(57,w),n.Qb(),n.Rb(58,"eg-link-table-link",30),n.Xb(59,X),n.Qb(),n.Rb(60,"eg-link-table-link",31),n.Xb(61,A),n.Qb(),n.Rb(62,"eg-link-table-link",32),n.Xb(63,V),n.Qb(),n.Rb(64,"eg-link-table-link",33),n.Xb(65,F),n.Qb(),n.Rb(66,"eg-link-table-link",34),n.Xb(67,N),n.Qb(),n.Rb(68,"eg-link-table-link",35),n.Xb(69,E),n.Qb(),n.Rb(70,"eg-link-table-link",36),n.Xb(71,B),n.Qb(),n.Rb(72,"eg-link-table-link",37),n.Xb(73,G),n.Qb(),n.Rb(74,"eg-link-table-link",38),n.Xb(75,U),n.Qb(),n.Rb(76,"eg-link-table-link",39),n.Xb(77,K),n.Qb(),n.Rb(78,"eg-link-table-link",40),n.Xb(79,j),n.Qb(),n.Rb(80,"eg-link-table-link",41),n.Xb(81,J),n.Qb(),n.Rb(82,"eg-link-table-link",42),n.Xb(83,W),n.Qb(),n.Rb(84,"eg-link-table-link",43),n.Xb(85,H),n.Qb(),n.Rb(86,"eg-link-table-link",44),n.Xb(87,Z),n.Qb(),n.Rb(88,"eg-link-table-link",45),n.Xb(89,Y),n.Qb(),n.Rb(90,"eg-link-table-link",46),n.Xb(91,q),n.Qb(),n.Rb(92,"eg-link-table-link",47),n.Xb(93,ee),n.Qb(),n.Rb(94,"eg-link-table-link",48),n.Xb(95,te),n.Qb(),n.Rb(96,"eg-link-table-link",49),n.Xb(97,ie),n.Qb(),n.Rb(98,"eg-link-table-link",50),n.Xb(99,ae),n.Qb(),n.Rb(100,"eg-link-table-link",51),n.Xb(101,le),n.Qb(),n.Qb(),n.Qb())},directives:[r.a,b.a,b.b,c.d],encapsulation:2}),e})();var ne=i("chSS"),re=i("Mr7b"),be=i("wBwE"),oe=i("cm5s"),se=i("8PDw"),de=i("iA0r"),fe=i("YRS1"),pe=i("tNQm"),ge=i("36iw"),ue=i("UUQ6"),he=i("d4sd"),me=i("ofXK");const Re=["editDialog"],ve=["editString"],Qe=["createString"],ke=["errorString"],_e=["delConfirm"],$e=["bannerText",$localize`:␟075497a2bb086025840e6cca5292444c397f4692␟7215909774789764918:Org Unit Type Configuration`],Ce=["dialogTitle",$localize`:␟a6ecf76f074e2098ee024b6c2586a0475a2d6dd3␟6208564441860154239:Confirm Delete`,"dialogBody",$localize`:␟af50da5170edc788883c78ac94d3743b5fe56ce7␟3032042142597247072:Delete Org Unit Type ${"\ufffd0\ufffd"}:INTERPOLATION:?`];var Me,ye,ze,xe,Te,Se,De,Le,Ie,Oe,Pe,we,Xe,Ae,Ve,Fe;function Ne(e,t){1&e&&n.Vb(0,ze)}function Ee(e,t){1&e&&n.Vb(0,xe)}function Be(e,t){1&e&&n.Vb(0,Te)}function Ge(e,t){1&e&&(n.Pb(0),n.Rb(1,"div",19),n.Vb(2,Se),n.Qb(),n.Ob())}function Ue(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",20),n.Rb(1,"div",12),n.Rb(2,"div",21),n.Rb(3,"label"),n.Vb(4,De),n.Qb(),n.Qb(),n.Rb(5,"div",22),n.Rb(6,"button",23),n.fc("click",(function(){return n.Bc(e),n.hc().edit()})),n.Vb(7,Le),n.Qb(),n.Rb(8,"button",23),n.fc("click",(function(){return n.Bc(e),n.hc().addChild()})),n.Vb(9,Ie),n.Qb(),n.Rb(10,"button",24),n.fc("click",(function(){return n.Bc(e),n.hc().remove()})),n.Vb(11,Oe),n.Qb(),n.Qb(),n.Qb(),n.Rb(12,"div",12),n.Rb(13,"div",13),n.Rb(14,"label"),n.Vb(15,Pe),n.Qb(),n.Qb(),n.Rb(16,"div",25),n.Mc(17),n.Qb(),n.Qb(),n.Rb(18,"div",12),n.Rb(19,"div",13),n.Rb(20,"label"),n.Vb(21,we),n.Qb(),n.Qb(),n.Rb(22,"div",25),n.Mc(23),n.Qb(),n.Qb(),n.Rb(24,"div",12),n.Rb(25,"div",13),n.Rb(26,"label"),n.Vb(27,Xe),n.Qb(),n.Qb(),n.Rb(28,"div",25),n.Mc(29),n.Qb(),n.Qb(),n.Rb(30,"div",12),n.Rb(31,"div",13),n.Rb(32,"label"),n.Vb(33,Ae),n.Qb(),n.Qb(),n.Rb(34,"div",25),n.Mc(35),n.Qb(),n.Qb(),n.Rb(36,"div",12),n.Rb(37,"div",13),n.Rb(38,"label"),n.Vb(39,Ve),n.Qb(),n.Qb(),n.Rb(40,"div",25),n.Mc(41),n.Qb(),n.Qb(),n.Rb(42,"div",12),n.Rb(43,"div",13),n.Rb(44,"label"),n.Vb(45,Fe),n.Qb(),n.Qb(),n.Rb(46,"div",25),n.Mc(47),n.Qb(),n.Qb(),n.Qb()}if(2&e){const e=n.hc();n.xb(10),n.oc("disabled",e.selected.callerData.aout.children().length>0||e.selected.callerData.orgCount>0),n.xb(7),n.Oc(" ",e.selected.callerData.aout.name()," "),n.xb(6),n.Oc(" ",e.selected.callerData.aout.opac_label()," "),n.xb(6),n.Oc(" ","t"==e.selected.callerData.aout.can_have_users()," "),n.xb(6),n.Oc(" ","t"==e.selected.callerData.aout.can_have_vols()," "),n.xb(6),n.Oc(" ",e.selected.callerData.aout.depth()," "),n.xb(6),n.Oc(" ",e.selected.callerData.orgCount," ")}}Me=$localize`:␟ca19b3200e8911cd722f126e44d62c256cc096bf␟6096738826568910059:Org Unit Types`,ye=$localize`:␟f6e77f7d29ea48934c69189bc564b0bd55ca21df␟7342432993684201892:Selected Org Unit Type`,ze=$localize`:␟1e8ffe1a9d9b2d787357c34f606b06c8c51afc67␟7765345992997372713:Org Unit Type Update Succeeded`,xe=$localize`:␟8d99de014161833bc055ec0da1461b2d392b3dd0␟7323696227471641437:Org Unit Type Succeessfully Created`,Te=$localize`:␟35ee2bcef73e1202bda93fcec864ba2cb4eae5dd␟7235814954868940643:Org Unit Type Update Failed`,Se=$localize`:␟46ef286a658d8564b4d4724a91df8b30784fb85c␟4571007981495157662: Select an org unit type from the tree on the left. `,De=$localize`:␟c3052d7bc616f3d8d1446272359c4023e5c70ab8␟6183540804974097746:Actions for Selected: `,Le=$localize`:␟28f86ffd419b869711aa13f5e5ff54be6d70731c␟7585826646011739428:Edit`,Ie=$localize`:␟598446c20a129b03aaf9e7863a012ca1b6fa0152␟192340254091027151:Add Child`,Oe=$localize`:␟826b25211922a1b46436589233cb6f1a163d89b7␟7022070615528435141:Delete`,Pe=$localize`:␟7103dfae596fc7df3e859ddc94a442509e8b233d␟402785015655073812:Name: `,we=$localize`:␟a101ab51ffce47a8796c5b1c75b0cb355c6b08ae␟8055426476932658000:Label: `,Xe=$localize`:␟59ad126e668292fb6d5de9291a2711733a69cb0b␟1545195367375334211:Can Have Users: `,Ae=$localize`:␟8100c6ebdc5b7c8705d7a660c1785026a181df3f␟6143305734960561040:Can Have Holdings: `,Ve=$localize`:␟db7d5be91db126a13a50d57516662aff94732347␟3276004864714624017:Depth: `,Fe=$localize`:␟2233c8d1065be4d6aeb1472dda20f1193a3a8d93␟3958648483048221841:Number of Org Units Of This Type: `;const Ke=function(){return{isRequired:!0}},je=function(e,t){return{name:e,opac_label:t}};let Je=(()=>{class e{constructor(e,t,i,a,l){this.idl=e,this.org=t,this.auth=i,this.pcrud=a,this.toast=l}ngOnInit(){this.loadAoutTree()}loadAoutTree(){this.pcrud.search("aout",{depth:0},{flesh:-1,flesh_fields:{aout:["children","org_units"]}},{anonymous:!0}).subscribe(e=>this.ingestAoutTree(e))}ingestAoutTree(e){const t=e=>{if(!e)return;const i=e.org_units().length;e.org_units(null);const a=new re.b({id:e.id(),label:e.name(),callerData:{aout:e,orgCount:i}});return e.children().forEach(e=>a.children.push(t(e))),a},i=t(e);this.tree=new re.a(i)}nodeClicked(e){this.selected=e}postUpdate(e){this.org.fetchOrgs().then(t=>{e.current().then(e=>this.toast.success(e))})}edit(){this.editDialog.mode="update",this.editDialog.setRecord(this.selected.callerData.aout),this.editDialog.open().subscribe(e=>{this.postUpdate(this.editString),this.loadAoutTree()},e=>{e&&e.dismissed||this.errorString.current().then(e=>this.toast.danger(e))})}remove(){this.delConfirm.open().subscribe(e=>{e&&this.pcrud.remove(this.selected.callerData.aout).subscribe(e=>{},e=>{this.errorString.current().then(e=>this.toast.danger(e))},()=>{this.loadAoutTree(),this.selected=null,this.postUpdate(this.editString)})})}addChild(){const e=this.selected.callerData.aout,t=this.idl.create("aout");t.parent(e.id()),t.depth(Number(e.depth())+1),this.editDialog.setRecord(t),this.editDialog.mode="create",this.editDialog.open().subscribe(e=>{new re.b({id:e.id(),label:e.name(),callerData:{aout:e,orgCount:0}}),this.loadAoutTree(),this.postUpdate(this.createString)},e=>{e&&e.dismissed||this.errorString.current().then(e=>this.toast.danger(e))})}}return e.\u0275fac=function(t){return new(t||e)(n.Lb(be.a),n.Lb(oe.a),n.Lb(se.a),n.Lb(de.a),n.Lb(fe.a))},e.\u0275cmp=n.Fb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var i;1&e&&(n.Ic(Re,!0),n.Ic(ve,!0),n.Ic(Qe,!0),n.Ic(ke,!0),n.Ic(_e,!0)),2&e&&(n.yc(i=n.gc())&&(t.editDialog=i.first),n.yc(i=n.gc())&&(t.editString=i.first),n.yc(i=n.gc())&&(t.createString=i.first),n.yc(i=n.gc())&&(t.errorString=i.first),n.yc(i=n.gc())&&(t.delConfirm=i.first))},decls:29,vars:13,consts:[[6,"bannerText"],["editStrTmpl",""],[3,"template"],["editString",""],["createStrTmpl",""],["createString",""],["errorStrTmpl",""],["errorString",""],[6,"dialogTitle","dialogBody"],["delConfirm",""],["idlClass","aout","readonlyFields","depth,parent",3,"fieldOptions"],["editDialog",""],[1,"row"],[1,"col-lg-4"],[3,"tree","nodeClicked"],[1,"col-lg-8"],[1,"mb-3"],[4,"ngIf"],["class","common-form striped-even",4,"ngIf"],[1,"alert","alert-info","font-italic"],[1,"common-form","striped-even"],[1,"col-lg-3"],[1,"col-lg-9"],[1,"btn","btn-info","mr-2",3,"click"],[1,"btn","btn-warning","mr-2",3,"disabled","click"],[1,"col-lg-8","font-weight-bold"]],template:function(e,t){if(1&e&&(n.Rb(0,"eg-staff-banner",0),n.Xb(1,$e),n.Qb(),n.Kc(2,Ne,1,0,"ng-template",null,1,n.Lc),n.Mb(4,"eg-string",2,3),n.Kc(6,Ee,1,0,"ng-template",null,4,n.Lc),n.Mb(8,"eg-string",2,5),n.Kc(10,Be,1,0,"ng-template",null,6,n.Lc),n.Mb(12,"eg-string",2,7),n.Rb(14,"eg-confirm-dialog",8,9),n.Xb(16,Ce),n.Qb(),n.Mb(17,"eg-fm-record-editor",10,11),n.Rb(19,"div",12),n.Rb(20,"div",13),n.Rb(21,"h3"),n.Vb(22,Me),n.Qb(),n.Rb(23,"eg-tree",14),n.fc("nodeClicked",(function(e){return t.nodeClicked(e)})),n.Qb(),n.Qb(),n.Rb(24,"div",15),n.Rb(25,"h3",16),n.Vb(26,ye),n.Qb(),n.Kc(27,Ge,3,0,"ng-container",17),n.Kc(28,Ue,48,7,"div",18),n.Qb(),n.Qb()),2&e){const e=n.zc(3),i=n.zc(7),a=n.zc(11);n.xb(4),n.oc("template",e),n.xb(4),n.oc("template",i),n.xb(4),n.oc("template",a),n.xb(2),n.Zb(t.selected?t.selected.label:""),n.Wb(16),n.xb(3),n.oc("fieldOptions",n.vc(10,je,n.tc(8,Ke),n.tc(9,Ke))),n.xb(6),n.oc("tree",t.tree),n.xb(4),n.oc("ngIf",!t.selected),n.xb(1),n.oc("ngIf",t.selected)}},directives:[r.a,pe.a,ge.a,ue.a,he.a,me.v],encapsulation:2}),e})();var We=i("lJxs"),He=i("9rfo"),Ze=i("E45d"),Ye=i("A9LY"),qe=i("HWmW"),et=i("ayJW"),tt=i("UjDu"),it=i("3Pt+"),at=i("1kSV");const lt=["templateSelector"],ct=["tabs"],nt=["editDialog"],rt=["confirmDelete"],bt=["prefix",$localize`:␟5d5800b3c49818d083854fa979c7bc9bacc49276␟7797162943083640506:Print Template Administration`],ot=["bannerText",$localize`:␟5d5800b3c49818d083854fa979c7bc9bacc49276␟7797162943083640506:Print Template Administration`],st=["dialogTitle",$localize`:␟1a3cb13045bd527e04edaec41a17be51d3e44a63␟7122082519149762287:Confirm Delete?`,"dialogBody",$localize`:␟e4ac445e8409e0aabb75a1d95fe1d85c25db058c␟8617609013396493845:Delete Template '${"\ufffd0\ufffd"}:INTERPOLATION:'?`],dt=["labelText",$localize`:␟0ee5132a8da30e0b7f9f5c70dbc91928d17dd909␟3715596725146409911:Owner`];var ft,pt;function gt(e,t){if(1&e&&n.Mc(0),2&e){const e=t.result,i=n.hc();n.Pc(" ",e.label," (",i.getOwnerName(e.id),") ")}}function ut(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",10),n.Rb(1,"div",11),n.Rb(2,"div",12),n.Rb(3,"span",13),n.Vb(4,pt),n.Qb(),n.Qb(),n.Rb(5,"eg-combobox",19),n.fc("onChange",(function(t){return n.Bc(e),n.hc().localeOnChange(t?t.id:null)})),n.Qb(),n.Qb(),n.Qb()}if(2&e){const e=n.hc();n.xb(5),n.oc("entries",e.localeEntries)("startId",e.localeCode)}}ft=$localize`:␟467bff8643ae9525e0477374f132a6b19bedbfd5␟5610425955750546094:Template`,pt=$localize`:␟6b939b00e8481ed8aa8a24d8add7a209d7116759␟6780407325174304229:Locale`;const ht=["title",$localize`:␟467bff8643ae9525e0477374f132a6b19bedbfd5␟5610425955750546094:Template`],mt=["title",$localize`:␟594ce2a384f15551af04be3a9a46801a2f7368aa␟2317555673308529228:Sample Data`];var Rt,vt,Qt,kt,_t,$t,Ct,Mt;function yt(e,t){1&e&&(n.Rb(0,"span",41),n.Vb(1,Ct),n.Qb())}function zt(e,t){1&e&&(n.bc(0,Mt,1),n.Mb(1,"span",42),n.Yb())}function xt(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",25),n.Rb(1,"div",26),n.Rb(2,"button",27),n.fc("click",(function(){return n.Bc(e),n.hc(2).openEditDialog()})),n.Vb(3,Rt),n.Qb(),n.Rb(4,"button",28),n.fc("click",(function(){return n.Bc(e),n.hc(2).applyChanges()})),n.Vb(5,vt),n.Qb(),n.Rb(6,"button",29),n.fc("click",(function(){return n.Bc(e),n.hc(2).cloneTemplate()})),n.Vb(7,Qt),n.Qb(),n.Mb(8,"div",30),n.Rb(9,"button",31),n.fc("click",(function(){return n.Bc(e),n.hc(2).deleteTemplate()})),n.Vb(10,kt),n.Qb(),n.Kc(11,yt,2,0,"span",32),n.Qb(),n.Qb(),n.Rb(12,"div",33),n.Rb(13,"div",34),n.Rb(14,"h4"),n.bc(15,Mt),n.Kc(16,zt,2,0,"span",35),n.Yb(),n.Qb(),n.Rb(17,"textarea",36),n.fc("ngModelChange",(function(t){n.Bc(e);const i=n.hc(2);return i.template.template(t),i.template.ischanged(!0)})),n.Mc(18,"         "),n.Qb(),n.Qb(),n.Rb(19,"div",34),n.Rb(20,"h4"),n.Vb(21,_t),n.Qb(),n.Mb(22,"div",37),n.Rb(23,"h4",38),n.Vb(24,$t),n.Qb(),n.Rb(25,"div",39),n.Rb(26,"pre",40),n.Mc(27),n.Qb(),n.Qb(),n.Qb(),n.Qb()}if(2&e){const e=n.hc(2);n.xb(11),n.oc("ngIf",e.invalidJson),n.xb(5),n.oc("ngIf","f"==e.template.active()),n.Zb(e.template.label())(e.getOwnerName(e.template.id())),n.Wb(15),n.xb(1),n.pc("rows",e.templateRowCount()),n.oc("ngModel",e.template.template()),n.xb(10),n.Nc(e.compiledContent)}}function Tt(e,t){if(1&e){const e=n.Sb();n.Rb(0,"textarea",43),n.fc("ngModelChange",(function(t){return n.Bc(e),n.hc(2).sampleJson=t})),n.Mc(1,"      "),n.Qb()}if(2&e){const e=n.hc(2);n.oc("ngModel",e.sampleJson)}}function St(e,t){if(1&e){const e=n.Sb();n.Rb(0,"ngb-tabset",20,21),n.fc("tabChange",(function(t){return n.Bc(e),n.hc().onTabChange(t)})),n.Rb(2,"ngb-tab",22),n.Xb(3,ht),n.Kc(4,xt,28,7,"ng-template",23),n.Qb(),n.Rb(5,"ngb-tab",24),n.Xb(6,mt),n.Kc(7,Tt,2,1,"ng-template",23),n.Qb(),n.Qb()}}Rt=$localize`:␟1b8b754e461202f09e9de3e674318b0e75db33ef␟7153884444904604924: Edit Template Attributes `,vt=$localize`:␟4048e925520301de58f17cca5ce3a04972f014d1␟342889694650315526: Save Template Changes `,Qt=$localize`:␟b6c52287989050d181c4595d1e7663ee551871f4␟1833580215304818477: Clone Template `,kt=$localize`:␟c6b2e0a4954589c457ee1b7bb1e46c5462720cb1␟1940066143595857230: Delete Template `,_t=$localize`:␟3e2a583f531f7dd9f089f68a6968e444c372c3e8␟1295614462098694869:Preview`,$t=$localize`:␟a04420c9cce9677bd38bbef82ef64f0aa03fb91a␟4649282993034491118:Compiled Content`,Ct=$localize`:␟46b9eed9c4dd73f6daa47997bd237dc3979210fe␟6164093253661885212: Invalid Sample JSON! `,Mt=$localize`:␟5fe121e76a644e63f0f8f9fdc158d16da6ce8dea␟6216805503462970213: Template for "${"\ufffd0\ufffd"}:INTERPOLATION: (${"\ufffd1\ufffd"}:INTERPOLATION_1:)" ${"\ufffd*16:1\ufffd\ufffd#1:1\ufffd"}:START_TAG_SPAN: (Inactive) ${"\ufffd/#1:1\ufffd\ufffd/*16:1\ufffd"}:CLOSE_TAG_SPAN:`;const Dt=function(){return["ADMIN_PRINT_TEMPLATE"]};let Lt=(()=>{class e{constructor(e,t,i,a,l,c,n,r){this.route=e,this.idl=t,this.org=i,this.pcrud=a,this.auth=l,this.locale=c,this.printer=n,this.samples=r,this.invalidJson=!1,this.templateCache={},this.sampleData={patron_address:{},holds_for_bib:{}},this.entries=[],this.localeEntries=[]}ngOnInit(){this.initialOrg=this.auth.user().ws_ou(),this.selectedOrgs=[this.initialOrg],this.localeCode=this.locale.currentLocaleCode(),this.locale.supportedLocales().subscribe(e=>this.localeEntries.push({id:e.code(),label:e.name()})),this.setTemplateInfo().subscribe(),this.fleshSampleData()}fleshSampleData(){const e={};["au","ac","aua","ahr","acp","mwde"].forEach(t=>e[t]=this.idl.toHash(this.samples.listOfThings(t,10)));const t=[{request_time:this.samples.randomDate().toISOString(),ucard_barcode:e.ac[0].barcode,usr_family_name:e.au[0].family_name,usr_alias:e.au[0].alias,cp_barcode:e.acp[0].barcode},{request_time:this.samples.randomDate().toISOString(),ucard_barcode:e.ac[1].barcode,usr_family_name:e.au[1].family_name,usr_alias:e.au[1].alias,cp_barcode:e.acp[1].barcode}];this.sampleData.patron_address={patron:e.au[0],address:e.aua[0]},this.sampleData.holds_for_bib=t}onTabChange(e){"template"===e.nextId&&this.refreshPreview()}container(){return document.getElementById("template-preview-pane")}orgOnChange(e){this.sameIds(this.selectedOrgs,e.orgIds)||(this.selectedOrgs=e.orgIds,this.setTemplateInfo().subscribe())}sameIds(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!t.includes(e[i]))return!1;return!0}localeOnChange(e){e&&(this.localeCode=e,this.setTemplateInfo().subscribe())}setTemplateInfo(){return this.entries=[],this.template=null,this.templateSelector.applyEntryId(null),this.compiledContent="",this.pcrud.search("cpt",{owner:this.selectedOrgs,locale:this.localeCode},{select:{cpt:["id","label","owner"]},order_by:{cpt:"label"}}).pipe(Object(We.a)(e=>(this.templateCache[e.id()]=e,this.entries.push({id:e.id(),label:e.label()}),e)))}getOwnerName(e){return this.templateCache[e]?this.org.get(this.templateCache[e].owner()).shortname():""}selectTemplate(e,t){if(null===e)return this.template=null,void(this.compiledContent="");this.pcrud.retrieve("cpt",e).subscribe(i=>{this.template=this.templateCache[e]=i,t&&(this.templateSelector.hasEntry(e)||this.templateSelector.addEntry({id:e,label:i.label()}),this.templateSelector.applyEntryId(e));const a=this.sampleData[i.name()];a&&(this.sampleJson=JSON.stringify(a,null,2),this.refreshPreview())})}templateRowCount(){return this.template&&this.template.template()?Math.max(25,this.template.template().split(/\n/).length+2):25}refreshPreview(){if(!this.sampleJson)return;let e;this.compiledContent="";try{e=JSON.parse(this.sampleJson),this.invalidJson=!1}catch(t){this.invalidJson=!0}this.printer.compileRemoteTemplate({templateId:this.template.id(),contextData:e,printContext:"default"}).then(e=>{this.compiledContent=e.content,this.container()&&(this.container().innerHTML="text/html"===e.contentType?e.content:"<pre>"+e.content+"</pre>")})}applyChanges(){this.container().innerHTML="",this.pcrud.update(this.template).toPromise().then(()=>this.refreshPreview())}openEditDialog(){this.editDialog.setRecord(this.template),this.editDialog.mode="update",this.editDialog.open({size:"lg"}).toPromise().then(e=>{if(void 0!==e){const e=this.template.id();this.setTemplateInfo().toPromise().then(t=>this.selectTemplate(e))}})}cloneTemplate(){const e=this.idl.clone(this.template);e.id(null),e.active(!1),e.owner(null),this.editDialog.setRecord(e),this.editDialog.mode="create",this.editDialog.open({size:"lg"}).toPromise().then(e=>{void 0!==e&&this.setTemplateInfo().toPromise().then(t=>this.selectTemplate(e.id(),!0))})}deleteTemplate(){this.confirmDelete.open().subscribe(e=>{e&&this.pcrud.remove(this.template).toPromise().then(e=>{this.setTemplateInfo().toPromise().then(e=>this.selectTemplate(null))})})}}return e.\u0275fac=function(t){return new(t||e)(n.Lb(c.a),n.Lb(be.a),n.Lb(oe.a),n.Lb(de.a),n.Lb(se.a),n.Lb(Ye.a),n.Lb(Ze.a),n.Lb(qe.a))},e.\u0275cmp=n.Fb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var i;1&e&&(n.Ic(lt,!0),n.Sc(ct,!0),n.Ic(nt,!0),n.Ic(rt,!0)),2&e&&(n.yc(i=n.gc())&&(t.templateSelector=i.first),n.yc(i=n.gc())&&(t.tabs=i.first),n.yc(i=n.gc())&&(t.editDialog=i.first),n.yc(i=n.gc())&&(t.confirmDelete=i.first))},decls:25,vars:9,consts:[[6,"prefix"],[6,"bannerText"],["idlClass","cpt","hiddenFields","template",3,"preloadLinkedValues"],["editDialog",""],[6,"dialogTitle","dialogBody"],["confirmDelete",""],[1,"row","mb-3"],[1,"col-lg-4"],["ngModel","",3,"selectedOrgId","limitPerms","ngModelChange",6,"labelText"],["orgFamily","ngModel"],[1,"col-lg-3"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["entryTemplate",""],[3,"entries","displayTemplate","onChange"],["templateSelector",""],["class","col-lg-3",4,"ngIf"],[3,"tabChange",4,"ngIf"],[3,"entries","startId","onChange"],[3,"tabChange"],["tabs",""],["id","template",6,"title"],["ngbTabContent",""],["id","data",6,"title"],[1,"row"],[1,"col-lg-12","mt-3","d-flex"],[1,"btn","btn-info",3,"click"],[1,"btn","btn-success","ml-2",3,"click"],[1,"btn","btn-info","ml-2",3,"click"],[1,"flex-1"],[1,"btn","btn-danger","ml-2",3,"click"],["class","badge badge-danger ml-2",4,"ngIf"],[1,"row","mt-2"],[1,"col-lg-6"],["class","pl-2 text-warning",4,"ngIf"],["spellcheck","false",1,"form-control",3,"rows","ngModel","ngModelChange"],["id","template-preview-pane",1,"border","border-dark","w-100"],[1,"mt-3"],[1,"border","border-dark","w-100"],[1,"p-1"],[1,"badge","badge-danger","ml-2"],[1,"pl-2","text-warning"],["rows","20","spellcheck","false",1,"form-control",3,"ngModel","ngModelChange"]],template:function(e,t){if(1&e&&(n.Rb(0,"eg-title",0),n.Xb(1,bt),n.Qb(),n.Rb(2,"eg-staff-banner",1),n.Xb(3,ot),n.Qb(),n.Mb(4,"eg-fm-record-editor",2,3),n.Rb(6,"eg-confirm-dialog",4,5),n.Xb(8,st),n.Qb(),n.Rb(9,"div",6),n.Rb(10,"div",7),n.Rb(11,"eg-org-family-select",8,9),n.Xb(13,dt),n.fc("ngModelChange",(function(e){return t.orgOnChange(e)})),n.Qb(),n.Qb(),n.Rb(14,"div",10),n.Rb(15,"div",11),n.Rb(16,"div",12),n.Rb(17,"span",13),n.Vb(18,ft),n.Qb(),n.Qb(),n.Kc(19,gt,1,2,"ng-template",null,14,n.Lc),n.Rb(21,"eg-combobox",15,16),n.fc("onChange",(function(e){return t.selectTemplate(e?e.id:null)})),n.Qb(),n.Qb(),n.Qb(),n.Kc(23,ut,6,2,"div",17),n.Qb(),n.Kc(24,St,8,0,"ngb-tabset",18)),2&e){const e=n.zc(20);n.xb(4),n.oc("preloadLinkedValues",!0),n.xb(2),n.Zb(t.template?t.template.label():""),n.Wb(8),n.xb(5),n.oc("selectedOrgId",t.initialOrg)("limitPerms",n.tc(8,Dt)),n.xb(10),n.oc("entries",t.entries)("displayTemplate",e),n.xb(2),n.oc("ngIf",t.localeEntries.length>0),n.xb(1),n.oc("ngIf",t.template)}},directives:[et.a,r.a,ue.a,ge.a,tt.a,it.t,it.w,He.a,me.v,at.W,at.T,at.U,it.c],encapsulation:2}),e})();var It,Ot=i("EY2u"),Pt=i("Cfvw"),wt=i("z6cu"),Xt=i("rRT/");It=$localize`:␟e3b8c1714ca2953c4f8d60e5c377dea8ef41827d␟3146402886459848448:Add New Permission Group Mapping`;const At=["aria-label",$localize`:␟f4e529ae5ffd73001d1ff4bbdeeb0a72e342e5c8␟7819314041543176992:Close`];var Vt,Ft,Nt,Et,Bt,Gt;function Ut(e,t){if(1&e&&(n.Rb(0,"option",17),n.Mc(1),n.Qb()),2&e){const e=t.$implicit;n.pc("value",e),n.xb(1),n.Nc(e)}}function Kt(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",1),n.Rb(1,"h4",2),n.Vb(2,It),n.Qb(),n.Rb(3,"button",3),n.Xb(4,At),n.fc("click",(function(){return n.Bc(e),n.hc().close()})),n.Rb(5,"span",4),n.Mc(6,"\xd7"),n.Qb(),n.Qb(),n.Qb(),n.Rb(7,"div",5),n.Rb(8,"div",6),n.Rb(9,"div",7),n.Vb(10,Vt),n.Qb(),n.Rb(11,"div",8),n.Mc(12),n.Qb(),n.Qb(),n.Rb(13,"div",9),n.Rb(14,"div",7),n.Vb(15,Ft),n.Qb(),n.Rb(16,"div",8),n.Rb(17,"eg-combobox",10),n.fc("onChange",(function(t){return n.Bc(e),n.hc().perm=t?t.id:null})),n.Qb(),n.Qb(),n.Qb(),n.Rb(18,"div",9),n.Rb(19,"div",7),n.Vb(20,Nt),n.Qb(),n.Rb(21,"div",8),n.Rb(22,"select",11),n.fc("ngModelChange",(function(t){return n.Bc(e),n.hc().depth=t})),n.Kc(23,Ut,2,2,"option",12),n.Qb(),n.Qb(),n.Qb(),n.Rb(24,"div",9),n.Rb(25,"div",7),n.Vb(26,Et),n.Qb(),n.Rb(27,"div",8),n.Rb(28,"input",13),n.fc("ngModelChange",(function(t){return n.Bc(e),n.hc().grantable=t})),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(29,"div",14),n.Rb(30,"button",15),n.fc("click",(function(){return n.Bc(e),n.hc().create()})),n.Vb(31,Bt),n.Qb(),n.Rb(32,"button",16),n.fc("click",(function(){return n.Bc(e),n.hc().close()})),n.Vb(33,Gt),n.Qb(),n.Qb()}if(2&e){const e=n.hc();n.xb(12),n.Nc(e.permGroup.name()),n.xb(5),n.oc("asyncDataSource",e.permEntries),n.xb(5),n.oc("ngModel",e.depth),n.xb(1),n.oc("ngForOf",e.orgDepths),n.xb(5),n.oc("ngModel",e.grantable)}}Vt=$localize`:␟c56172c052e25319c3ef7f42547587a39e522ae0␟2810657391104048337:Permission Group`,Ft=$localize`:␟93834f7d0df9f0cb4460518fa05afb50a2f36126␟1947349693143392425:New Permission`,Nt=$localize`:␟49dfba177776c2ff7e647c7d0efe61a8c9513e27␟6857110332010752994:Depth`,Et=$localize`:␟92bfa2b9bb6efd584ae29d213ac6dca101699864␟8975257821104162697:Grantable`,Bt=$localize`:␟70a67e04629f6d412db0a12d51820b480788d795␟5674286808255988565:Create`,Gt=$localize`:␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`;let jt=(()=>{class e extends Xt.a{constructor(e,t,i){super(i),this.idl=e,this.pcrud=t,this.modal=i}ngOnInit(){this.depth=0,this.grantable=!1,this.permissions=this.permissions.sort((e,t)=>e.code()<t.code()?-1:1),this.onOpen$.subscribe(()=>this.trimPermissions()),this.permEntries=e=>{if(null==e)return Object(Ot.b)();e=(""+e).toLowerCase();const t=[];return this.trimmedPerms.forEach(i=>{(i.code().toLowerCase().includes(e)||(i.description()||"").toLowerCase().includes(e))&&t.push({id:i.id(),label:i.code()})}),Object(Pt.a)(t)}}trimPermissions(){this.trimmedPerms=[],this.permissions.forEach(e=>{for(let t=0;t<this.permMaps.length;t++){const i=this.permMaps[t];if(i.perm().id()===e.id()&&i.grp().id()===this.permGroup.id())return}this.trimmedPerms.push(e)})}create(){const e=this.idl.create("pgpm");e.grp(this.permGroup.id()),e.perm(this.perm),e.grantable(this.grantable?"t":"f"),e.depth(this.depth),this.pcrud.create(e).subscribe(e=>this.close(e),e=>Object(wt.a)(e))}}return e.\u0275fac=function(t){return new(t||e)(n.Lb(be.a),n.Lb(de.a),n.Lb(at.s))},e.\u0275cmp=n.Fb({type:e,selectors:[["eg-perm-group-map-dialog"]],inputs:{permGroup:"permGroup",permissions:"permissions",permMaps:"permMaps",orgDepths:"orgDepths"},features:[n.ub],decls:2,vars:0,consts:[["dialogContent",""],[1,"modal-header","bg-info"],[1,"modal-title"],["type","button",1,"close",3,"click",6,"aria-label"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col-lg-5"],[1,"col-lg-7"],[1,"row","mt-1","pt-1"],[3,"asyncDataSource","onChange"],[1,"p-1",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","checkbox",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],[3,"value"]],template:function(e,t){1&e&&n.Kc(0,Kt,34,5,"ng-template",null,0,n.Lc)},directives:[He.a,it.F,it.t,it.w,me.u,it.a,it.y,it.I],encapsulation:2}),e})();var Jt=i("TxlL"),Wt=i("LZHW"),Ht=function(e,t,i,a){return new(i||(i=Promise))((function(l,c){function n(e){try{b(a.next(e))}catch(t){c(t)}}function r(e){try{b(a.throw(e))}catch(t){c(t)}}function b(e){var t;e.done?l(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(n,r)}b((a=a.apply(e,t||[])).next())}))};const Zt=["editDialog"],Yt=["delConfirm"],qt=["successString"],ei=["createString"],ti=["errorString"],ii=["successMapString"],ai=["createMapString"],li=["errorMapString"],ci=["addMappingDialog"],ni=["loadProgress"],ri=["bannerText",$localize`:␟f437c014ab4ee067260c79e6ec5ef397b07ede57␟671376137657642478:Permission Group Configuration`],bi=["text",$localize`:␟3c56ae5b8eea9c370c0b6ecfbc7779b78e2570af␟185726253776450084:Permission Group Mapping Added`],oi=["text",$localize`:␟7cc4486e0fbfd7541f28425e454b7e5f55d6ffb0␟5775680734572935193:Permission Group Update Succeeded`],si=["text",$localize`:␟21645c3c210a13a94cfc0079319011200e8d5339␟7494513077787356921:Permission Group Update Failed`],di=["text",$localize`:␟3c56ae5b8eea9c370c0b6ecfbc7779b78e2570af␟185726253776450084:Permission Group Mapping Added`],fi=["text",$localize`:␟4bac4f2c49300dafd1de841813ee442da8e87454␟9189451608536715246:Permission Group Mapping Update Succeeded`],pi=["text",$localize`:␟7976c6754da2369e643ebda4c1b3eff069bcb96f␟3544505693546561504:Permission Group Mapping Update Failed`],gi=["dialogTitle",$localize`:␟a6ecf76f074e2098ee024b6c2586a0475a2d6dd3␟6208564441860154239:Confirm Delete`,"dialogBody",$localize`:␟8ebff005d62068952edb0354d11cb29e42ac6f91␟342987051116252430:Delete Permission Group ${"\ufffd0\ufffd"}:INTERPOLATION:?`];var ui,hi,mi;function Ri(e,t){1&e&&(n.Pb(0),n.Rb(1,"div",14),n.Rb(2,"div",22),n.Mb(3,"eg-progress-inline",null,23),n.Qb(),n.Qb(),n.Ob())}function vi(e,t){if(1&e&&(n.Pb(0),n.Rb(1,"div",21),n.Vb(2,mi),n.Qb(),n.Kc(3,Ri,5,0,"ng-container",19),n.Ob()),2&e){const e=n.hc();n.xb(3),n.oc("ngIf",e.loading)}}ui=$localize`:␟06b5190d8ef6f193f51aba909e208cb7f772064f␟3214560260966945675:Permission Groups`,hi=$localize`:␟50b0db16e3b3f3f6cce0517cbafa42fe415c8c92␟2009301642939574307:Selected Permission Group`,mi=$localize`:␟c942b21c0f8ae191a6a6edbb09e19fbba5d3ee8d␟151899692711210594: Select a permission group from the tree on the left. `;const Qi=["title",$localize`:␟b4d633a217cf479b20ee4a71616e9625a975f092␟273427060735153772:Group Details`],ki=["title",$localize`:␟379881910a7ebe43f5c68eee92de2f0adee9691f␟1864672563853172425:Group Permissions`];var _i,$i,Ci,Mi,yi,zi,xi,Ti,Si,Di,Li,Ii;function Oi(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",14),n.Rb(1,"div",15),n.Rb(2,"label"),n.Vb(3,_i),n.Qb(),n.Qb(),n.Rb(4,"div",17),n.Rb(5,"button",28),n.fc("click",(function(){return n.Bc(e),n.hc(2).edit()})),n.Vb(6,$i),n.Qb(),n.Rb(7,"button",28),n.fc("click",(function(){return n.Bc(e),n.hc(2).addChild()})),n.Vb(8,Ci),n.Qb(),n.Rb(9,"button",29),n.fc("click",(function(){return n.Bc(e),n.hc(2).remove()})),n.Vb(10,Mi),n.Qb(),n.Qb(),n.Qb(),n.Rb(11,"div",14),n.Rb(12,"div",30),n.Rb(13,"label"),n.Vb(14,yi),n.Qb(),n.Qb(),n.Rb(15,"div",31),n.Mc(16),n.Qb(),n.Qb(),n.Rb(17,"div",14),n.Rb(18,"div",30),n.Rb(19,"label"),n.Vb(20,zi),n.Qb(),n.Qb(),n.Rb(21,"div",31),n.Mc(22),n.Qb(),n.Qb(),n.Rb(23,"div",14),n.Rb(24,"div",30),n.Rb(25,"label"),n.Vb(26,xi),n.Qb(),n.Qb(),n.Rb(27,"div",31),n.Mc(28),n.Qb(),n.Qb(),n.Rb(29,"div",14),n.Rb(30,"div",30),n.Rb(31,"label"),n.Vb(32,Ti),n.Qb(),n.Qb(),n.Rb(33,"div",31),n.Mc(34),n.Qb(),n.Qb(),n.Rb(35,"div",14),n.Rb(36,"div",30),n.Rb(37,"label"),n.Vb(38,Si),n.Qb(),n.Qb(),n.Rb(39,"div",31),n.Mc(40),n.Qb(),n.Qb(),n.Rb(41,"div",14),n.Rb(42,"div",30),n.Rb(43,"label"),n.Vb(44,Di),n.Qb(),n.Qb(),n.Rb(45,"div",31),n.Mc(46),n.Qb(),n.Qb()}if(2&e){const e=n.hc(2);n.xb(16),n.Oc(" ",e.selected.callerData.name()," "),n.xb(6),n.Oc(" ",e.selected.callerData.description()," "),n.xb(6),n.Oc(" ",e.selected.callerData.perm_interval()," "),n.xb(6),n.Oc(" ",e.selected.callerData.application_perm()," "),n.xb(6),n.Oc(" ",e.selected.callerData.hold_priority()," "),n.xb(6),n.Oc(" ","t"==e.selected.callerData.usergroup()," ")}}_i=$localize`:␟c3052d7bc616f3d8d1446272359c4023e5c70ab8␟6183540804974097746:Actions for Selected: `,$i=$localize`:␟28f86ffd419b869711aa13f5e5ff54be6d70731c␟7585826646011739428:Edit`,Ci=$localize`:␟598446c20a129b03aaf9e7863a012ca1b6fa0152␟192340254091027151:Add Child`,Mi=$localize`:␟826b25211922a1b46436589233cb6f1a163d89b7␟7022070615528435141:Delete`,yi=$localize`:␟7103dfae596fc7df3e859ddc94a442509e8b233d␟402785015655073812:Name: `,zi=$localize`:␟e6c3861796ecd9b8d67af1af8781df03121e5225␟4678185361290766066:Description: `,xi=$localize`:␟d00c6518892b5c58a4453e1012d70c73b6f7de8d␟2075133315405916443:User Expiration Interval: `,Ti=$localize`:␟1053ad7c2a6698a1ce1398ca026093e5a1d88583␟7211135069229490175:Application Permission: `,Si=$localize`:␟247c858dd361ee07b387ddc97193fd50111bdff6␟6280158719718478340:Hold Priority: `,Di=$localize`:␟3b737a63a9c1e3725956d963a222f9ea91aa3443␟789486440819399578:User Group?: `,Li=$localize`:␟7fd63e2e2013c746641b84cda258ab242f651f14␟2871515045369372945: Apply Changes `,Ii=$localize`:␟71d532fd27a09e0f4fc30590c6573c29e4197b74␟447231655403759926: Add New Mapping `;const Pi=["placeholder",$localize`:␟25925fc5826bc5b3eeae7c45b08b0ed74b9e2954␟9209781328340965816:Filter...`];var wi,Xi,Ai,Vi,Fi,Ni,Ei;wi=$localize`:␟6b8dd4739dd1768b580257c824fc0f198a99d0f2␟2214133476588340773: Clear `,Xi=$localize`:␟70f45880fce6ac5d8e468e25e82aefbba8098cfe␟7314814725704332646:Permissions`,Ai=$localize`:␟4c90059afafb7e160384d9f512797c95bb95c6dc␟8623978917681527907:Group`,Vi=$localize`:␟49dfba177776c2ff7e647c7d0efe61a8c9513e27␟6857110332010752994:Depth`,Fi=$localize`:␟350ee30144d2e1b1e70ff52607bb7fc06f68a46a␟2116450126592887484:Grantable?`,Ni=$localize`:␟f716e0d613b06f407449ca588258d6590fd858c0␟5210270493533766316:Delete?`,Ei=$localize`:␟7fd63e2e2013c746641b84cda258ab242f651f14␟2871515045369372945: Apply Changes `;const Bi=["title",$localize`:␟0a6e11652c0df15e9e90905ba5fcdfd75e17194c␟5985905082632456998:${"\ufffd0\ufffd"}:INTERPOLATION:`];var Gi;function Ui(e,t){if(1&e){const e=n.Sb();n.Pb(0),n.Rb(1,"div",30),n.Rb(2,"button",45),n.fc("click",(function(){n.Bc(e);const t=n.hc().$implicit;return n.hc(3).selectGroup(t.grp().id())})),n.Mc(3),n.Qb(),n.Qb(),n.Rb(4,"div",46),n.Mc(5),n.Qb(),n.Rb(6,"div",47),n.Rb(7,"div",48),n.Mb(8,"eg-bool",49),n.Qb(),n.Qb(),n.Rb(9,"div",50),n.Vb(10,Gi),n.Qb(),n.Ob()}if(2&e){const e=n.hc().$implicit;n.xb(3),n.Oc(" ",e.grp().name()," "),n.xb(2),n.Nc(e.depth()),n.xb(3),n.oc("value","t"==e.grantable())}}Gi=$localize`:␟f210c6519c9029a3e99649e923bff50426164eaf␟316989632590100237:Inherited`;const Ki=["title",$localize`:␟350ee30144d2e1b1e70ff52607bb7fc06f68a46a␟2116450126592887484:Grantable?`],ji=["title",$localize`:␟f8ddf7c37989ca832029aae210178ef488b3cc6c␟2543642026613072438:Delete Mapping`];function Ji(e,t){if(1&e&&(n.Rb(0,"option",49),n.Mc(1),n.Qb()),2&e){const e=t.$implicit;n.pc("value",e),n.xb(1),n.Nc(e)}}function Wi(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",30),n.Mc(1),n.Qb(),n.Rb(2,"div",39),n.Rb(3,"select",51),n.fc("ngModelChange",(function(t){n.Bc(e);const i=n.hc().$implicit;return i.depth(t),i.ischanged(!0)})),n.Kc(4,Ji,2,2,"option",52),n.Qb(),n.Qb(),n.Rb(5,"div",47),n.Rb(6,"div",53),n.Rb(7,"input",54),n.Xb(8,Ki),n.fc("ngModelChange",(function(t){n.Bc(e);const i=n.hc().$implicit;return i.grantable(t?"t":"f"),i.ischanged(!0)})),n.Qb(),n.Qb(),n.Qb(),n.Rb(9,"div",47),n.Rb(10,"div",55),n.Rb(11,"input",54),n.Xb(12,ji),n.fc("ngModelChange",(function(t){return n.Bc(e),n.hc().$implicit.isdeleted(t)})),n.Qb(),n.Qb(),n.Qb()}if(2&e){const e=n.hc().$implicit,t=n.hc(3);n.xb(1),n.Nc(e.grp().name()),n.xb(2),n.oc("ngModel",e.depth()),n.xb(1),n.oc("ngForOf",t.orgDepths),n.xb(3),n.oc("ngModel","t"==e.grantable()),n.xb(4),n.oc("ngModel",e.isdeleted())}}const Hi=function(e){return{"bg-warning":e}};function Zi(e,t){if(1&e&&(n.Rb(0,"div",41),n.Rb(1,"div",38),n.Rb(2,"span",42),n.Xb(3,Bi),n.Mc(4),n.Qb(),n.Qb(),n.Kc(5,Ui,11,3,"ng-container",43),n.Kc(6,Wi,13,5,"ng-template",null,44,n.Lc),n.Qb()),2&e){const e=t.$implicit,i=n.zc(7),a=n.hc(3);n.oc("ngClass",n.uc(5,Hi,e.isdeleted())),n.xb(2),n.Zb(e.perm().description()||e.perm().code()),n.Wb(3),n.xb(2),n.Oc(" ",e.perm().code()," "),n.xb(1),n.oc("ngIf",a.permIsInherited(e))("ngIfElse",i)}}function Yi(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div",32),n.Rb(1,"button",33),n.fc("click",(function(){return n.Bc(e),n.hc(2).applyChanges()})),n.Vb(2,Li),n.Qb(),n.Rb(3,"button",34),n.fc("click",(function(){return n.Bc(e),n.hc(2).openAddDialog()})),n.Vb(4,Ii),n.Qb(),n.Rb(5,"div",15),n.Rb(6,"input",35),n.Xb(7,Pi),n.fc("ngModelChange",(function(t){return n.Bc(e),n.hc(2).filterText=t})),n.Qb(),n.Qb(),n.Rb(8,"button",36),n.fc("click",(function(){return n.Bc(e),n.hc(2).filterText=""})),n.Vb(9,wi),n.Qb(),n.Qb(),n.Rb(10,"div",37),n.Rb(11,"div",38),n.Vb(12,Xi),n.Qb(),n.Rb(13,"div",30),n.Vb(14,Ai),n.Qb(),n.Rb(15,"div",39),n.Vb(16,Vi),n.Qb(),n.Rb(17,"div",39),n.Vb(18,Fi),n.Qb(),n.Rb(19,"div",39),n.Vb(20,Ni),n.Qb(),n.Qb(),n.Kc(21,Zi,8,7,"div",40),n.Rb(22,"div",32),n.Rb(23,"button",33),n.fc("click",(function(){return n.Bc(e),n.hc(2).applyChanges()})),n.Vb(24,Ei),n.Qb(),n.Qb()}if(2&e){const e=n.hc(2);n.xb(1),n.oc("disabled",!e.changesPending()),n.xb(5),n.oc("ngModel",e.filterText),n.xb(15),n.oc("ngForOf",e.groupPermMaps()),n.xb(2),n.oc("disabled",!e.changesPending())}}function qi(e,t){1&e&&(n.Rb(0,"div",24),n.Rb(1,"ngb-tabset"),n.Rb(2,"ngb-tab",25),n.Xb(3,Qi),n.Kc(4,Oi,47,6,"ng-template",26),n.Qb(),n.Rb(5,"ngb-tab",27),n.Xb(6,ki),n.Kc(7,Yi,25,4,"ng-template",26),n.Qb(),n.Qb(),n.Qb())}const ea=[{path:"splash",component:ce},{path:"actor/org_unit_type",component:Je},{path:"config/floating_group",loadChildren:()=>i.e(27).then(i.bind(null,"FN4W")).then(e=>e.FloatingGroupModule)},{path:"config/print_template",component:Lt},{path:"permission/grp_tree",component:(()=>{class e{constructor(e,t,i,a,l){this.idl=e,this.org=t,this.auth=i,this.pcrud=a,this.toast=l,this.permissions=[],this.permEntries=[],this.permMaps=[],this.permIdMap={}}ngOnInit(){return Ht(this,void 0,void 0,(function*(){return this.loading=!0,yield this.loadPgtTree(),this.loadProgress.increment(),yield this.loadPermissions(),this.loadProgress.increment(),yield this.loadPermMaps(),this.loadProgress.increment(),this.setOrgDepths(),this.loadProgress.increment(),this.loading=!1,Promise.resolve()}))}setOrgDepths(){const e=this.org.typeList().map(e=>Number(e.depth())),t=[];e.forEach(e=>{t.includes(e)||t.push(e)}),this.orgDepths=t.sort()}groupPermMaps(){if(!this.selected)return[];let e=this.inheritedPermissions();return e=e.concat(this.permMaps.filter(e=>+e.grp().id()==+this.selected.id)),e=this.applyFilter(e),e.sort((e,t)=>e.perm().code()<t.perm().code()?-1:1)}applyFilter(e){if(!this.filterText)return e;const t=this.filterText.toLowerCase().split(" ");return e.filter(e=>{const i=e.perm().description()||"",a=e.perm().code().toLowerCase()+" "+i.toLowerCase();for(let l=0;l<t.length;l++){const e=t[l];if(e&&-1===a.indexOf(e))return!1}return!0})}loadPgtTree(){return Ht(this,void 0,void 0,(function*(){return this.pcrud.search("pgt",{parent:null},{flesh:-1,flesh_fields:{pgt:["children"]}}).pipe(Object(We.a)(e=>this.ingestPgtTree(e))).toPromise()}))}loadPermissions(){return Ht(this,void 0,void 0,(function*(){return this.pcrud.retrieveAll("ppl",{order_by:{ppl:"code"}}).pipe(Object(We.a)(e=>{this.loadProgress.increment(),this.permissions.push(e),this.permEntries.push({id:e.code(),label:e.code()}),this.permissions.forEach(e=>this.permIdMap[+e.id()]=e)})).toPromise()}))}loadPermMaps(){return Ht(this,void 0,void 0,(function*(){return this.permMaps=[],this.pcrud.retrieveAll("pgpm",{},{fleshSelectors:!0,authoritative:!0}).pipe(Object(We.a)(e=>{this.loadProgress&&this.loadProgress.increment(),this.permMaps.push(e)})).toPromise()}))}fmEditorOptions(){return{application_perm:{customValues:this.permEntries}}}ingestPgtTree(e){const t=e=>{if(!e)return;const i=new re.b({id:e.id(),label:e.name(),callerData:e});return e.children().sort((e,t)=>e.name()<t.name()?-1:1).forEach(e=>i.children.push(t(e))),i},i=t(e);this.tree=new re.a(i)}groupById(e){return this.tree.findNode(e).callerData}permById(e){return this.permIdMap[e]}permIsInherited(e){return e.grp().id()!==this.selected.callerData.id()}inheritedPermissions(){let e=[],t=this.tree.findNode(this.selected.callerData.parent());for(;t;)e=e.concat(this.permMaps.filter(e=>+e.grp().id()==+t.id)),t=this.tree.findNode(t.callerData.parent());return e}nodeClicked(e){this.selected=e,this.permMaps.forEach(e=>{e.isnew(!1),e.ischanged(!1),e.isdeleted(!1)})}edit(){this.editDialog.mode="update",this.editDialog.setRecord(this.selected.callerData),this.editDialog.open({size:"lg"}).subscribe(e=>{this.successString.current().then(e=>this.toast.success(e))},e=>{this.errorString.current().then(e=>this.toast.danger(e))})}remove(){this.delConfirm.open().subscribe(e=>{e&&this.pcrud.remove(this.selected.callerData).subscribe(e=>{},e=>{this.errorString.current().then(e=>this.toast.danger(e))},()=>{this.tree.removeNode(this.selected),this.selected=null,this.successString.current().then(e=>this.toast.success(e))})})}addChild(){const e=this.selected,t=e.callerData,i=this.idl.create("pgt");i.parent(t.id()),this.editDialog.setRecord(i),this.editDialog.mode="create",this.editDialog.open({size:"lg"}).subscribe(t=>{const i=new re.b({id:t.id(),label:t.name(),callerData:t});e.children.push(i),this.createString.current().then(e=>this.toast.success(e))},e=>{this.errorString.current().then(e=>this.toast.danger(e))})}changesPending(){return this.modifiedMaps().length>0}modifiedMaps(){return this.permMaps.filter(e=>e.isnew()||e.ischanged()||e.isdeleted())}applyChanges(){const e=this.modifiedMaps().map(e=>this.idl.clone(e));e.forEach(e=>{e.grp(e.grp().id()),e.perm(e.perm().id())}),this.pcrud.autoApply(e).subscribe(e=>console.debug("Modified one mapping: ",e),e=>{console.error(e),this.errorMapString.current().then(e=>this.toast.danger(e))},()=>{this.successMapString.current().then(e=>this.toast.success(e)),this.loadPermMaps()})}openAddDialog(){this.addMappingDialog.open().subscribe(e=>{this.createMapString.current().then(e=>this.toast.success(e)),this.loadPermMaps()})}selectGroup(e){const t=this.tree.findNode(e);this.tree.selectNode(t),this.nodeClicked(t)}}return e.\u0275fac=function(t){return new(t||e)(n.Lb(be.a),n.Lb(oe.a),n.Lb(se.a),n.Lb(de.a),n.Lb(fe.a))},e.\u0275cmp=n.Fb({type:e,selectors:[["ng-component"]],viewQuery:function(e,t){var i;1&e&&(n.Ic(Zt,!0),n.Ic(Yt,!0),n.Ic(qt,!0),n.Ic(ei,!0),n.Ic(ti,!0),n.Ic(ii,!0),n.Ic(ai,!0),n.Ic(li,!0),n.Ic(ci,!0),n.Sc(ni,!0)),2&e&&(n.yc(i=n.gc())&&(t.editDialog=i.first),n.yc(i=n.gc())&&(t.delConfirm=i.first),n.yc(i=n.gc())&&(t.successString=i.first),n.yc(i=n.gc())&&(t.createString=i.first),n.yc(i=n.gc())&&(t.errorString=i.first),n.yc(i=n.gc())&&(t.successMapString=i.first),n.yc(i=n.gc())&&(t.createMapString=i.first),n.yc(i=n.gc())&&(t.errorMapString=i.first),n.yc(i=n.gc())&&(t.addMappingDialog=i.first),n.yc(i=n.gc())&&(t.loadProgress=i.first))},decls:37,vars:9,consts:[[6,"bannerText"],[6,"text"],["createString",""],["successString",""],["errorString",""],["createMapString",""],["successMapString",""],["errorMapString",""],["idlClass","pgt","readonlyFields","parent",3,"fieldOptions"],["editDialog",""],[6,"dialogTitle","dialogBody"],["delConfirm",""],[3,"permGroup","orgDepths","permMaps","permissions"],["addMappingDialog",""],[1,"row"],[1,"col-lg-3"],[3,"tree","nodeClicked"],[1,"col-lg-9"],[1,"mb-3"],[4,"ngIf"],["class","common-form striped-even",4,"ngIf"],[1,"alert","alert-info","font-italic"],[1,"col-lg-6"],["loadProgress",""],[1,"common-form","striped-even"],["id","detail",6,"title"],["ngbTabContent",""],["id","perm",6,"title"],[1,"btn","btn-info","mr-2",3,"click"],[1,"btn","btn-warning","mr-2",3,"click"],[1,"col-lg-4"],[1,"col-lg-8","font-weight-bold"],[1,"row","d-flex","m-2","mb-3"],[1,"btn","btn-success",3,"disabled","click"],[1,"btn","btn-info","ml-3",3,"click"],[1,"form-control","ml-2",3,"ngModel","ngModelChange",6,"placeholder"],[1,"btn","btn-outline-secondary","ml-1",3,"click"],[1,"row","font-weight-bold"],[1,"col-lg-5"],[1,"col-lg-1"],["class","row",3,"ngClass",4,"ngFor","ngForOf"],[1,"row",3,"ngClass"],[6,"title"],[4,"ngIf","ngIfElse"],["nativeMap",""],[1,"btn","btn-link","m-0","p-0",3,"click"],[1,"col-lg-1","text-center"],[1,"col-lg-1","d-flex","flex-column","justify-content-center"],[1,"d-flex","justify-content-center","p-1","rounded"],[3,"value"],[1,"col-lg-1","font-italic"],[1,"p-1",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-center","p-1","rounded","border","border-info"],["type","checkbox",1,"align-middle",3,"ngModel","ngModelChange",6,"title"],[1,"d-flex","justify-content-center","p-1","rounded","border","border-danger"]],template:function(e,t){1&e&&(n.Rb(0,"eg-staff-banner",0),n.Xb(1,ri),n.Qb(),n.Rb(2,"eg-string",1,2),n.Xb(4,bi),n.Qb(),n.Rb(5,"eg-string",1,3),n.Xb(7,oi),n.Qb(),n.Rb(8,"eg-string",1,4),n.Xb(10,si),n.Qb(),n.Rb(11,"eg-string",1,5),n.Xb(13,di),n.Qb(),n.Rb(14,"eg-string",1,6),n.Xb(16,fi),n.Qb(),n.Rb(17,"eg-string",1,7),n.Xb(19,pi),n.Qb(),n.Mb(20,"eg-fm-record-editor",8,9),n.Rb(22,"eg-confirm-dialog",10,11),n.Xb(24,gi),n.Qb(),n.Mb(25,"eg-perm-group-map-dialog",12,13),n.Rb(27,"div",14),n.Rb(28,"div",15),n.Rb(29,"h3"),n.Vb(30,ui),n.Qb(),n.Rb(31,"eg-tree",16),n.fc("nodeClicked",(function(e){return t.nodeClicked(e)})),n.Qb(),n.Qb(),n.Rb(32,"div",17),n.Rb(33,"h3",18),n.Vb(34,hi),n.Qb(),n.Kc(35,vi,4,1,"ng-container",19),n.Kc(36,qi,8,0,"div",20),n.Qb(),n.Qb()),2&e&&(n.xb(20),n.oc("fieldOptions",t.fmEditorOptions()),n.xb(2),n.Zb(t.selected?t.selected.label:""),n.Wb(24),n.xb(3),n.oc("permGroup",t.selected?t.selected.callerData:null)("orgDepths",t.orgDepths)("permMaps",t.groupPermMaps())("permissions",t.permissions),n.xb(6),n.oc("tree",t.tree),n.xb(4),n.oc("ngIf",!t.selected),n.xb(1),n.oc("ngIf",t.selected))},directives:[r.a,pe.a,ue.a,ge.a,jt,he.a,me.v,Jt.a,at.W,at.T,at.U,it.c,it.t,it.w,me.u,me.s,Wt.a,it.F,it.a,it.y,it.I],encapsulation:2}),e})()},{path:"actor/org_unit",loadChildren:()=>i.e(28).then(i.bind(null,"/3nJ")).then(e=>e.OrgUnitModule)},{path:"actor/org_unit_proximity_adjustment",component:ne.a,data:[{schema:"actor",table:"org_unit_proximity_adjustment",disableOrgFilter:!0}]},{path:"asset/call_number_prefix",component:ne.a,data:[{schema:"asset",table:"call_number_prefix",readonlyFields:"label_sortkey"}]},{path:"asset/call_number_suffix",component:ne.a,data:[{schema:"asset",table:"call_number_suffix",readonlyFields:"label_sortkey"}]},{path:":schema/:table",component:ne.a}];let ta=(()=>{class e{}return e.\u0275mod=n.Jb({type:e}),e.\u0275inj=n.Ib({factory:function(t){return new(t||e)},imports:[[c.g.forChild(ea)],c.g]}),e})(),ia=(()=>{class e{}return e.\u0275mod=n.Jb({type:e}),e.\u0275inj=n.Ib({factory:function(t){return new(t||e)},providers:[qe.a],imports:[[l.a,ta,a.a]]}),e})()}}]);