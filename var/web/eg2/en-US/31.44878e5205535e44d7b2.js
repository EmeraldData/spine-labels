(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{5838:function(e,t,n){"use strict";n.r(t),n.d(t,"CatModule",(function(){return T}));var i,o,c,r,d,a=n("MZHd"),b=n("tyNb"),l=n("Osig"),u=n("iA0r"),s=n("fXoL"),h=n("ofXK"),p=n("3Pt+");function f(e,t){1&e&&(s.Pb(0),s.Vb(1,o),s.Ob())}function g(e,t){1&e&&(s.Pb(0),s.Vb(1,c),s.Ob())}function m(e,t){if(1&e&&(s.Rb(0,"div",11),s.Vb(1,r),s.Qb()),2&e){const e=s.hc();s.xb(1),s.Zb(e.identValue),s.Wb(1)}}function y(e,t){if(1&e&&(s.Rb(0,"div",11),s.Vb(1,d),s.Qb()),2&e){const e=s.hc();s.xb(1),s.Zb(e.identValue),s.Wb(1)}}i=$localize`:␟71c77bb8cecdf11ec3eead24dd1ba506573fa9cd␟935187492052582731:Submit`,o=$localize`:␟bee40b697f45eeb2edd71785076c3626ce7e386a␟1850989483542863190:Record ID:`,c=$localize`:␟27ce06bcde6851e4e051f7e7c91a571aa49e20d8␟5458877376721064142:Record TCN:`,r=$localize`:␟dac8a822f6f8a2a71ba82739b6f9c7b273db27a2␟2551441955574056386: Record not found: ${"\ufffd0\ufffd"}:INTERPOLATION: `,d=$localize`:␟c2374b58cb8d80818a1299f826b50e6ad096cae1␟3440078217943098024: More than one Bib Record found with TCN: ${"\ufffd0\ufffd"}:INTERPOLATION: `;const R=[{path:"vandelay",loadChildren:()=>Promise.all([n.e(1),n.e(2),n.e(3),n.e(5),n.e(7),n.e(0),n.e(19)]).then(n.bind(null,"5LKR")).then(e=>e.VandelayModule)},{path:"authority",loadChildren:()=>Promise.all([n.e(3),n.e(5),n.e(16)]).then(n.bind(null,"h/j0")).then(e=>e.AuthorityModule)},{path:"marcbatch",loadChildren:()=>Promise.all([n.e(7),n.e(18)]).then(n.bind(null,"zUiV")).then(e=>e.MarcBatchModule)},{path:"bib-from/:identType",component:(()=>{class e{constructor(e,t,n,i){this.router=e,this.route=t,this.net=n,this.pcrud=i,this.identType="id",this.notFound=!1,this.multiRecordsFound=!1}ngOnInit(){this.route.paramMap.subscribe(e=>{this.identType=e.get("identType")})}ngAfterViewInit(){const e=document.getElementById("bib-ident-value");setTimeout(()=>e.focus())}search(){if(!this.identValue)return;let e;this.notFound=!1,this.multiRecordsFound=!1,"id"===this.identType?e=this.getById():"tcn"===this.identType&&(e=this.getByTcn()),e.then(e=>{null===e?this.notFound=!0:this.goToRecord(e)})}getById(){return this.pcrud.retrieve("bre",this.identValue).toPromise().then(e=>e?e.id():null)}getByTcn(){return this.net.request("open-ils.search","open-ils.search.biblio.tcn",this.identValue).toPromise().then(e=>e.count>0?Promise.resolve(e):this.net.request("open-ils.search","open-ils.search.biblio.tcn",this.identValue,!0).toPromise()).then(e=>e.count?e.count>1?(this.multiRecordsFound=!0,null):e.ids[0]:null)}goToRecord(e){this.router.navigate(["/staff/catalog/record/"+e])}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(b.c),s.Lb(b.a),s.Lb(l.b),s.Lb(u.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["ng-component"]],decls:14,vars:5,consts:[[1,"row","form-validated","mt-5"],[1,"col-lg-6","form-inline"],[1,"input-group"],[1,"input-group-prepend"],["id","bib-ident-label",1,"input-group-text"],[4,"ngIf"],["id","bib-ident-value","type","text","required","","aria-describedby","bib-ident-label",1,"form-control",3,"ngModel","keyup.enter","ngModelChange"],[1,"btn","btn-outline-dark",3,"click"],[1,"row","mt-3"],[1,"col-lg-6"],["class","alert alert-warning",4,"ngIf"],[1,"alert","alert-warning"]],template:function(e,t){1&e&&(s.Rb(0,"div",0),s.Rb(1,"div",1),s.Rb(2,"div",2),s.Rb(3,"div",3),s.Rb(4,"span",4),s.Kc(5,f,2,0,"ng-container",5),s.Kc(6,g,2,0,"ng-container",5),s.Qb(),s.Qb(),s.Rb(7,"input",6),s.fc("keyup.enter",(function(){return t.search()}))("ngModelChange",(function(e){return t.identValue=e})),s.Qb(),s.Qb(),s.Rb(8,"button",7),s.fc("click",(function(){return t.search()})),s.Vb(9,i),s.Qb(),s.Qb(),s.Qb(),s.Rb(10,"div",8),s.Rb(11,"div",9),s.Kc(12,m,2,1,"div",10),s.Kc(13,y,2,1,"div",10),s.Qb(),s.Qb()),2&e&&(s.xb(5),s.oc("ngIf","id"===t.identType),s.xb(1),s.oc("ngIf","tcn"===t.identType),s.xb(1),s.oc("ngModel",t.identValue),s.xb(5),s.oc("ngIf",t.notFound&&!t.multiRecordsFound),s.xb(1),s.oc("ngIf",t.multiRecordsFound))},directives:[h.v,p.c,p.E,p.t,p.w],encapsulation:2}),e})()}];let v=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(t){return new(t||e)},imports:[[b.g.forChild(R)],b.g]}),e})(),T=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(t){return new(t||e)},providers:[],imports:[[a.a,v]]}),e})()}}]);