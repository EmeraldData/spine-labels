Caught error from 'run' method: DBD::Pg::st execute failed: ERROR:  out of memory
DETAIL:  Failed on request of size 48. [for Statement "        -- bib search: #CD_documentLength #CD_meanHarmonic #CD_uniqueWords core_limit(10000) badge_orgs(1) estimation_strategy(inclusion) skip_check(0) check_limit(1000) #metabib;fi:from_metarecord=3046655;metarecord=3046655 AND 9443=CONVERT(INT,(SELECT CHAR(113) CHAR(113) CHAR(112) CHAR(118) CHAR(113) (SELECT (CASE WHEN (9443=9443) THEN CHAR(49) ELSE CHAR(48) END)) CHAR(113) CHAR(113) CHAR(98) CHAR(107) CHAR(113)))-- GgYG depth(0)
        WITH w AS (


WITH x556e6e15a690_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$;fi:from_metarecord=3046655;metarecord=3046655$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$;fi:from_metarecord=3046655;metarecord=3046655$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$AND$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$AND$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9443=CONVERT')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9443=CONVERT')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$GgYG$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$GgYG$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$;fi:from_metarecord=3046655;metarecord=3046655$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$;fi:from_metarecord=3046655;metarecord=3046655$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$AND$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$AND$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9443=CONVERT')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9443=CONVERT')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$GgYG$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$GgYG$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e76a418_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$INT,$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$INT,$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$INT,$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$INT,$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e4171b0_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$SELECT$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$SELECT$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$SELECT$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$SELECT$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e769c08_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e6fe4b8_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e6fdf30_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'112')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'112')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'112')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'112')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e6fe4d0_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'118')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'118')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'118')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'118')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e6fe7e8_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e6feb28_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$SELECT$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$SELECT$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$SELECT$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$SELECT$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e6fee40_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CASE$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CASE$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$WHEN$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$WHEN$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$THEN$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$THEN$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$ELSE$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$ELSE$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$END$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$END$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CASE$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CASE$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$WHEN$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$WHEN$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$THEN$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$THEN$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$ELSE$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$ELSE$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$CHAR$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$END$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_98038$END$_98038$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e6ff158_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9443=9443')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9443=9443')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9443=9443')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9443=9443')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e6ff3c8_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'49')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'49')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'49')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'49')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e6ff668_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'48')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'48')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'48')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'48')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e6ff9b0_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e701d98_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e702158_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'98')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'98')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'98')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'98')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e7024b8_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'107')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'107')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'107')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'107')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e7027d0_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),lang_with AS (SELECT id FROM config.coded_value_map WHERE ctype = 'item_lang' AND code = $_98038$eng$_98038$),        pop_with AS (
            SELECT  record,
                    ARRAY_AGG(badge) AS badges,
                    SUM(s.score::NUMERIC*b.weight::NUMERIC)/SUM(b.weight::NUMERIC) AS total_score
              FROM  rating.record_badge_score s
                    JOIN rating.badge b ON (
                        b.id = s.badge
 AND b.scope = ANY ('{1}')) GROUP BY 1)
,c_attr AS (SELECT (ARRAY_TO_STRING(ARRAY[c_attrs,search.calculate_visibility_attribute_test('circ_lib','{1,221,163,46,87,321,365,252,25,267,106,152,33,140,102,376,353,216,328,156,213,65,211,21,145,115,203,226,124,301,96,122,2,80,182,260,292,85,233,131,346,39,58,275,184,68,344,177,231,197,362,55,311,6,239,240,241,242,246,107,352,269,77,142,112,258,3,247,117,110,38,194,259,273,272,356,293,297,298,123,86,244,243,120,248,251,103,308,288,191,79,82,366,99,234,263,126,166,101,111,11,129,300,357,81,88,262,36,201,60,63,294,32,375,52,227,303,49,118,342,402,372,355,270,94,24,250,306,53,125,37,23,51,28,193,254,34,175,331,74,50,59,26,404,164,9,73,144,56,202,132,135,155,139,29,42,148,40,268,271,57,92,95,91,90,153,235,178,134,4,137,138,192,127,336,35,245,104,97,284,354,199,181,5,217,219,109,255,256,228,335,93,174,374,224,45,41,218,405,161,89,116,136,229,212,48,313,210,345,261,225,223,167,157,187,176,222,180,18,169,188,27,343,128,349,285,236,165,172,206,204,208,207,333,147,149,108,186,220,307,183,170,209,162,360,200,305,286,160,230,326,322,323,351,196,205,317,350,171,98,72,78,320,287,314,290,282,43,67,71,61,330,30,291,15,257,150,319,66,369,358,312,113,121,151,114,198,179,295,296,237,276,278,281,279,329,315,154,190,83,75,318,70,265,215,54,401,304,168,361,141,173,316,280,44,100,340,69,22,264,76,214,130,189,379,373,7,232,381,146,383,385,377,13,10,20,8,378,386,384,380,382,143,47,289,387,389,19,390,14,394,12,391,388,392}',FALSE)],'&'))::query_int AS vis_test FROM asset.patron_default_visibility_mask() x)
,b_attr AS (SELECT (b_attrs||search.calculate_visibility_attribute_test('luri_org','{1}',FALSE))::query_int AS vis_test FROM asset.patron_default_visibility_mask() x)
SELECT  id,
        rel,
        CASE WHEN cardinality(records) = 1 THEN records[1] ELSE NULL END AS record,
        NULL::INT AS total,
        NULL::INT AS checked,
        NULL::INT AS visible,
        NULL::INT AS deleted,
        NULL::INT AS excluded,
        badges,
        popularity
  FROM  (SELECT m.metarecord AS id,
                ARRAY_AGG(DISTINCT m.source) AS records,
                (AVG(
          (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e15a690_keyword.index_vector, x556e6e15a690_keyword.tsq_rank, 14) * x556e6e15a690_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e76a418_keyword.index_vector, x556e6e76a418_keyword.tsq_rank, 14) * x556e6e76a418_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e4171b0_keyword.index_vector, x556e6e4171b0_keyword.tsq_rank, 14) * x556e6e4171b0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e769c08_keyword.index_vector, x556e6e769c08_keyword.tsq_rank, 14) * x556e6e769c08_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6fe4b8_keyword.index_vector, x556e6e6fe4b8_keyword.tsq_rank, 14) * x556e6e6fe4b8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6fdf30_keyword.index_vector, x556e6e6fdf30_keyword.tsq_rank, 14) * x556e6e6fdf30_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6fe4d0_keyword.index_vector, x556e6e6fe4d0_keyword.tsq_rank, 14) * x556e6e6fe4d0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6fe7e8_keyword.index_vector, x556e6e6fe7e8_keyword.tsq_rank, 14) * x556e6e6fe7e8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6feb28_keyword.index_vector, x556e6e6feb28_keyword.tsq_rank, 14) * x556e6e6feb28_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6fee40_keyword.index_vector, x556e6e6fee40_keyword.tsq_rank, 14) * x556e6e6fee40_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6ff158_keyword.index_vector, x556e6e6ff158_keyword.tsq_rank, 14) * x556e6e6ff158_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6ff3c8_keyword.index_vector, x556e6e6ff3c8_keyword.tsq_rank, 14) * x556e6e6ff3c8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6ff668_keyword.index_vector, x556e6e6ff668_keyword.tsq_rank, 14) * x556e6e6ff668_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6ff9b0_keyword.index_vector, x556e6e6ff9b0_keyword.tsq_rank, 14) * x556e6e6ff9b0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e701d98_keyword.index_vector, x556e6e701d98_keyword.tsq_rank, 14) * x556e6e701d98_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e702158_keyword.index_vector, x556e6e702158_keyword.tsq_rank, 14) * x556e6e702158_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7024b8_keyword.index_vector, x556e6e7024b8_keyword.tsq_rank, 14) * x556e6e7024b8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7027d0_keyword.index_vector, x556e6e7027d0_keyword.tsq_rank, 14) * x556e6e7027d0_keyword.weight * 1000, 0.0))
          + (1)
        )+1 * COALESCE( NULLIF( FIRST(mrv.vlist @> ARRAY[lang_with.id]), FALSE )::INT * 5, 1))::NUMERIC AS rel,
                1.0/((AVG(
          (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e15a690_keyword.index_vector, x556e6e15a690_keyword.tsq_rank, 14) * x556e6e15a690_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e76a418_keyword.index_vector, x556e6e76a418_keyword.tsq_rank, 14) * x556e6e76a418_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e4171b0_keyword.index_vector, x556e6e4171b0_keyword.tsq_rank, 14) * x556e6e4171b0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e769c08_keyword.index_vector, x556e6e769c08_keyword.tsq_rank, 14) * x556e6e769c08_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6fe4b8_keyword.index_vector, x556e6e6fe4b8_keyword.tsq_rank, 14) * x556e6e6fe4b8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6fdf30_keyword.index_vector, x556e6e6fdf30_keyword.tsq_rank, 14) * x556e6e6fdf30_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6fe4d0_keyword.index_vector, x556e6e6fe4d0_keyword.tsq_rank, 14) * x556e6e6fe4d0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6fe7e8_keyword.index_vector, x556e6e6fe7e8_keyword.tsq_rank, 14) * x556e6e6fe7e8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6feb28_keyword.index_vector, x556e6e6feb28_keyword.tsq_rank, 14) * x556e6e6feb28_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6fee40_keyword.index_vector, x556e6e6fee40_keyword.tsq_rank, 14) * x556e6e6fee40_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6ff158_keyword.index_vector, x556e6e6ff158_keyword.tsq_rank, 14) * x556e6e6ff158_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6ff3c8_keyword.index_vector, x556e6e6ff3c8_keyword.tsq_rank, 14) * x556e6e6ff3c8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6ff668_keyword.index_vector, x556e6e6ff668_keyword.tsq_rank, 14) * x556e6e6ff668_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6ff9b0_keyword.index_vector, x556e6e6ff9b0_keyword.tsq_rank, 14) * x556e6e6ff9b0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e701d98_keyword.index_vector, x556e6e701d98_keyword.tsq_rank, 14) * x556e6e701d98_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e702158_keyword.index_vector, x556e6e702158_keyword.tsq_rank, 14) * x556e6e702158_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7024b8_keyword.index_vector, x556e6e7024b8_keyword.tsq_rank, 14) * x556e6e7024b8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7027d0_keyword.index_vector, x556e6e7027d0_keyword.tsq_rank, 14) * x556e6e7027d0_keyword.weight * 1000, 0.0))
          + (1)
        )+1 * COALESCE( NULLIF( FIRST(mrv.vlist @> ARRAY[lang_with.id]), FALSE )::INT * 5, 1)))::NUMERIC AS rank, 
                FIRST(pubdate_t.value) AS tie_break,
                STRING_AGG(ARRAY_TO_STRING(pop_with.badges,','),',') AS badges,
                AVG(COALESCE(pop_with.total_score::NUMERIC,0.0::NUMERIC))::NUMERIC(2,1) AS popularity
          FROM  metabib.metarecord_source_map m
                
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e15a690_keyword_xq.tsq, x556e6e15a690_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e15a690_keyword_xq ON (fe.index_vector @@ x556e6e15a690_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e15a690_keyword_xq.tsq, x556e6e15a690_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e15a690_keyword_xq ON (fe.index_vector @@ x556e6e15a690_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e15a690_keyword_xq.tsq, x556e6e15a690_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e15a690_keyword_xq ON (fe.index_vector @@ x556e6e15a690_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e15a690_keyword_xq.tsq, x556e6e15a690_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e15a690_keyword_xq ON (fe.index_vector @@ x556e6e15a690_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e15a690_keyword_xq.tsq, x556e6e15a690_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e15a690_keyword_xq ON (fe.index_vector @@ x556e6e15a690_keyword_xq.tsq)
        ) AS x556e6e15a690_keyword ON (m.source = x556e6e15a690_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e76a418_keyword_xq.tsq, x556e6e76a418_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e76a418_keyword_xq ON (fe.index_vector @@ x556e6e76a418_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e76a418_keyword_xq.tsq, x556e6e76a418_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e76a418_keyword_xq ON (fe.index_vector @@ x556e6e76a418_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e76a418_keyword_xq.tsq, x556e6e76a418_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e76a418_keyword_xq ON (fe.index_vector @@ x556e6e76a418_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e76a418_keyword_xq.tsq, x556e6e76a418_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e76a418_keyword_xq ON (fe.index_vector @@ x556e6e76a418_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e76a418_keyword_xq.tsq, x556e6e76a418_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e76a418_keyword_xq ON (fe.index_vector @@ x556e6e76a418_keyword_xq.tsq)
        ) AS x556e6e76a418_keyword ON (m.source = x556e6e76a418_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e4171b0_keyword_xq.tsq, x556e6e4171b0_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e4171b0_keyword_xq ON (fe.index_vector @@ x556e6e4171b0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4171b0_keyword_xq.tsq, x556e6e4171b0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e4171b0_keyword_xq ON (fe.index_vector @@ x556e6e4171b0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4171b0_keyword_xq.tsq, x556e6e4171b0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e4171b0_keyword_xq ON (fe.index_vector @@ x556e6e4171b0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4171b0_keyword_xq.tsq, x556e6e4171b0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e4171b0_keyword_xq ON (fe.index_vector @@ x556e6e4171b0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4171b0_keyword_xq.tsq, x556e6e4171b0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e4171b0_keyword_xq ON (fe.index_vector @@ x556e6e4171b0_keyword_xq.tsq)
        ) AS x556e6e4171b0_keyword ON (m.source = x556e6e4171b0_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e769c08_keyword_xq.tsq, x556e6e769c08_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e769c08_keyword_xq ON (fe.index_vector @@ x556e6e769c08_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e769c08_keyword_xq.tsq, x556e6e769c08_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e769c08_keyword_xq ON (fe.index_vector @@ x556e6e769c08_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e769c08_keyword_xq.tsq, x556e6e769c08_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e769c08_keyword_xq ON (fe.index_vector @@ x556e6e769c08_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e769c08_keyword_xq.tsq, x556e6e769c08_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e769c08_keyword_xq ON (fe.index_vector @@ x556e6e769c08_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e769c08_keyword_xq.tsq, x556e6e769c08_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e769c08_keyword_xq ON (fe.index_vector @@ x556e6e769c08_keyword_xq.tsq)
        ) AS x556e6e769c08_keyword ON (m.source = x556e6e769c08_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e6fe4b8_keyword_xq.tsq, x556e6e6fe4b8_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e6fe4b8_keyword_xq ON (fe.index_vector @@ x556e6e6fe4b8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6fe4b8_keyword_xq.tsq, x556e6e6fe4b8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e6fe4b8_keyword_xq ON (fe.index_vector @@ x556e6e6fe4b8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6fe4b8_keyword_xq.tsq, x556e6e6fe4b8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e6fe4b8_keyword_xq ON (fe.index_vector @@ x556e6e6fe4b8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6fe4b8_keyword_xq.tsq, x556e6e6fe4b8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e6fe4b8_keyword_xq ON (fe.index_vector @@ x556e6e6fe4b8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6fe4b8_keyword_xq.tsq, x556e6e6fe4b8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e6fe4b8_keyword_xq ON (fe.index_vector @@ x556e6e6fe4b8_keyword_xq.tsq)
        ) AS x556e6e6fe4b8_keyword ON (m.source = x556e6e6fe4b8_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e6fdf30_keyword_xq.tsq, x556e6e6fdf30_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e6fdf30_keyword_xq ON (fe.index_vector @@ x556e6e6fdf30_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6fdf30_keyword_xq.tsq, x556e6e6fdf30_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e6fdf30_keyword_xq ON (fe.index_vector @@ x556e6e6fdf30_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6fdf30_keyword_xq.tsq, x556e6e6fdf30_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e6fdf30_keyword_xq ON (fe.index_vector @@ x556e6e6fdf30_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6fdf30_keyword_xq.tsq, x556e6e6fdf30_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e6fdf30_keyword_xq ON (fe.index_vector @@ x556e6e6fdf30_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6fdf30_keyword_xq.tsq, x556e6e6fdf30_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e6fdf30_keyword_xq ON (fe.index_vector @@ x556e6e6fdf30_keyword_xq.tsq)
        ) AS x556e6e6fdf30_keyword ON (m.source = x556e6e6fdf30_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e6fe4d0_keyword_xq.tsq, x556e6e6fe4d0_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e6fe4d0_keyword_xq ON (fe.index_vector @@ x556e6e6fe4d0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6fe4d0_keyword_xq.tsq, x556e6e6fe4d0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e6fe4d0_keyword_xq ON (fe.index_vector @@ x556e6e6fe4d0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6fe4d0_keyword_xq.tsq, x556e6e6fe4d0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e6fe4d0_keyword_xq ON (fe.index_vector @@ x556e6e6fe4d0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6fe4d0_keyword_xq.tsq, x556e6e6fe4d0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e6fe4d0_keyword_xq ON (fe.index_vector @@ x556e6e6fe4d0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6fe4d0_keyword_xq.tsq, x556e6e6fe4d0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e6fe4d0_keyword_xq ON (fe.index_vector @@ x556e6e6fe4d0_keyword_xq.tsq)
        ) AS x556e6e6fe4d0_keyword ON (m.source = x556e6e6fe4d0_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e6fe7e8_keyword_xq.tsq, x556e6e6fe7e8_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e6fe7e8_keyword_xq ON (fe.index_vector @@ x556e6e6fe7e8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6fe7e8_keyword_xq.tsq, x556e6e6fe7e8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e6fe7e8_keyword_xq ON (fe.index_vector @@ x556e6e6fe7e8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6fe7e8_keyword_xq.tsq, x556e6e6fe7e8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e6fe7e8_keyword_xq ON (fe.index_vector @@ x556e6e6fe7e8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6fe7e8_keyword_xq.tsq, x556e6e6fe7e8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e6fe7e8_keyword_xq ON (fe.index_vector @@ x556e6e6fe7e8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6fe7e8_keyword_xq.tsq, x556e6e6fe7e8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e6fe7e8_keyword_xq ON (fe.index_vector @@ x556e6e6fe7e8_keyword_xq.tsq)
        ) AS x556e6e6fe7e8_keyword ON (m.source = x556e6e6fe7e8_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e6feb28_keyword_xq.tsq, x556e6e6feb28_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e6feb28_keyword_xq ON (fe.index_vector @@ x556e6e6feb28_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6feb28_keyword_xq.tsq, x556e6e6feb28_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e6feb28_keyword_xq ON (fe.index_vector @@ x556e6e6feb28_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6feb28_keyword_xq.tsq, x556e6e6feb28_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e6feb28_keyword_xq ON (fe.index_vector @@ x556e6e6feb28_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6feb28_keyword_xq.tsq, x556e6e6feb28_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e6feb28_keyword_xq ON (fe.index_vector @@ x556e6e6feb28_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6feb28_keyword_xq.tsq, x556e6e6feb28_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e6feb28_keyword_xq ON (fe.index_vector @@ x556e6e6feb28_keyword_xq.tsq)
        ) AS x556e6e6feb28_keyword ON (m.source = x556e6e6feb28_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e6fee40_keyword_xq.tsq, x556e6e6fee40_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e6fee40_keyword_xq ON (fe.index_vector @@ x556e6e6fee40_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6fee40_keyword_xq.tsq, x556e6e6fee40_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e6fee40_keyword_xq ON (fe.index_vector @@ x556e6e6fee40_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6fee40_keyword_xq.tsq, x556e6e6fee40_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e6fee40_keyword_xq ON (fe.index_vector @@ x556e6e6fee40_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6fee40_keyword_xq.tsq, x556e6e6fee40_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e6fee40_keyword_xq ON (fe.index_vector @@ x556e6e6fee40_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6fee40_keyword_xq.tsq, x556e6e6fee40_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e6fee40_keyword_xq ON (fe.index_vector @@ x556e6e6fee40_keyword_xq.tsq)
        ) AS x556e6e6fee40_keyword ON (m.source = x556e6e6fee40_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e6ff158_keyword_xq.tsq, x556e6e6ff158_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e6ff158_keyword_xq ON (fe.index_vector @@ x556e6e6ff158_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6ff158_keyword_xq.tsq, x556e6e6ff158_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e6ff158_keyword_xq ON (fe.index_vector @@ x556e6e6ff158_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6ff158_keyword_xq.tsq, x556e6e6ff158_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e6ff158_keyword_xq ON (fe.index_vector @@ x556e6e6ff158_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6ff158_keyword_xq.tsq, x556e6e6ff158_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e6ff158_keyword_xq ON (fe.index_vector @@ x556e6e6ff158_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6ff158_keyword_xq.tsq, x556e6e6ff158_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e6ff158_keyword_xq ON (fe.index_vector @@ x556e6e6ff158_keyword_xq.tsq)
        ) AS x556e6e6ff158_keyword ON (m.source = x556e6e6ff158_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e6ff3c8_keyword_xq.tsq, x556e6e6ff3c8_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e6ff3c8_keyword_xq ON (fe.index_vector @@ x556e6e6ff3c8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6ff3c8_keyword_xq.tsq, x556e6e6ff3c8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e6ff3c8_keyword_xq ON (fe.index_vector @@ x556e6e6ff3c8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6ff3c8_keyword_xq.tsq, x556e6e6ff3c8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e6ff3c8_keyword_xq ON (fe.index_vector @@ x556e6e6ff3c8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6ff3c8_keyword_xq.tsq, x556e6e6ff3c8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e6ff3c8_keyword_xq ON (fe.index_vector @@ x556e6e6ff3c8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6ff3c8_keyword_xq.tsq, x556e6e6ff3c8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e6ff3c8_keyword_xq ON (fe.index_vector @@ x556e6e6ff3c8_keyword_xq.tsq)
        ) AS x556e6e6ff3c8_keyword ON (m.source = x556e6e6ff3c8_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e6ff668_keyword_xq.tsq, x556e6e6ff668_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e6ff668_keyword_xq ON (fe.index_vector @@ x556e6e6ff668_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6ff668_keyword_xq.tsq, x556e6e6ff668_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e6ff668_keyword_xq ON (fe.index_vector @@ x556e6e6ff668_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6ff668_keyword_xq.tsq, x556e6e6ff668_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e6ff668_keyword_xq ON (fe.index_vector @@ x556e6e6ff668_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6ff668_keyword_xq.tsq, x556e6e6ff668_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e6ff668_keyword_xq ON (fe.index_vector @@ x556e6e6ff668_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6ff668_keyword_xq.tsq, x556e6e6ff668_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e6ff668_keyword_xq ON (fe.index_vector @@ x556e6e6ff668_keyword_xq.tsq)
        ) AS x556e6e6ff668_keyword ON (m.source = x556e6e6ff668_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e6ff9b0_keyword_xq.tsq, x556e6e6ff9b0_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e6ff9b0_keyword_xq ON (fe.index_vector @@ x556e6e6ff9b0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6ff9b0_keyword_xq.tsq, x556e6e6ff9b0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e6ff9b0_keyword_xq ON (fe.index_vector @@ x556e6e6ff9b0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6ff9b0_keyword_xq.tsq, x556e6e6ff9b0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e6ff9b0_keyword_xq ON (fe.index_vector @@ x556e6e6ff9b0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6ff9b0_keyword_xq.tsq, x556e6e6ff9b0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e6ff9b0_keyword_xq ON (fe.index_vector @@ x556e6e6ff9b0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6ff9b0_keyword_xq.tsq, x556e6e6ff9b0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e6ff9b0_keyword_xq ON (fe.index_vector @@ x556e6e6ff9b0_keyword_xq.tsq)
        ) AS x556e6e6ff9b0_keyword ON (m.source = x556e6e6ff9b0_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e701d98_keyword_xq.tsq, x556e6e701d98_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e701d98_keyword_xq ON (fe.index_vector @@ x556e6e701d98_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e701d98_keyword_xq.tsq, x556e6e701d98_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e701d98_keyword_xq ON (fe.index_vector @@ x556e6e701d98_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e701d98_keyword_xq.tsq, x556e6e701d98_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e701d98_keyword_xq ON (fe.index_vector @@ x556e6e701d98_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e701d98_keyword_xq.tsq, x556e6e701d98_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e701d98_keyword_xq ON (fe.index_vector @@ x556e6e701d98_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e701d98_keyword_xq.tsq, x556e6e701d98_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e701d98_keyword_xq ON (fe.index_vector @@ x556e6e701d98_keyword_xq.tsq)
        ) AS x556e6e701d98_keyword ON (m.source = x556e6e701d98_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e702158_keyword_xq.tsq, x556e6e702158_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e702158_keyword_xq ON (fe.index_vector @@ x556e6e702158_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e702158_keyword_xq.tsq, x556e6e702158_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e702158_keyword_xq ON (fe.index_vector @@ x556e6e702158_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e702158_keyword_xq.tsq, x556e6e702158_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e702158_keyword_xq ON (fe.index_vector @@ x556e6e702158_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e702158_keyword_xq.tsq, x556e6e702158_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e702158_keyword_xq ON (fe.index_vector @@ x556e6e702158_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e702158_keyword_xq.tsq, x556e6e702158_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e702158_keyword_xq ON (fe.index_vector @@ x556e6e702158_keyword_xq.tsq)
        ) AS x556e6e702158_keyword ON (m.source = x556e6e702158_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e7024b8_keyword_xq.tsq, x556e6e7024b8_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e7024b8_keyword_xq ON (fe.index_vector @@ x556e6e7024b8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7024b8_keyword_xq.tsq, x556e6e7024b8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e7024b8_keyword_xq ON (fe.index_vector @@ x556e6e7024b8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7024b8_keyword_xq.tsq, x556e6e7024b8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e7024b8_keyword_xq ON (fe.index_vector @@ x556e6e7024b8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7024b8_keyword_xq.tsq, x556e6e7024b8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e7024b8_keyword_xq ON (fe.index_vector @@ x556e6e7024b8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7024b8_keyword_xq.tsq, x556e6e7024b8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e7024b8_keyword_xq ON (fe.index_vector @@ x556e6e7024b8_keyword_xq.tsq)
        ) AS x556e6e7024b8_keyword ON (m.source = x556e6e7024b8_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e7027d0_keyword_xq.tsq, x556e6e7027d0_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e7027d0_keyword_xq ON (fe.index_vector @@ x556e6e7027d0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7027d0_keyword_xq.tsq, x556e6e7027d0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e7027d0_keyword_xq ON (fe.index_vector @@ x556e6e7027d0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7027d0_keyword_xq.tsq, x556e6e7027d0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e7027d0_keyword_xq ON (fe.index_vector @@ x556e6e7027d0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7027d0_keyword_xq.tsq, x556e6e7027d0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e7027d0_keyword_xq ON (fe.index_vector @@ x556e6e7027d0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7027d0_keyword_xq.tsq, x556e6e7027d0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e7027d0_keyword_xq ON (fe.index_vector @@ x556e6e7027d0_keyword_xq.tsq)
        ) AS x556e6e7027d0_keyword ON (m.source = x556e6e7027d0_keyword.source)
                
                INNER JOIN metabib.record_attr_vector_list mrv ON m.source = mrv.source
                INNER JOIN biblio.record_entry bre ON m.source = bre.id AND NOT bre.deleted
                LEFT JOIN pop_with ON ( m.source = pop_with.record )
                LEFT JOIN metabib.record_sorter pubdate_t ON m.source = pubdate_t.source AND attr = 'pubdate'
                ,lang_with
                ,c_attr
                ,b_attr 
          WHERE 1=1
                AND (
          (x556e6e15a690_keyword.id IS NOT NULL)
          AND (
            (x556e6e76a418_keyword.id IS NOT NULL)
            AND (
              (x556e6e4171b0_keyword.id IS NOT NULL)
              AND (
                (x556e6e769c08_keyword.id IS NOT NULL)
              )
              AND (
                (x556e6e6fe4b8_keyword.id IS NOT NULL)
              )
              AND (
                (x556e6e6fdf30_keyword.id IS NOT NULL)
              )
              AND (
                (x556e6e6fe4d0_keyword.id IS NOT NULL)
              )
              AND (
                (x556e6e6fe7e8_keyword.id IS NOT NULL)
              )
              AND (
                (x556e6e6feb28_keyword.id IS NOT NULL)
                AND (
                  (x556e6e6fee40_keyword.id IS NOT NULL)
                  AND (
                    (x556e6e6ff158_keyword.id IS NOT NULL)
                  )
                  AND (
                    (x556e6e6ff3c8_keyword.id IS NOT NULL)
                  )
                  AND (
                    (x556e6e6ff668_keyword.id IS NOT NULL)
                  )
                )
              )
              AND (
                (x556e6e6ff9b0_keyword.id IS NOT NULL)
              )
              AND (
                (x556e6e701d98_keyword.id IS NOT NULL)
              )
              AND (
                (x556e6e702158_keyword.id IS NOT NULL)
              )
              AND (
                (x556e6e7024b8_keyword.id IS NOT NULL)
              )
              AND (
                (x556e6e7027d0_keyword.id IS NOT NULL)
              )
            )
          )
          AND (
            TRUE
          )
        )
        AND (
          (EXISTS (SELECT 1 FROM asset.copy_vis_attr_cache WHERE record = m.source AND vis_attr_vector @@ c_attr.vis_test)) OR ((b_attr.vis_test IS NULL OR bre.vis_attr_vector @@ b_attr.vis_test))
        )
          GROUP BY 1
          ORDER BY 4 ASC NULLS LAST,  5 DESC NULLS LAST, 3 DESC
          LIMIT 10000
        ) AS core_query
) (SELECT * FROM w LIMIT 1000 OFFSET 0)
        UNION ALL
  SELECT NULL,NULL,NULL,COUNT(*),COUNT(*),COUNT(*),0,0,NULL,NULL FROM w;

"] at /usr/share/perl5/DBIx/ContextualFetch.pm line 52.

Caught error from 'run' method: DBD::Pg::st execute failed: ERROR:  out of memory
DETAIL:  Failed on request of size 88. [for Statement "        -- bib search: #CD_documentLength #CD_meanHarmonic #CD_uniqueWords core_limit(10000) badge_orgs(1) estimation_strategy(inclusion) skip_check(0) check_limit(1000) #metabib;fi:from_metarecord=3046655;metarecord=3046655 AND (SELECT 9991 FROM(SELECT COUNT(*),CONCAT(0x7171707671,(SELECT (ELT(9991=9991,1))),0x7171626b71,FLOOR(RAND(0)*2))x FROM INFORMATION_SCHEMA.CHARACTER_SETS GROUP BY x)a) depth(0)
        WITH w AS (


WITH x556e6e7473a8_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$;fi:from_metarecord=3046655;metarecord=3046655$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$;fi:from_metarecord=3046655;metarecord=3046655$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$AND$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$AND$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$;fi:from_metarecord=3046655;metarecord=3046655$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$;fi:from_metarecord=3046655;metarecord=3046655$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$AND$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$AND$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e756d48_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$SELECT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$SELECT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9991')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9991')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$FROM$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$FROM$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$a$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$a$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$SELECT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$SELECT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9991')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9991')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$FROM$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$FROM$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$a$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$a$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e4ed710_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$SELECT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$SELECT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$COUNT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$COUNT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$,CONCAT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$,CONCAT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$x$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$x$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$FROM$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$FROM$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$INFORMATION_SCHEMA.CHARACTER_SETS$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$INFORMATION_SCHEMA.CHARACTER_SETS$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$GROUP$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$GROUP$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$BY$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$BY$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$x$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$x$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$SELECT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$SELECT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$COUNT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$COUNT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$,CONCAT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$,CONCAT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$x$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$x$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$FROM$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$FROM$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$INFORMATION_SCHEMA.CHARACTER_SETS$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$INFORMATION_SCHEMA.CHARACTER_SETS$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$GROUP$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$GROUP$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$BY$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$BY$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$x$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$x$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e729840_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0x7171707671,')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0x7171707671,')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$,0x7171626b71,FLOOR$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$,0x7171626b71,FLOOR$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0x7171707671,')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0x7171707671,')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$,0x7171626b71,FLOOR$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$,0x7171626b71,FLOOR$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e758e40_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$SELECT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$SELECT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$SELECT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$SELECT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e758f60_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$ELT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$ELT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$ELT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$ELT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e7595a8_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9991=9991,1')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9991=9991,1')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9991=9991,1')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9991=9991,1')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e759620_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$RAND$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$RAND$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$*2$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$*2$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$RAND$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$RAND$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$*2$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$*2$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e759818_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),lang_with AS (SELECT id FROM config.coded_value_map WHERE ctype = 'item_lang' AND code = $_37932$eng$_37932$),        pop_with AS (
            SELECT  record,
                    ARRAY_AGG(badge) AS badges,
                    SUM(s.score::NUMERIC*b.weight::NUMERIC)/SUM(b.weight::NUMERIC) AS total_score
              FROM  rating.record_badge_score s
                    JOIN rating.badge b ON (
                        b.id = s.badge
 AND b.scope = ANY ('{1}')) GROUP BY 1)
,c_attr AS (SELECT (ARRAY_TO_STRING(ARRAY[c_attrs,search.calculate_visibility_attribute_test('circ_lib','{1,221,163,46,87,321,365,252,25,267,106,152,33,140,102,376,353,216,328,156,213,65,211,21,145,115,203,226,124,301,96,122,2,80,182,260,292,85,233,131,346,39,58,275,184,68,344,177,231,197,362,55,311,6,239,240,241,242,246,107,352,269,77,142,112,258,3,247,117,110,38,194,259,273,272,356,293,297,298,123,86,244,243,120,248,251,103,308,288,191,79,82,366,99,234,263,126,166,101,111,11,129,300,357,81,88,262,36,201,60,63,294,32,375,52,227,303,49,118,342,402,372,355,270,94,24,250,306,53,125,37,23,51,28,193,254,34,175,331,74,50,59,26,404,164,9,73,144,56,202,132,135,155,139,29,42,148,40,268,271,57,92,95,91,90,153,235,178,134,4,137,138,192,127,336,35,245,104,97,284,354,199,181,5,217,219,109,255,256,228,335,93,174,374,224,45,41,218,405,161,89,116,136,229,212,48,313,210,345,261,225,223,167,157,187,176,222,180,18,169,188,27,343,128,349,285,236,165,172,206,204,208,207,333,147,149,108,186,220,307,183,170,209,162,360,200,305,286,160,230,326,322,323,351,196,205,317,350,171,98,72,78,320,287,314,290,282,43,67,71,61,330,30,291,15,257,150,319,66,369,358,312,113,121,151,114,198,179,295,296,237,276,278,281,279,329,315,154,190,83,75,318,70,265,215,54,401,304,168,361,141,173,316,280,44,100,340,69,22,264,76,214,130,189,379,373,7,232,381,146,383,385,377,13,10,20,8,378,386,384,380,382,143,47,289,387,389,19,390,14,394,12,391,388,392}',FALSE)],'&'))::query_int AS vis_test FROM asset.patron_default_visibility_mask() x)
,b_attr AS (SELECT (b_attrs||search.calculate_visibility_attribute_test('luri_org','{1}',FALSE))::query_int AS vis_test FROM asset.patron_default_visibility_mask() x)
SELECT  id,
        rel,
        CASE WHEN cardinality(records) = 1 THEN records[1] ELSE NULL END AS record,
        NULL::INT AS total,
        NULL::INT AS checked,
        NULL::INT AS visible,
        NULL::INT AS deleted,
        NULL::INT AS excluded,
        badges,
        popularity
  FROM  (SELECT m.metarecord AS id,
                ARRAY_AGG(DISTINCT m.source) AS records,
                (AVG(
          (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7473a8_keyword.index_vector, x556e6e7473a8_keyword.tsq_rank, 14) * x556e6e7473a8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e756d48_keyword.index_vector, x556e6e756d48_keyword.tsq_rank, 14) * x556e6e756d48_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e4ed710_keyword.index_vector, x556e6e4ed710_keyword.tsq_rank, 14) * x556e6e4ed710_keyword.weight * 1000, 0.0))
          + (1)
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e729840_keyword.index_vector, x556e6e729840_keyword.tsq_rank, 14) * x556e6e729840_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e758e40_keyword.index_vector, x556e6e758e40_keyword.tsq_rank, 14) * x556e6e758e40_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e758f60_keyword.index_vector, x556e6e758f60_keyword.tsq_rank, 14) * x556e6e758f60_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7595a8_keyword.index_vector, x556e6e7595a8_keyword.tsq_rank, 14) * x556e6e7595a8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e759620_keyword.index_vector, x556e6e759620_keyword.tsq_rank, 14) * x556e6e759620_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e759818_keyword.index_vector, x556e6e759818_keyword.tsq_rank, 14) * x556e6e759818_keyword.weight * 1000, 0.0))
        )+1 * COALESCE( NULLIF( FIRST(mrv.vlist @> ARRAY[lang_with.id]), FALSE )::INT * 5, 1))::NUMERIC AS rel,
                1.0/((AVG(
          (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7473a8_keyword.index_vector, x556e6e7473a8_keyword.tsq_rank, 14) * x556e6e7473a8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e756d48_keyword.index_vector, x556e6e756d48_keyword.tsq_rank, 14) * x556e6e756d48_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e4ed710_keyword.index_vector, x556e6e4ed710_keyword.tsq_rank, 14) * x556e6e4ed710_keyword.weight * 1000, 0.0))
          + (1)
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e729840_keyword.index_vector, x556e6e729840_keyword.tsq_rank, 14) * x556e6e729840_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e758e40_keyword.index_vector, x556e6e758e40_keyword.tsq_rank, 14) * x556e6e758e40_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e758f60_keyword.index_vector, x556e6e758f60_keyword.tsq_rank, 14) * x556e6e758f60_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7595a8_keyword.index_vector, x556e6e7595a8_keyword.tsq_rank, 14) * x556e6e7595a8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e759620_keyword.index_vector, x556e6e759620_keyword.tsq_rank, 14) * x556e6e759620_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e759818_keyword.index_vector, x556e6e759818_keyword.tsq_rank, 14) * x556e6e759818_keyword.weight * 1000, 0.0))
        )+1 * COALESCE( NULLIF( FIRST(mrv.vlist @> ARRAY[lang_with.id]), FALSE )::INT * 5, 1)))::NUMERIC AS rank, 
                FIRST(pubdate_t.value) AS tie_break,
                STRING_AGG(ARRAY_TO_STRING(pop_with.badges,','),',') AS badges,
                AVG(COALESCE(pop_with.total_score::NUMERIC,0.0::NUMERIC))::NUMERIC(2,1) AS popularity
          FROM  metabib.metarecord_source_map m
                
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e7473a8_keyword_xq.tsq, x556e6e7473a8_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e7473a8_keyword_xq ON (fe.index_vector @@ x556e6e7473a8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7473a8_keyword_xq.tsq, x556e6e7473a8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e7473a8_keyword_xq ON (fe.index_vector @@ x556e6e7473a8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7473a8_keyword_xq.tsq, x556e6e7473a8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e7473a8_keyword_xq ON (fe.index_vector @@ x556e6e7473a8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7473a8_keyword_xq.tsq, x556e6e7473a8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e7473a8_keyword_xq ON (fe.index_vector @@ x556e6e7473a8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7473a8_keyword_xq.tsq, x556e6e7473a8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e7473a8_keyword_xq ON (fe.index_vector @@ x556e6e7473a8_keyword_xq.tsq)
        ) AS x556e6e7473a8_keyword ON (m.source = x556e6e7473a8_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e756d48_keyword_xq.tsq, x556e6e756d48_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e756d48_keyword_xq ON (fe.index_vector @@ x556e6e756d48_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e756d48_keyword_xq.tsq, x556e6e756d48_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e756d48_keyword_xq ON (fe.index_vector @@ x556e6e756d48_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e756d48_keyword_xq.tsq, x556e6e756d48_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e756d48_keyword_xq ON (fe.index_vector @@ x556e6e756d48_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e756d48_keyword_xq.tsq, x556e6e756d48_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e756d48_keyword_xq ON (fe.index_vector @@ x556e6e756d48_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e756d48_keyword_xq.tsq, x556e6e756d48_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e756d48_keyword_xq ON (fe.index_vector @@ x556e6e756d48_keyword_xq.tsq)
        ) AS x556e6e756d48_keyword ON (m.source = x556e6e756d48_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e4ed710_keyword_xq.tsq, x556e6e4ed710_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e4ed710_keyword_xq ON (fe.index_vector @@ x556e6e4ed710_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4ed710_keyword_xq.tsq, x556e6e4ed710_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e4ed710_keyword_xq ON (fe.index_vector @@ x556e6e4ed710_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4ed710_keyword_xq.tsq, x556e6e4ed710_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e4ed710_keyword_xq ON (fe.index_vector @@ x556e6e4ed710_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4ed710_keyword_xq.tsq, x556e6e4ed710_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e4ed710_keyword_xq ON (fe.index_vector @@ x556e6e4ed710_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4ed710_keyword_xq.tsq, x556e6e4ed710_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e4ed710_keyword_xq ON (fe.index_vector @@ x556e6e4ed710_keyword_xq.tsq)
        ) AS x556e6e4ed710_keyword ON (m.source = x556e6e4ed710_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e729840_keyword_xq.tsq, x556e6e729840_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e729840_keyword_xq ON (fe.index_vector @@ x556e6e729840_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e729840_keyword_xq.tsq, x556e6e729840_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e729840_keyword_xq ON (fe.index_vector @@ x556e6e729840_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e729840_keyword_xq.tsq, x556e6e729840_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e729840_keyword_xq ON (fe.index_vector @@ x556e6e729840_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e729840_keyword_xq.tsq, x556e6e729840_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e729840_keyword_xq ON (fe.index_vector @@ x556e6e729840_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e729840_keyword_xq.tsq, x556e6e729840_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e729840_keyword_xq ON (fe.index_vector @@ x556e6e729840_keyword_xq.tsq)
        ) AS x556e6e729840_keyword ON (m.source = x556e6e729840_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e758e40_keyword_xq.tsq, x556e6e758e40_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e758e40_keyword_xq ON (fe.index_vector @@ x556e6e758e40_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e758e40_keyword_xq.tsq, x556e6e758e40_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e758e40_keyword_xq ON (fe.index_vector @@ x556e6e758e40_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e758e40_keyword_xq.tsq, x556e6e758e40_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e758e40_keyword_xq ON (fe.index_vector @@ x556e6e758e40_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e758e40_keyword_xq.tsq, x556e6e758e40_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e758e40_keyword_xq ON (fe.index_vector @@ x556e6e758e40_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e758e40_keyword_xq.tsq, x556e6e758e40_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e758e40_keyword_xq ON (fe.index_vector @@ x556e6e758e40_keyword_xq.tsq)
        ) AS x556e6e758e40_keyword ON (m.source = x556e6e758e40_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e758f60_keyword_xq.tsq, x556e6e758f60_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e758f60_keyword_xq ON (fe.index_vector @@ x556e6e758f60_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e758f60_keyword_xq.tsq, x556e6e758f60_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e758f60_keyword_xq ON (fe.index_vector @@ x556e6e758f60_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e758f60_keyword_xq.tsq, x556e6e758f60_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e758f60_keyword_xq ON (fe.index_vector @@ x556e6e758f60_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e758f60_keyword_xq.tsq, x556e6e758f60_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e758f60_keyword_xq ON (fe.index_vector @@ x556e6e758f60_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e758f60_keyword_xq.tsq, x556e6e758f60_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e758f60_keyword_xq ON (fe.index_vector @@ x556e6e758f60_keyword_xq.tsq)
        ) AS x556e6e758f60_keyword ON (m.source = x556e6e758f60_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e7595a8_keyword_xq.tsq, x556e6e7595a8_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e7595a8_keyword_xq ON (fe.index_vector @@ x556e6e7595a8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7595a8_keyword_xq.tsq, x556e6e7595a8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e7595a8_keyword_xq ON (fe.index_vector @@ x556e6e7595a8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7595a8_keyword_xq.tsq, x556e6e7595a8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e7595a8_keyword_xq ON (fe.index_vector @@ x556e6e7595a8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7595a8_keyword_xq.tsq, x556e6e7595a8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e7595a8_keyword_xq ON (fe.index_vector @@ x556e6e7595a8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7595a8_keyword_xq.tsq, x556e6e7595a8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e7595a8_keyword_xq ON (fe.index_vector @@ x556e6e7595a8_keyword_xq.tsq)
        ) AS x556e6e7595a8_keyword ON (m.source = x556e6e7595a8_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e759620_keyword_xq.tsq, x556e6e759620_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e759620_keyword_xq ON (fe.index_vector @@ x556e6e759620_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e759620_keyword_xq.tsq, x556e6e759620_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e759620_keyword_xq ON (fe.index_vector @@ x556e6e759620_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e759620_keyword_xq.tsq, x556e6e759620_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e759620_keyword_xq ON (fe.index_vector @@ x556e6e759620_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e759620_keyword_xq.tsq, x556e6e759620_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e759620_keyword_xq ON (fe.index_vector @@ x556e6e759620_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e759620_keyword_xq.tsq, x556e6e759620_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e759620_keyword_xq ON (fe.index_vector @@ x556e6e759620_keyword_xq.tsq)
        ) AS x556e6e759620_keyword ON (m.source = x556e6e759620_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e759818_keyword_xq.tsq, x556e6e759818_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e759818_keyword_xq ON (fe.index_vector @@ x556e6e759818_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e759818_keyword_xq.tsq, x556e6e759818_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e759818_keyword_xq ON (fe.index_vector @@ x556e6e759818_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e759818_keyword_xq.tsq, x556e6e759818_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e759818_keyword_xq ON (fe.index_vector @@ x556e6e759818_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e759818_keyword_xq.tsq, x556e6e759818_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e759818_keyword_xq ON (fe.index_vector @@ x556e6e759818_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e759818_keyword_xq.tsq, x556e6e759818_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e759818_keyword_xq ON (fe.index_vector @@ x556e6e759818_keyword_xq.tsq)
        ) AS x556e6e759818_keyword ON (m.source = x556e6e759818_keyword.source)
                
                INNER JOIN metabib.record_attr_vector_list mrv ON m.source = mrv.source
                INNER JOIN biblio.record_entry bre ON m.source = bre.id AND NOT bre.deleted
                LEFT JOIN pop_with ON ( m.source = pop_with.record )
                LEFT JOIN metabib.record_sorter pubdate_t ON m.source = pubdate_t.source AND attr = 'pubdate'
                ,lang_with
                ,c_attr
                ,b_attr 
          WHERE 1=1
                AND (
          (x556e6e7473a8_keyword.id IS NOT NULL)
          AND (
            (x556e6e756d48_keyword.id IS NOT NULL)
            AND (
              (x556e6e4ed710_keyword.id IS NOT NULL)
              AND (
                TRUE
              )
              AND (
                (x556e6e729840_keyword.id IS NOT NULL)
                AND (
                  (x556e6e758e40_keyword.id IS NOT NULL)
                  AND (
                    (x556e6e758f60_keyword.id IS NOT NULL)
                    AND (
                      (x556e6e7595a8_keyword.id IS NOT NULL)
                    )
                  )
                )
                AND (
                  (x556e6e759620_keyword.id IS NOT NULL)
                  AND (
                    (x556e6e759818_keyword.id IS NOT NULL)
                  )
                )
              )
            )
          )
        )
        AND (
          (EXISTS (SELECT 1 FROM asset.copy_vis_attr_cache WHERE record = m.source AND vis_attr_vector @@ c_attr.vis_test)) OR ((b_attr.vis_test IS NULL OR bre.vis_attr_vector @@ b_attr.vis_test))
        )
          GROUP BY 1
          ORDER BY 4 ASC NULLS LAST,  5 DESC NULLS LAST, 3 DESC
          LIMIT 10000
        ) AS core_query
) (SELECT * FROM w LIMIT 1000 OFFSET 0)
        UNION ALL
  SELECT NULL,NULL,NULL,COUNT(*),COUNT(*),COUNT(*),0,0,NULL,NULL FROM w;

"] at /usr/share/perl5/DBIx/ContextualFetch.pm line 52.

Caught error from 'run' method: DBD::Pg::st execute failed: ERROR:  out of memory
DETAIL:  Failed on request of size 4024. [for Statement "        -- bib search: #CD_documentLength #CD_meanHarmonic #CD_uniqueWords core_limit(10000) badge_orgs(1) estimation_strategy(inclusion) skip_check(0) check_limit(1000) #metabib;fi:from_metarecord=3046655;metarecord=3046655);WAITFOR DELAY '0:0:5'-- depth(0)
        WITH w AS (


WITH x556e6e4a45f0_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110500$;fi:from_metarecord=3046655;metarecord=3046655$_110500$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110500$;fi:from_metarecord=3046655;metarecord=3046655$_110500$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110500$;fi:from_metarecord=3046655;metarecord=3046655$_110500$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110500$;fi:from_metarecord=3046655;metarecord=3046655$_110500$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),lang_with AS (SELECT id FROM config.coded_value_map WHERE ctype = 'item_lang' AND code = $_110500$eng$_110500$),        pop_with AS (
            SELECT  record,
                    ARRAY_AGG(badge) AS badges,
                    SUM(s.score::NUMERIC*b.weight::NUMERIC)/SUM(b.weight::NUMERIC) AS total_score
              FROM  rating.record_badge_score s
                    JOIN rating.badge b ON (
                        b.id = s.badge
 AND b.scope = ANY ('{1}')) GROUP BY 1)
,c_attr AS (SELECT (ARRAY_TO_STRING(ARRAY[c_attrs,search.calculate_visibility_attribute_test('circ_lib','{1,221,163,46,87,321,365,252,25,267,106,152,33,140,102,376,353,216,328,156,213,65,211,21,145,115,203,226,124,301,96,122,2,80,182,260,292,85,233,131,346,39,58,275,184,68,344,177,231,197,362,55,311,6,239,240,241,242,246,107,352,269,77,142,112,258,3,247,117,110,38,194,259,273,272,356,293,297,298,123,86,244,243,120,248,251,103,308,288,191,79,82,366,99,234,263,126,166,101,111,11,129,300,357,81,88,262,36,201,60,63,294,32,375,52,227,303,49,118,342,402,372,355,270,94,24,250,306,53,125,37,23,51,28,193,254,34,175,331,74,50,59,26,404,164,9,73,144,56,202,132,135,155,139,29,42,148,40,268,271,57,92,95,91,90,153,235,178,134,4,137,138,192,127,336,35,245,104,97,284,354,199,181,5,217,219,109,255,256,228,335,93,174,374,224,45,41,218,405,161,89,116,136,229,212,48,313,210,345,261,225,223,167,157,187,176,222,180,18,169,188,27,343,128,349,285,236,165,172,206,204,208,207,333,147,149,108,186,220,307,183,170,209,162,360,200,305,286,160,230,326,322,323,351,196,205,317,350,171,98,72,78,320,287,314,290,282,43,67,71,61,330,30,291,15,257,150,319,66,369,358,312,113,121,151,114,198,179,295,296,237,276,278,281,279,329,315,154,190,83,75,318,70,265,215,54,401,304,168,361,141,173,316,280,44,100,340,69,22,264,76,214,130,189,379,373,7,232,381,146,383,385,377,13,10,20,8,378,386,384,380,382,143,47,289,387,389,19,390,14,394,12,391,388,392}',FALSE)],'&'))::query_int AS vis_test FROM asset.patron_default_visibility_mask() x)
,b_attr AS (SELECT (b_attrs||search.calculate_visibility_attribute_test('luri_org','{1}',FALSE))::query_int AS vis_test FROM asset.patron_default_visibility_mask() x)
SELECT  id,
        rel,
        CASE WHEN cardinality(records) = 1 THEN records[1] ELSE NULL END AS record,
        NULL::INT AS total,
        NULL::INT AS checked,
        NULL::INT AS visible,
        NULL::INT AS deleted,
        NULL::INT AS excluded,
        badges,
        popularity
  FROM  (SELECT m.metarecord AS id,
                ARRAY_AGG(DISTINCT m.source) AS records,
                (AVG(
          (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e4a45f0_keyword.index_vector, x556e6e4a45f0_keyword.tsq_rank, 14) * x556e6e4a45f0_keyword.weight * 1000, 0.0))
        )+1 * COALESCE( NULLIF( FIRST(mrv.vlist @> ARRAY[lang_with.id]), FALSE )::INT * 5, 1))::NUMERIC AS rel,
                1.0/((AVG(
          (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e4a45f0_keyword.index_vector, x556e6e4a45f0_keyword.tsq_rank, 14) * x556e6e4a45f0_keyword.weight * 1000, 0.0))
        )+1 * COALESCE( NULLIF( FIRST(mrv.vlist @> ARRAY[lang_with.id]), FALSE )::INT * 5, 1)))::NUMERIC AS rank, 
                FIRST(pubdate_t.value) AS tie_break,
                STRING_AGG(ARRAY_TO_STRING(pop_with.badges,','),',') AS badges,
                AVG(COALESCE(pop_with.total_score::NUMERIC,0.0::NUMERIC))::NUMERIC(2,1) AS popularity
          FROM  metabib.metarecord_source_map m
                
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e4a45f0_keyword_xq.tsq, x556e6e4a45f0_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e4a45f0_keyword_xq ON (fe.index_vector @@ x556e6e4a45f0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4a45f0_keyword_xq.tsq, x556e6e4a45f0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e4a45f0_keyword_xq ON (fe.index_vector @@ x556e6e4a45f0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4a45f0_keyword_xq.tsq, x556e6e4a45f0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e4a45f0_keyword_xq ON (fe.index_vector @@ x556e6e4a45f0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4a45f0_keyword_xq.tsq, x556e6e4a45f0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e4a45f0_keyword_xq ON (fe.index_vector @@ x556e6e4a45f0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4a45f0_keyword_xq.tsq, x556e6e4a45f0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e4a45f0_keyword_xq ON (fe.index_vector @@ x556e6e4a45f0_keyword_xq.tsq)
        ) AS x556e6e4a45f0_keyword ON (m.source = x556e6e4a45f0_keyword.source)
                
                INNER JOIN metabib.record_attr_vector_list mrv ON m.source = mrv.source
                INNER JOIN biblio.record_entry bre ON m.source = bre.id AND NOT bre.deleted
                LEFT JOIN pop_with ON ( m.source = pop_with.record )
                LEFT JOIN metabib.record_sorter pubdate_t ON m.source = pubdate_t.source AND attr = 'pubdate'
                ,lang_with
                ,c_attr
                ,b_attr 
          WHERE 1=1
                AND (
          (x556e6e4a45f0_keyword.id IS NOT NULL)
        )
        AND (
          (EXISTS (SELECT 1 FROM asset.copy_vis_attr_cache WHERE record = m.source AND vis_attr_vector @@ c_attr.vis_test)) OR ((b_attr.vis_test IS NULL OR bre.vis_attr_vector @@ b_attr.vis_test))
        )
          GROUP BY 1
          ORDER BY 4 ASC NULLS LAST,  5 DESC NULLS LAST, 3 DESC
          LIMIT 10000
        ) AS core_query
) (SELECT * FROM w LIMIT 1000 OFFSET 0)
        UNION ALL
  SELECT NULL,NULL,NULL,COUNT(*),COUNT(*),COUNT(*),0,0,NULL,NULL FROM w;

"] at /usr/share/perl5/DBIx/ContextualFetch.pm line 52.

Caught error from 'run' method: DBD::Pg::st execute failed: ERROR:  out of memory
DETAIL:  Failed on request of size 40. [for Statement "        -- bib search: #CD_documentLength #CD_meanHarmonic #CD_uniqueWords core_limit(10000) badge_orgs(1) estimation_strategy(inclusion) skip_check(0) check_limit(1000) #metabib;fi:from_metarecord=3046655;metarecord=3046655 AND (SELECT 9991 FROM(SELECT COUNT(*),CONCAT(0x7171707671,(SELECT (ELT(9991=9991,1))),0x7171626b71,FLOOR(RAND(0)*2))x FROM INFORMATION_SCHEMA.CHARACTER_SETS GROUP BY x)a) depth(0)
        WITH w AS (


WITH x556e6e47f260_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$;fi:from_metarecord=3046655;metarecord=3046655$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$;fi:from_metarecord=3046655;metarecord=3046655$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$AND$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$AND$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$;fi:from_metarecord=3046655;metarecord=3046655$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$;fi:from_metarecord=3046655;metarecord=3046655$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$AND$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$AND$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e6e2528_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$SELECT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$SELECT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9991')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9991')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$FROM$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$FROM$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$a$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$a$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$SELECT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$SELECT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9991')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9991')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$FROM$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$FROM$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$a$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$a$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e45dd20_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$SELECT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$SELECT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$COUNT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$COUNT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$,CONCAT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$,CONCAT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$x$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$x$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$FROM$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$FROM$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$INFORMATION_SCHEMA.CHARACTER_SETS$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$INFORMATION_SCHEMA.CHARACTER_SETS$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$GROUP$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$GROUP$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$BY$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$BY$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$x$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$x$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$SELECT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$SELECT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$COUNT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$COUNT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$,CONCAT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$,CONCAT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$x$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$x$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$FROM$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$FROM$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$INFORMATION_SCHEMA.CHARACTER_SETS$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$INFORMATION_SCHEMA.CHARACTER_SETS$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$GROUP$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$GROUP$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$BY$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$BY$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$x$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$x$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e6e4838_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0x7171707671,')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0x7171707671,')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$,0x7171626b71,FLOOR$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$,0x7171626b71,FLOOR$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0x7171707671,')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0x7171707671,')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$,0x7171626b71,FLOOR$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$,0x7171626b71,FLOOR$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e6e4910_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$SELECT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$SELECT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$SELECT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$SELECT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e6e7168_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$ELT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$ELT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$ELT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$ELT$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e6e75d0_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9991=9991,1')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9991=9991,1')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9991=9991,1')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9991=9991,1')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e6e7a50_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$RAND$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$RAND$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$*2$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$*2$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$RAND$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$RAND$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$*2$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_42472$*2$_42472$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e6e7ed0_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),lang_with AS (SELECT id FROM config.coded_value_map WHERE ctype = 'item_lang' AND code = $_42472$eng$_42472$),        pop_with AS (
            SELECT  record,
                    ARRAY_AGG(badge) AS badges,
                    SUM(s.score::NUMERIC*b.weight::NUMERIC)/SUM(b.weight::NUMERIC) AS total_score
              FROM  rating.record_badge_score s
                    JOIN rating.badge b ON (
                        b.id = s.badge
 AND b.scope = ANY ('{1}')) GROUP BY 1)
,c_attr AS (SELECT (ARRAY_TO_STRING(ARRAY[c_attrs,search.calculate_visibility_attribute_test('circ_lib','{1,221,163,46,87,321,365,252,25,267,106,152,33,140,102,376,353,216,328,156,213,65,211,21,145,115,203,226,124,301,96,122,2,80,182,260,292,85,233,131,346,39,58,275,184,68,344,177,231,197,362,55,311,6,239,240,241,242,246,107,352,269,77,142,112,258,3,247,117,110,38,194,259,273,272,356,293,297,298,123,86,244,243,120,248,251,103,308,288,191,79,82,366,99,234,263,126,166,101,111,11,129,300,357,81,88,262,36,201,60,63,294,32,375,52,227,303,49,118,342,402,372,355,270,94,24,250,306,53,125,37,23,51,28,193,254,34,175,331,74,50,59,26,404,164,9,73,144,56,202,132,135,155,139,29,42,148,40,268,271,57,92,95,91,90,153,235,178,134,4,137,138,192,127,336,35,245,104,97,284,354,199,181,5,217,219,109,255,256,228,335,93,174,374,224,45,41,218,405,161,89,116,136,229,212,48,313,210,345,261,225,223,167,157,187,176,222,180,18,169,188,27,343,128,349,285,236,165,172,206,204,208,207,333,147,149,108,186,220,307,183,170,209,162,360,200,305,286,160,230,326,322,323,351,196,205,317,350,171,98,72,78,320,287,314,290,282,43,67,71,61,330,30,291,15,257,150,319,66,369,358,312,113,121,151,114,198,179,295,296,237,276,278,281,279,329,315,154,190,83,75,318,70,265,215,54,401,304,168,361,141,173,316,280,44,100,340,69,22,264,76,214,130,189,379,373,7,232,381,146,383,385,377,13,10,20,8,378,386,384,380,382,143,47,289,387,389,19,390,14,394,12,391,388,392}',FALSE)],'&'))::query_int AS vis_test FROM asset.patron_default_visibility_mask() x)
,b_attr AS (SELECT (b_attrs||search.calculate_visibility_attribute_test('luri_org','{1}',FALSE))::query_int AS vis_test FROM asset.patron_default_visibility_mask() x)
SELECT  id,
        rel,
        CASE WHEN cardinality(records) = 1 THEN records[1] ELSE NULL END AS record,
        NULL::INT AS total,
        NULL::INT AS checked,
        NULL::INT AS visible,
        NULL::INT AS deleted,
        NULL::INT AS excluded,
        badges,
        popularity
  FROM  (SELECT m.metarecord AS id,
                ARRAY_AGG(DISTINCT m.source) AS records,
                (AVG(
          (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e47f260_keyword.index_vector, x556e6e47f260_keyword.tsq_rank, 14) * x556e6e47f260_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6e2528_keyword.index_vector, x556e6e6e2528_keyword.tsq_rank, 14) * x556e6e6e2528_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e45dd20_keyword.index_vector, x556e6e45dd20_keyword.tsq_rank, 14) * x556e6e45dd20_keyword.weight * 1000, 0.0))
          + (1)
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6e4838_keyword.index_vector, x556e6e6e4838_keyword.tsq_rank, 14) * x556e6e6e4838_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6e4910_keyword.index_vector, x556e6e6e4910_keyword.tsq_rank, 14) * x556e6e6e4910_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6e7168_keyword.index_vector, x556e6e6e7168_keyword.tsq_rank, 14) * x556e6e6e7168_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6e75d0_keyword.index_vector, x556e6e6e75d0_keyword.tsq_rank, 14) * x556e6e6e75d0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6e7a50_keyword.index_vector, x556e6e6e7a50_keyword.tsq_rank, 14) * x556e6e6e7a50_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6e7ed0_keyword.index_vector, x556e6e6e7ed0_keyword.tsq_rank, 14) * x556e6e6e7ed0_keyword.weight * 1000, 0.0))
        )+1 * COALESCE( NULLIF( FIRST(mrv.vlist @> ARRAY[lang_with.id]), FALSE )::INT * 5, 1))::NUMERIC AS rel,
                1.0/((AVG(
          (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e47f260_keyword.index_vector, x556e6e47f260_keyword.tsq_rank, 14) * x556e6e47f260_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6e2528_keyword.index_vector, x556e6e6e2528_keyword.tsq_rank, 14) * x556e6e6e2528_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e45dd20_keyword.index_vector, x556e6e45dd20_keyword.tsq_rank, 14) * x556e6e45dd20_keyword.weight * 1000, 0.0))
          + (1)
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6e4838_keyword.index_vector, x556e6e6e4838_keyword.tsq_rank, 14) * x556e6e6e4838_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6e4910_keyword.index_vector, x556e6e6e4910_keyword.tsq_rank, 14) * x556e6e6e4910_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6e7168_keyword.index_vector, x556e6e6e7168_keyword.tsq_rank, 14) * x556e6e6e7168_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6e75d0_keyword.index_vector, x556e6e6e75d0_keyword.tsq_rank, 14) * x556e6e6e75d0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6e7a50_keyword.index_vector, x556e6e6e7a50_keyword.tsq_rank, 14) * x556e6e6e7a50_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e6e7ed0_keyword.index_vector, x556e6e6e7ed0_keyword.tsq_rank, 14) * x556e6e6e7ed0_keyword.weight * 1000, 0.0))
        )+1 * COALESCE( NULLIF( FIRST(mrv.vlist @> ARRAY[lang_with.id]), FALSE )::INT * 5, 1)))::NUMERIC AS rank, 
                FIRST(pubdate_t.value) AS tie_break,
                STRING_AGG(ARRAY_TO_STRING(pop_with.badges,','),',') AS badges,
                AVG(COALESCE(pop_with.total_score::NUMERIC,0.0::NUMERIC))::NUMERIC(2,1) AS popularity
          FROM  metabib.metarecord_source_map m
                
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e47f260_keyword_xq.tsq, x556e6e47f260_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e47f260_keyword_xq ON (fe.index_vector @@ x556e6e47f260_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e47f260_keyword_xq.tsq, x556e6e47f260_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e47f260_keyword_xq ON (fe.index_vector @@ x556e6e47f260_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e47f260_keyword_xq.tsq, x556e6e47f260_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e47f260_keyword_xq ON (fe.index_vector @@ x556e6e47f260_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e47f260_keyword_xq.tsq, x556e6e47f260_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e47f260_keyword_xq ON (fe.index_vector @@ x556e6e47f260_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e47f260_keyword_xq.tsq, x556e6e47f260_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e47f260_keyword_xq ON (fe.index_vector @@ x556e6e47f260_keyword_xq.tsq)
        ) AS x556e6e47f260_keyword ON (m.source = x556e6e47f260_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e6e2528_keyword_xq.tsq, x556e6e6e2528_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e6e2528_keyword_xq ON (fe.index_vector @@ x556e6e6e2528_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e2528_keyword_xq.tsq, x556e6e6e2528_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e6e2528_keyword_xq ON (fe.index_vector @@ x556e6e6e2528_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e2528_keyword_xq.tsq, x556e6e6e2528_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e6e2528_keyword_xq ON (fe.index_vector @@ x556e6e6e2528_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e2528_keyword_xq.tsq, x556e6e6e2528_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e6e2528_keyword_xq ON (fe.index_vector @@ x556e6e6e2528_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e2528_keyword_xq.tsq, x556e6e6e2528_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e6e2528_keyword_xq ON (fe.index_vector @@ x556e6e6e2528_keyword_xq.tsq)
        ) AS x556e6e6e2528_keyword ON (m.source = x556e6e6e2528_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e45dd20_keyword_xq.tsq, x556e6e45dd20_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e45dd20_keyword_xq ON (fe.index_vector @@ x556e6e45dd20_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e45dd20_keyword_xq.tsq, x556e6e45dd20_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e45dd20_keyword_xq ON (fe.index_vector @@ x556e6e45dd20_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e45dd20_keyword_xq.tsq, x556e6e45dd20_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e45dd20_keyword_xq ON (fe.index_vector @@ x556e6e45dd20_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e45dd20_keyword_xq.tsq, x556e6e45dd20_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e45dd20_keyword_xq ON (fe.index_vector @@ x556e6e45dd20_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e45dd20_keyword_xq.tsq, x556e6e45dd20_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e45dd20_keyword_xq ON (fe.index_vector @@ x556e6e45dd20_keyword_xq.tsq)
        ) AS x556e6e45dd20_keyword ON (m.source = x556e6e45dd20_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e6e4838_keyword_xq.tsq, x556e6e6e4838_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e6e4838_keyword_xq ON (fe.index_vector @@ x556e6e6e4838_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e4838_keyword_xq.tsq, x556e6e6e4838_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e6e4838_keyword_xq ON (fe.index_vector @@ x556e6e6e4838_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e4838_keyword_xq.tsq, x556e6e6e4838_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e6e4838_keyword_xq ON (fe.index_vector @@ x556e6e6e4838_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e4838_keyword_xq.tsq, x556e6e6e4838_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e6e4838_keyword_xq ON (fe.index_vector @@ x556e6e6e4838_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e4838_keyword_xq.tsq, x556e6e6e4838_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e6e4838_keyword_xq ON (fe.index_vector @@ x556e6e6e4838_keyword_xq.tsq)
        ) AS x556e6e6e4838_keyword ON (m.source = x556e6e6e4838_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e6e4910_keyword_xq.tsq, x556e6e6e4910_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e6e4910_keyword_xq ON (fe.index_vector @@ x556e6e6e4910_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e4910_keyword_xq.tsq, x556e6e6e4910_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e6e4910_keyword_xq ON (fe.index_vector @@ x556e6e6e4910_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e4910_keyword_xq.tsq, x556e6e6e4910_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e6e4910_keyword_xq ON (fe.index_vector @@ x556e6e6e4910_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e4910_keyword_xq.tsq, x556e6e6e4910_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e6e4910_keyword_xq ON (fe.index_vector @@ x556e6e6e4910_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e4910_keyword_xq.tsq, x556e6e6e4910_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e6e4910_keyword_xq ON (fe.index_vector @@ x556e6e6e4910_keyword_xq.tsq)
        ) AS x556e6e6e4910_keyword ON (m.source = x556e6e6e4910_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e6e7168_keyword_xq.tsq, x556e6e6e7168_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e6e7168_keyword_xq ON (fe.index_vector @@ x556e6e6e7168_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e7168_keyword_xq.tsq, x556e6e6e7168_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e6e7168_keyword_xq ON (fe.index_vector @@ x556e6e6e7168_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e7168_keyword_xq.tsq, x556e6e6e7168_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e6e7168_keyword_xq ON (fe.index_vector @@ x556e6e6e7168_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e7168_keyword_xq.tsq, x556e6e6e7168_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e6e7168_keyword_xq ON (fe.index_vector @@ x556e6e6e7168_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e7168_keyword_xq.tsq, x556e6e6e7168_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e6e7168_keyword_xq ON (fe.index_vector @@ x556e6e6e7168_keyword_xq.tsq)
        ) AS x556e6e6e7168_keyword ON (m.source = x556e6e6e7168_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e6e75d0_keyword_xq.tsq, x556e6e6e75d0_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e6e75d0_keyword_xq ON (fe.index_vector @@ x556e6e6e75d0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e75d0_keyword_xq.tsq, x556e6e6e75d0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e6e75d0_keyword_xq ON (fe.index_vector @@ x556e6e6e75d0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e75d0_keyword_xq.tsq, x556e6e6e75d0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e6e75d0_keyword_xq ON (fe.index_vector @@ x556e6e6e75d0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e75d0_keyword_xq.tsq, x556e6e6e75d0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e6e75d0_keyword_xq ON (fe.index_vector @@ x556e6e6e75d0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e75d0_keyword_xq.tsq, x556e6e6e75d0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e6e75d0_keyword_xq ON (fe.index_vector @@ x556e6e6e75d0_keyword_xq.tsq)
        ) AS x556e6e6e75d0_keyword ON (m.source = x556e6e6e75d0_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e6e7a50_keyword_xq.tsq, x556e6e6e7a50_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e6e7a50_keyword_xq ON (fe.index_vector @@ x556e6e6e7a50_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e7a50_keyword_xq.tsq, x556e6e6e7a50_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e6e7a50_keyword_xq ON (fe.index_vector @@ x556e6e6e7a50_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e7a50_keyword_xq.tsq, x556e6e6e7a50_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e6e7a50_keyword_xq ON (fe.index_vector @@ x556e6e6e7a50_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e7a50_keyword_xq.tsq, x556e6e6e7a50_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e6e7a50_keyword_xq ON (fe.index_vector @@ x556e6e6e7a50_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e7a50_keyword_xq.tsq, x556e6e6e7a50_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e6e7a50_keyword_xq ON (fe.index_vector @@ x556e6e6e7a50_keyword_xq.tsq)
        ) AS x556e6e6e7a50_keyword ON (m.source = x556e6e6e7a50_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e6e7ed0_keyword_xq.tsq, x556e6e6e7ed0_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e6e7ed0_keyword_xq ON (fe.index_vector @@ x556e6e6e7ed0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e7ed0_keyword_xq.tsq, x556e6e6e7ed0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e6e7ed0_keyword_xq ON (fe.index_vector @@ x556e6e6e7ed0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e7ed0_keyword_xq.tsq, x556e6e6e7ed0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e6e7ed0_keyword_xq ON (fe.index_vector @@ x556e6e6e7ed0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e7ed0_keyword_xq.tsq, x556e6e6e7ed0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e6e7ed0_keyword_xq ON (fe.index_vector @@ x556e6e6e7ed0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e6e7ed0_keyword_xq.tsq, x556e6e6e7ed0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e6e7ed0_keyword_xq ON (fe.index_vector @@ x556e6e6e7ed0_keyword_xq.tsq)
        ) AS x556e6e6e7ed0_keyword ON (m.source = x556e6e6e7ed0_keyword.source)
                
                INNER JOIN metabib.record_attr_vector_list mrv ON m.source = mrv.source
                INNER JOIN biblio.record_entry bre ON m.source = bre.id AND NOT bre.deleted
                LEFT JOIN pop_with ON ( m.source = pop_with.record )
                LEFT JOIN metabib.record_sorter pubdate_t ON m.source = pubdate_t.source AND attr = 'pubdate'
                ,lang_with
                ,c_attr
                ,b_attr 
          WHERE 1=1
                AND (
          (x556e6e47f260_keyword.id IS NOT NULL)
          AND (
            (x556e6e6e2528_keyword.id IS NOT NULL)
            AND (
              (x556e6e45dd20_keyword.id IS NOT NULL)
              AND (
                TRUE
              )
              AND (
                (x556e6e6e4838_keyword.id IS NOT NULL)
                AND (
                  (x556e6e6e4910_keyword.id IS NOT NULL)
                  AND (
                    (x556e6e6e7168_keyword.id IS NOT NULL)
                    AND (
                      (x556e6e6e75d0_keyword.id IS NOT NULL)
                    )
                  )
                )
                AND (
                  (x556e6e6e7a50_keyword.id IS NOT NULL)
                  AND (
                    (x556e6e6e7ed0_keyword.id IS NOT NULL)
                  )
                )
              )
            )
          )
        )
        AND (
          (EXISTS (SELECT 1 FROM asset.copy_vis_attr_cache WHERE record = m.source AND vis_attr_vector @@ c_attr.vis_test)) OR ((b_attr.vis_test IS NULL OR bre.vis_attr_vector @@ b_attr.vis_test))
        )
          GROUP BY 1
          ORDER BY 4 ASC NULLS LAST,  5 DESC NULLS LAST, 3 DESC
          LIMIT 10000
        ) AS core_query
) (SELECT * FROM w LIMIT 1000 OFFSET 0)
        UNION ALL
  SELECT NULL,NULL,NULL,COUNT(*),COUNT(*),COUNT(*),0,0,NULL,NULL FROM w;

"] at /usr/share/perl5/DBIx/ContextualFetch.pm line 52.

Caught error from 'run' method: DBD::Pg::st execute failed: ERROR:  out of memory
DETAIL:  Failed on request of size 32. [for Statement "        -- bib search: #CD_documentLength #CD_meanHarmonic #CD_uniqueWords core_limit(10000) badge_orgs(1) estimation_strategy(inclusion) skip_check(0) check_limit(1000) #metabib;fi:from_metarecord=3046655;metarecord=3046655 AND 9443=CONVERT(INT,(SELECT CHAR(113) CHAR(113) CHAR(112) CHAR(118) CHAR(113) (SELECT (CASE WHEN (9443=9443) THEN CHAR(49) ELSE CHAR(48) END)) CHAR(113) CHAR(113) CHAR(98) CHAR(107) CHAR(113)))-- GgYG depth(0)
        WITH w AS (


WITH x556e6e3d19b8_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$;fi:from_metarecord=3046655;metarecord=3046655$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$;fi:from_metarecord=3046655;metarecord=3046655$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$AND$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$AND$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9443=CONVERT')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9443=CONVERT')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$GgYG$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$GgYG$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$;fi:from_metarecord=3046655;metarecord=3046655$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$;fi:from_metarecord=3046655;metarecord=3046655$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$AND$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$AND$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9443=CONVERT')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9443=CONVERT')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$GgYG$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$GgYG$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e441e58_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$INT,$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$INT,$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$INT,$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$INT,$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e3af9f0_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$SELECT$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$SELECT$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$SELECT$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$SELECT$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e3d1880_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e4400a8_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e4400c0_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'112')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'112')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'112')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'112')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e441f18_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'118')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'118')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'118')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'118')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e4420f8_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e443e50_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$SELECT$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$SELECT$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$SELECT$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$SELECT$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e4441f8_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CASE$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CASE$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$WHEN$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$WHEN$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$THEN$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$THEN$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$ELSE$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$ELSE$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$END$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$END$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CASE$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CASE$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$WHEN$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$WHEN$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$THEN$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$THEN$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$ELSE$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$ELSE$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$CHAR$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$END$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_110498$END$_110498$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e444558_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9443=9443')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9443=9443')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9443=9443')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9443=9443')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e444900_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'49')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'49')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'49')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'49')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e444ca8_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'48')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'48')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'48')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'48')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e446c20_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e446ff8_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e4473d0_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'98')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'98')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'98')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'98')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e447820_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'107')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'107')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'107')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'107')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e448bc8_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),lang_with AS (SELECT id FROM config.coded_value_map WHERE ctype = 'item_lang' AND code = $_110498$eng$_110498$),        pop_with AS (
            SELECT  record,
                    ARRAY_AGG(badge) AS badges,
                    SUM(s.score::NUMERIC*b.weight::NUMERIC)/SUM(b.weight::NUMERIC) AS total_score
              FROM  rating.record_badge_score s
                    JOIN rating.badge b ON (
                        b.id = s.badge
 AND b.scope = ANY ('{1}')) GROUP BY 1)
,c_attr AS (SELECT (ARRAY_TO_STRING(ARRAY[c_attrs,search.calculate_visibility_attribute_test('circ_lib','{1,221,163,46,87,321,365,252,25,267,106,152,33,140,102,376,353,216,328,156,213,65,211,21,145,115,203,226,124,301,96,122,2,80,182,260,292,85,233,131,346,39,58,275,184,68,344,177,231,197,362,55,311,6,239,240,241,242,246,107,352,269,77,142,112,258,3,247,117,110,38,194,259,273,272,356,293,297,298,123,86,244,243,120,248,251,103,308,288,191,79,82,366,99,234,263,126,166,101,111,11,129,300,357,81,88,262,36,201,60,63,294,32,375,52,227,303,49,118,342,402,372,355,270,94,24,250,306,53,125,37,23,51,28,193,254,34,175,331,74,50,59,26,404,164,9,73,144,56,202,132,135,155,139,29,42,148,40,268,271,57,92,95,91,90,153,235,178,134,4,137,138,192,127,336,35,245,104,97,284,354,199,181,5,217,219,109,255,256,228,335,93,174,374,224,45,41,218,405,161,89,116,136,229,212,48,313,210,345,261,225,223,167,157,187,176,222,180,18,169,188,27,343,128,349,285,236,165,172,206,204,208,207,333,147,149,108,186,220,307,183,170,209,162,360,200,305,286,160,230,326,322,323,351,196,205,317,350,171,98,72,78,320,287,314,290,282,43,67,71,61,330,30,291,15,257,150,319,66,369,358,312,113,121,151,114,198,179,295,296,237,276,278,281,279,329,315,154,190,83,75,318,70,265,215,54,401,304,168,361,141,173,316,280,44,100,340,69,22,264,76,214,130,189,379,373,7,232,381,146,383,385,377,13,10,20,8,378,386,384,380,382,143,47,289,387,389,19,390,14,394,12,391,388,392}',FALSE)],'&'))::query_int AS vis_test FROM asset.patron_default_visibility_mask() x)
,b_attr AS (SELECT (b_attrs||search.calculate_visibility_attribute_test('luri_org','{1}',FALSE))::query_int AS vis_test FROM asset.patron_default_visibility_mask() x)
SELECT  id,
        rel,
        CASE WHEN cardinality(records) = 1 THEN records[1] ELSE NULL END AS record,
        NULL::INT AS total,
        NULL::INT AS checked,
        NULL::INT AS visible,
        NULL::INT AS deleted,
        NULL::INT AS excluded,
        badges,
        popularity
  FROM  (SELECT m.metarecord AS id,
                ARRAY_AGG(DISTINCT m.source) AS records,
                (AVG(
          (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e3d19b8_keyword.index_vector, x556e6e3d19b8_keyword.tsq_rank, 14) * x556e6e3d19b8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e441e58_keyword.index_vector, x556e6e441e58_keyword.tsq_rank, 14) * x556e6e441e58_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e3af9f0_keyword.index_vector, x556e6e3af9f0_keyword.tsq_rank, 14) * x556e6e3af9f0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e3d1880_keyword.index_vector, x556e6e3d1880_keyword.tsq_rank, 14) * x556e6e3d1880_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e4400a8_keyword.index_vector, x556e6e4400a8_keyword.tsq_rank, 14) * x556e6e4400a8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e4400c0_keyword.index_vector, x556e6e4400c0_keyword.tsq_rank, 14) * x556e6e4400c0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e441f18_keyword.index_vector, x556e6e441f18_keyword.tsq_rank, 14) * x556e6e441f18_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e4420f8_keyword.index_vector, x556e6e4420f8_keyword.tsq_rank, 14) * x556e6e4420f8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e443e50_keyword.index_vector, x556e6e443e50_keyword.tsq_rank, 14) * x556e6e443e50_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e4441f8_keyword.index_vector, x556e6e4441f8_keyword.tsq_rank, 14) * x556e6e4441f8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e444558_keyword.index_vector, x556e6e444558_keyword.tsq_rank, 14) * x556e6e444558_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e444900_keyword.index_vector, x556e6e444900_keyword.tsq_rank, 14) * x556e6e444900_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e444ca8_keyword.index_vector, x556e6e444ca8_keyword.tsq_rank, 14) * x556e6e444ca8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e446c20_keyword.index_vector, x556e6e446c20_keyword.tsq_rank, 14) * x556e6e446c20_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e446ff8_keyword.index_vector, x556e6e446ff8_keyword.tsq_rank, 14) * x556e6e446ff8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e4473d0_keyword.index_vector, x556e6e4473d0_keyword.tsq_rank, 14) * x556e6e4473d0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e447820_keyword.index_vector, x556e6e447820_keyword.tsq_rank, 14) * x556e6e447820_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e448bc8_keyword.index_vector, x556e6e448bc8_keyword.tsq_rank, 14) * x556e6e448bc8_keyword.weight * 1000, 0.0))
          + (1)
        )+1 * COALESCE( NULLIF( FIRST(mrv.vlist @> ARRAY[lang_with.id]), FALSE )::INT * 5, 1))::NUMERIC AS rel,
                1.0/((AVG(
          (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e3d19b8_keyword.index_vector, x556e6e3d19b8_keyword.tsq_rank, 14) * x556e6e3d19b8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e441e58_keyword.index_vector, x556e6e441e58_keyword.tsq_rank, 14) * x556e6e441e58_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e3af9f0_keyword.index_vector, x556e6e3af9f0_keyword.tsq_rank, 14) * x556e6e3af9f0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e3d1880_keyword.index_vector, x556e6e3d1880_keyword.tsq_rank, 14) * x556e6e3d1880_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e4400a8_keyword.index_vector, x556e6e4400a8_keyword.tsq_rank, 14) * x556e6e4400a8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e4400c0_keyword.index_vector, x556e6e4400c0_keyword.tsq_rank, 14) * x556e6e4400c0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e441f18_keyword.index_vector, x556e6e441f18_keyword.tsq_rank, 14) * x556e6e441f18_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e4420f8_keyword.index_vector, x556e6e4420f8_keyword.tsq_rank, 14) * x556e6e4420f8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e443e50_keyword.index_vector, x556e6e443e50_keyword.tsq_rank, 14) * x556e6e443e50_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e4441f8_keyword.index_vector, x556e6e4441f8_keyword.tsq_rank, 14) * x556e6e4441f8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e444558_keyword.index_vector, x556e6e444558_keyword.tsq_rank, 14) * x556e6e444558_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e444900_keyword.index_vector, x556e6e444900_keyword.tsq_rank, 14) * x556e6e444900_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e444ca8_keyword.index_vector, x556e6e444ca8_keyword.tsq_rank, 14) * x556e6e444ca8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e446c20_keyword.index_vector, x556e6e446c20_keyword.tsq_rank, 14) * x556e6e446c20_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e446ff8_keyword.index_vector, x556e6e446ff8_keyword.tsq_rank, 14) * x556e6e446ff8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e4473d0_keyword.index_vector, x556e6e4473d0_keyword.tsq_rank, 14) * x556e6e4473d0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e447820_keyword.index_vector, x556e6e447820_keyword.tsq_rank, 14) * x556e6e447820_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e448bc8_keyword.index_vector, x556e6e448bc8_keyword.tsq_rank, 14) * x556e6e448bc8_keyword.weight * 1000, 0.0))
          + (1)
        )+1 * COALESCE( NULLIF( FIRST(mrv.vlist @> ARRAY[lang_with.id]), FALSE )::INT * 5, 1)))::NUMERIC AS rank, 
                FIRST(pubdate_t.value) AS tie_break,
                STRING_AGG(ARRAY_TO_STRING(pop_with.badges,','),',') AS badges,
                AVG(COALESCE(pop_with.total_score::NUMERIC,0.0::NUMERIC))::NUMERIC(2,1) AS popularity
          FROM  metabib.metarecord_source_map m
                
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e3d19b8_keyword_xq.tsq, x556e6e3d19b8_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e3d19b8_keyword_xq ON (fe.index_vector @@ x556e6e3d19b8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e3d19b8_keyword_xq.tsq, x556e6e3d19b8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e3d19b8_keyword_xq ON (fe.index_vector @@ x556e6e3d19b8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e3d19b8_keyword_xq.tsq, x556e6e3d19b8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e3d19b8_keyword_xq ON (fe.index_vector @@ x556e6e3d19b8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e3d19b8_keyword_xq.tsq, x556e6e3d19b8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e3d19b8_keyword_xq ON (fe.index_vector @@ x556e6e3d19b8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e3d19b8_keyword_xq.tsq, x556e6e3d19b8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e3d19b8_keyword_xq ON (fe.index_vector @@ x556e6e3d19b8_keyword_xq.tsq)
        ) AS x556e6e3d19b8_keyword ON (m.source = x556e6e3d19b8_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e441e58_keyword_xq.tsq, x556e6e441e58_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e441e58_keyword_xq ON (fe.index_vector @@ x556e6e441e58_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e441e58_keyword_xq.tsq, x556e6e441e58_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e441e58_keyword_xq ON (fe.index_vector @@ x556e6e441e58_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e441e58_keyword_xq.tsq, x556e6e441e58_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e441e58_keyword_xq ON (fe.index_vector @@ x556e6e441e58_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e441e58_keyword_xq.tsq, x556e6e441e58_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e441e58_keyword_xq ON (fe.index_vector @@ x556e6e441e58_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e441e58_keyword_xq.tsq, x556e6e441e58_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e441e58_keyword_xq ON (fe.index_vector @@ x556e6e441e58_keyword_xq.tsq)
        ) AS x556e6e441e58_keyword ON (m.source = x556e6e441e58_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e3af9f0_keyword_xq.tsq, x556e6e3af9f0_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e3af9f0_keyword_xq ON (fe.index_vector @@ x556e6e3af9f0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e3af9f0_keyword_xq.tsq, x556e6e3af9f0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e3af9f0_keyword_xq ON (fe.index_vector @@ x556e6e3af9f0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e3af9f0_keyword_xq.tsq, x556e6e3af9f0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e3af9f0_keyword_xq ON (fe.index_vector @@ x556e6e3af9f0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e3af9f0_keyword_xq.tsq, x556e6e3af9f0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e3af9f0_keyword_xq ON (fe.index_vector @@ x556e6e3af9f0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e3af9f0_keyword_xq.tsq, x556e6e3af9f0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e3af9f0_keyword_xq ON (fe.index_vector @@ x556e6e3af9f0_keyword_xq.tsq)
        ) AS x556e6e3af9f0_keyword ON (m.source = x556e6e3af9f0_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e3d1880_keyword_xq.tsq, x556e6e3d1880_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e3d1880_keyword_xq ON (fe.index_vector @@ x556e6e3d1880_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e3d1880_keyword_xq.tsq, x556e6e3d1880_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e3d1880_keyword_xq ON (fe.index_vector @@ x556e6e3d1880_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e3d1880_keyword_xq.tsq, x556e6e3d1880_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e3d1880_keyword_xq ON (fe.index_vector @@ x556e6e3d1880_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e3d1880_keyword_xq.tsq, x556e6e3d1880_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e3d1880_keyword_xq ON (fe.index_vector @@ x556e6e3d1880_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e3d1880_keyword_xq.tsq, x556e6e3d1880_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e3d1880_keyword_xq ON (fe.index_vector @@ x556e6e3d1880_keyword_xq.tsq)
        ) AS x556e6e3d1880_keyword ON (m.source = x556e6e3d1880_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e4400a8_keyword_xq.tsq, x556e6e4400a8_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e4400a8_keyword_xq ON (fe.index_vector @@ x556e6e4400a8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4400a8_keyword_xq.tsq, x556e6e4400a8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e4400a8_keyword_xq ON (fe.index_vector @@ x556e6e4400a8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4400a8_keyword_xq.tsq, x556e6e4400a8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e4400a8_keyword_xq ON (fe.index_vector @@ x556e6e4400a8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4400a8_keyword_xq.tsq, x556e6e4400a8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e4400a8_keyword_xq ON (fe.index_vector @@ x556e6e4400a8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4400a8_keyword_xq.tsq, x556e6e4400a8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e4400a8_keyword_xq ON (fe.index_vector @@ x556e6e4400a8_keyword_xq.tsq)
        ) AS x556e6e4400a8_keyword ON (m.source = x556e6e4400a8_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e4400c0_keyword_xq.tsq, x556e6e4400c0_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e4400c0_keyword_xq ON (fe.index_vector @@ x556e6e4400c0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4400c0_keyword_xq.tsq, x556e6e4400c0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e4400c0_keyword_xq ON (fe.index_vector @@ x556e6e4400c0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4400c0_keyword_xq.tsq, x556e6e4400c0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e4400c0_keyword_xq ON (fe.index_vector @@ x556e6e4400c0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4400c0_keyword_xq.tsq, x556e6e4400c0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e4400c0_keyword_xq ON (fe.index_vector @@ x556e6e4400c0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4400c0_keyword_xq.tsq, x556e6e4400c0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e4400c0_keyword_xq ON (fe.index_vector @@ x556e6e4400c0_keyword_xq.tsq)
        ) AS x556e6e4400c0_keyword ON (m.source = x556e6e4400c0_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e441f18_keyword_xq.tsq, x556e6e441f18_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e441f18_keyword_xq ON (fe.index_vector @@ x556e6e441f18_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e441f18_keyword_xq.tsq, x556e6e441f18_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e441f18_keyword_xq ON (fe.index_vector @@ x556e6e441f18_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e441f18_keyword_xq.tsq, x556e6e441f18_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e441f18_keyword_xq ON (fe.index_vector @@ x556e6e441f18_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e441f18_keyword_xq.tsq, x556e6e441f18_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e441f18_keyword_xq ON (fe.index_vector @@ x556e6e441f18_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e441f18_keyword_xq.tsq, x556e6e441f18_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e441f18_keyword_xq ON (fe.index_vector @@ x556e6e441f18_keyword_xq.tsq)
        ) AS x556e6e441f18_keyword ON (m.source = x556e6e441f18_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e4420f8_keyword_xq.tsq, x556e6e4420f8_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e4420f8_keyword_xq ON (fe.index_vector @@ x556e6e4420f8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4420f8_keyword_xq.tsq, x556e6e4420f8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e4420f8_keyword_xq ON (fe.index_vector @@ x556e6e4420f8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4420f8_keyword_xq.tsq, x556e6e4420f8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e4420f8_keyword_xq ON (fe.index_vector @@ x556e6e4420f8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4420f8_keyword_xq.tsq, x556e6e4420f8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e4420f8_keyword_xq ON (fe.index_vector @@ x556e6e4420f8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4420f8_keyword_xq.tsq, x556e6e4420f8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e4420f8_keyword_xq ON (fe.index_vector @@ x556e6e4420f8_keyword_xq.tsq)
        ) AS x556e6e4420f8_keyword ON (m.source = x556e6e4420f8_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e443e50_keyword_xq.tsq, x556e6e443e50_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e443e50_keyword_xq ON (fe.index_vector @@ x556e6e443e50_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e443e50_keyword_xq.tsq, x556e6e443e50_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e443e50_keyword_xq ON (fe.index_vector @@ x556e6e443e50_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e443e50_keyword_xq.tsq, x556e6e443e50_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e443e50_keyword_xq ON (fe.index_vector @@ x556e6e443e50_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e443e50_keyword_xq.tsq, x556e6e443e50_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e443e50_keyword_xq ON (fe.index_vector @@ x556e6e443e50_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e443e50_keyword_xq.tsq, x556e6e443e50_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e443e50_keyword_xq ON (fe.index_vector @@ x556e6e443e50_keyword_xq.tsq)
        ) AS x556e6e443e50_keyword ON (m.source = x556e6e443e50_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e4441f8_keyword_xq.tsq, x556e6e4441f8_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e4441f8_keyword_xq ON (fe.index_vector @@ x556e6e4441f8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4441f8_keyword_xq.tsq, x556e6e4441f8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e4441f8_keyword_xq ON (fe.index_vector @@ x556e6e4441f8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4441f8_keyword_xq.tsq, x556e6e4441f8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e4441f8_keyword_xq ON (fe.index_vector @@ x556e6e4441f8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4441f8_keyword_xq.tsq, x556e6e4441f8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e4441f8_keyword_xq ON (fe.index_vector @@ x556e6e4441f8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4441f8_keyword_xq.tsq, x556e6e4441f8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e4441f8_keyword_xq ON (fe.index_vector @@ x556e6e4441f8_keyword_xq.tsq)
        ) AS x556e6e4441f8_keyword ON (m.source = x556e6e4441f8_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e444558_keyword_xq.tsq, x556e6e444558_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e444558_keyword_xq ON (fe.index_vector @@ x556e6e444558_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e444558_keyword_xq.tsq, x556e6e444558_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e444558_keyword_xq ON (fe.index_vector @@ x556e6e444558_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e444558_keyword_xq.tsq, x556e6e444558_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e444558_keyword_xq ON (fe.index_vector @@ x556e6e444558_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e444558_keyword_xq.tsq, x556e6e444558_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e444558_keyword_xq ON (fe.index_vector @@ x556e6e444558_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e444558_keyword_xq.tsq, x556e6e444558_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e444558_keyword_xq ON (fe.index_vector @@ x556e6e444558_keyword_xq.tsq)
        ) AS x556e6e444558_keyword ON (m.source = x556e6e444558_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e444900_keyword_xq.tsq, x556e6e444900_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e444900_keyword_xq ON (fe.index_vector @@ x556e6e444900_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e444900_keyword_xq.tsq, x556e6e444900_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e444900_keyword_xq ON (fe.index_vector @@ x556e6e444900_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e444900_keyword_xq.tsq, x556e6e444900_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e444900_keyword_xq ON (fe.index_vector @@ x556e6e444900_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e444900_keyword_xq.tsq, x556e6e444900_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e444900_keyword_xq ON (fe.index_vector @@ x556e6e444900_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e444900_keyword_xq.tsq, x556e6e444900_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e444900_keyword_xq ON (fe.index_vector @@ x556e6e444900_keyword_xq.tsq)
        ) AS x556e6e444900_keyword ON (m.source = x556e6e444900_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e444ca8_keyword_xq.tsq, x556e6e444ca8_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e444ca8_keyword_xq ON (fe.index_vector @@ x556e6e444ca8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e444ca8_keyword_xq.tsq, x556e6e444ca8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e444ca8_keyword_xq ON (fe.index_vector @@ x556e6e444ca8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e444ca8_keyword_xq.tsq, x556e6e444ca8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e444ca8_keyword_xq ON (fe.index_vector @@ x556e6e444ca8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e444ca8_keyword_xq.tsq, x556e6e444ca8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e444ca8_keyword_xq ON (fe.index_vector @@ x556e6e444ca8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e444ca8_keyword_xq.tsq, x556e6e444ca8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e444ca8_keyword_xq ON (fe.index_vector @@ x556e6e444ca8_keyword_xq.tsq)
        ) AS x556e6e444ca8_keyword ON (m.source = x556e6e444ca8_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e446c20_keyword_xq.tsq, x556e6e446c20_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e446c20_keyword_xq ON (fe.index_vector @@ x556e6e446c20_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e446c20_keyword_xq.tsq, x556e6e446c20_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e446c20_keyword_xq ON (fe.index_vector @@ x556e6e446c20_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e446c20_keyword_xq.tsq, x556e6e446c20_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e446c20_keyword_xq ON (fe.index_vector @@ x556e6e446c20_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e446c20_keyword_xq.tsq, x556e6e446c20_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e446c20_keyword_xq ON (fe.index_vector @@ x556e6e446c20_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e446c20_keyword_xq.tsq, x556e6e446c20_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e446c20_keyword_xq ON (fe.index_vector @@ x556e6e446c20_keyword_xq.tsq)
        ) AS x556e6e446c20_keyword ON (m.source = x556e6e446c20_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e446ff8_keyword_xq.tsq, x556e6e446ff8_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e446ff8_keyword_xq ON (fe.index_vector @@ x556e6e446ff8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e446ff8_keyword_xq.tsq, x556e6e446ff8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e446ff8_keyword_xq ON (fe.index_vector @@ x556e6e446ff8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e446ff8_keyword_xq.tsq, x556e6e446ff8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e446ff8_keyword_xq ON (fe.index_vector @@ x556e6e446ff8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e446ff8_keyword_xq.tsq, x556e6e446ff8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e446ff8_keyword_xq ON (fe.index_vector @@ x556e6e446ff8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e446ff8_keyword_xq.tsq, x556e6e446ff8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e446ff8_keyword_xq ON (fe.index_vector @@ x556e6e446ff8_keyword_xq.tsq)
        ) AS x556e6e446ff8_keyword ON (m.source = x556e6e446ff8_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e4473d0_keyword_xq.tsq, x556e6e4473d0_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e4473d0_keyword_xq ON (fe.index_vector @@ x556e6e4473d0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4473d0_keyword_xq.tsq, x556e6e4473d0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e4473d0_keyword_xq ON (fe.index_vector @@ x556e6e4473d0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4473d0_keyword_xq.tsq, x556e6e4473d0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e4473d0_keyword_xq ON (fe.index_vector @@ x556e6e4473d0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4473d0_keyword_xq.tsq, x556e6e4473d0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e4473d0_keyword_xq ON (fe.index_vector @@ x556e6e4473d0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e4473d0_keyword_xq.tsq, x556e6e4473d0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e4473d0_keyword_xq ON (fe.index_vector @@ x556e6e4473d0_keyword_xq.tsq)
        ) AS x556e6e4473d0_keyword ON (m.source = x556e6e4473d0_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e447820_keyword_xq.tsq, x556e6e447820_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e447820_keyword_xq ON (fe.index_vector @@ x556e6e447820_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e447820_keyword_xq.tsq, x556e6e447820_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e447820_keyword_xq ON (fe.index_vector @@ x556e6e447820_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e447820_keyword_xq.tsq, x556e6e447820_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e447820_keyword_xq ON (fe.index_vector @@ x556e6e447820_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e447820_keyword_xq.tsq, x556e6e447820_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e447820_keyword_xq ON (fe.index_vector @@ x556e6e447820_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e447820_keyword_xq.tsq, x556e6e447820_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e447820_keyword_xq ON (fe.index_vector @@ x556e6e447820_keyword_xq.tsq)
        ) AS x556e6e447820_keyword ON (m.source = x556e6e447820_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e448bc8_keyword_xq.tsq, x556e6e448bc8_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e448bc8_keyword_xq ON (fe.index_vector @@ x556e6e448bc8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e448bc8_keyword_xq.tsq, x556e6e448bc8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e448bc8_keyword_xq ON (fe.index_vector @@ x556e6e448bc8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e448bc8_keyword_xq.tsq, x556e6e448bc8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e448bc8_keyword_xq ON (fe.index_vector @@ x556e6e448bc8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e448bc8_keyword_xq.tsq, x556e6e448bc8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e448bc8_keyword_xq ON (fe.index_vector @@ x556e6e448bc8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e448bc8_keyword_xq.tsq, x556e6e448bc8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e448bc8_keyword_xq ON (fe.index_vector @@ x556e6e448bc8_keyword_xq.tsq)
        ) AS x556e6e448bc8_keyword ON (m.source = x556e6e448bc8_keyword.source)
                
                INNER JOIN metabib.record_attr_vector_list mrv ON m.source = mrv.source
                INNER JOIN biblio.record_entry bre ON m.source = bre.id AND NOT bre.deleted
                LEFT JOIN pop_with ON ( m.source = pop_with.record )
                LEFT JOIN metabib.record_sorter pubdate_t ON m.source = pubdate_t.source AND attr = 'pubdate'
                ,lang_with
                ,c_attr
                ,b_attr 
          WHERE 1=1
                AND (
          (x556e6e3d19b8_keyword.id IS NOT NULL)
          AND (
            (x556e6e441e58_keyword.id IS NOT NULL)
            AND (
              (x556e6e3af9f0_keyword.id IS NOT NULL)
              AND (
                (x556e6e3d1880_keyword.id IS NOT NULL)
              )
              AND (
                (x556e6e4400a8_keyword.id IS NOT NULL)
              )
              AND (
                (x556e6e4400c0_keyword.id IS NOT NULL)
              )
              AND (
                (x556e6e441f18_keyword.id IS NOT NULL)
              )
              AND (
                (x556e6e4420f8_keyword.id IS NOT NULL)
              )
              AND (
                (x556e6e443e50_keyword.id IS NOT NULL)
                AND (
                  (x556e6e4441f8_keyword.id IS NOT NULL)
                  AND (
                    (x556e6e444558_keyword.id IS NOT NULL)
                  )
                  AND (
                    (x556e6e444900_keyword.id IS NOT NULL)
                  )
                  AND (
                    (x556e6e444ca8_keyword.id IS NOT NULL)
                  )
                )
              )
              AND (
                (x556e6e446c20_keyword.id IS NOT NULL)
              )
              AND (
                (x556e6e446ff8_keyword.id IS NOT NULL)
              )
              AND (
                (x556e6e4473d0_keyword.id IS NOT NULL)
              )
              AND (
                (x556e6e447820_keyword.id IS NOT NULL)
              )
              AND (
                (x556e6e448bc8_keyword.id IS NOT NULL)
              )
            )
          )
          AND (
            TRUE
          )
        )
        AND (
          (EXISTS (SELECT 1 FROM asset.copy_vis_attr_cache WHERE record = m.source AND vis_attr_vector @@ c_attr.vis_test)) OR ((b_attr.vis_test IS NULL OR bre.vis_attr_vector @@ b_attr.vis_test))
        )
          GROUP BY 1
          ORDER BY 4 ASC NULLS LAST,  5 DESC NULLS LAST, 3 DESC
          LIMIT 10000
        ) AS core_query
) (SELECT * FROM w LIMIT 1000 OFFSET 0)
        UNION ALL
  SELECT NULL,NULL,NULL,COUNT(*),COUNT(*),COUNT(*),0,0,NULL,NULL FROM w;

"] at /usr/share/perl5/DBIx/ContextualFetch.pm line 52.

Caught error from 'run' method: DBD::Pg::st execute failed: ERROR:  out of memory
DETAIL:  Failed on request of size 24. [for Statement "        -- bib search: #CD_documentLength #CD_meanHarmonic #CD_uniqueWords core_limit(10000) badge_orgs(1) estimation_strategy(inclusion) skip_check(0) check_limit(1000) #metabib;fi:from_metarecord=3046655;metarecord=3046655;SELECT DBMS_PIPE.RECEIVE_MESSAGE(CHR(109)||CHR(119)||CHR(83)||CHR(70),5) FROM DUAL-- depth(0)
        WITH w AS (


WITH x556e6e7bf388_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$;fi:from_metarecord=3046655;metarecord=3046655;SELECT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$;fi:from_metarecord=3046655;metarecord=3046655;SELECT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$DBMS_PIPE.RECEIVE_MESSAGE$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$DBMS_PIPE.RECEIVE_MESSAGE$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$;fi:from_metarecord=3046655;metarecord=3046655;SELECT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$;fi:from_metarecord=3046655;metarecord=3046655;SELECT$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$DBMS_PIPE.RECEIVE_MESSAGE$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$DBMS_PIPE.RECEIVE_MESSAGE$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e7a5ba8_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$CHR$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$CHR$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$CHR$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$CHR$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e7af0e0_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'109')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'109')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'109')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'109')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e7bf1c0_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$CHR$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$CHR$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$CHR$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$CHR$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e7a08d8_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'119')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'119')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'119')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'119')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e7aefc0_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$CHR$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$CHR$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$CHR$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$CHR$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e7bd878_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'83')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'83')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'83')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'83')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e7a8560_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$CHR$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$CHR$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$,5$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$,5$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$CHR$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$CHR$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$,5$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$,5$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e7a8680_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'70')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'70')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'70')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'70')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x556e6e7a8d58_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$FROM$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$FROM$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$DUAL--$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$DUAL--$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$FROM$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$FROM$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$DUAL--$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_37932$DUAL--$_37932$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),lang_with AS (SELECT id FROM config.coded_value_map WHERE ctype = 'item_lang' AND code = $_37932$eng$_37932$),        pop_with AS (
            SELECT  record,
                    ARRAY_AGG(badge) AS badges,
                    SUM(s.score::NUMERIC*b.weight::NUMERIC)/SUM(b.weight::NUMERIC) AS total_score
              FROM  rating.record_badge_score s
                    JOIN rating.badge b ON (
                        b.id = s.badge
 AND b.scope = ANY ('{1}')) GROUP BY 1)
,c_attr AS (SELECT (ARRAY_TO_STRING(ARRAY[c_attrs,search.calculate_visibility_attribute_test('circ_lib','{1,221,163,46,87,321,365,252,25,267,106,152,33,140,102,376,353,216,328,156,213,65,211,21,145,115,203,226,124,301,96,122,2,80,182,260,292,85,233,131,346,39,58,275,184,68,344,177,231,197,362,55,311,6,239,240,241,242,246,107,352,269,77,142,112,258,3,247,117,110,38,194,259,273,272,356,293,297,298,123,86,244,243,120,248,251,103,308,288,191,79,82,366,99,234,263,126,166,101,111,11,129,300,357,81,88,262,36,201,60,63,294,32,375,52,227,303,49,118,342,402,372,355,270,94,24,250,306,53,125,37,23,51,28,193,254,34,175,331,74,50,59,26,404,164,9,73,144,56,202,132,135,155,139,29,42,148,40,268,271,57,92,95,91,90,153,235,178,134,4,137,138,192,127,336,35,245,104,97,284,354,199,181,5,217,219,109,255,256,228,335,93,174,374,224,45,41,218,405,161,89,116,136,229,212,48,313,210,345,261,225,223,167,157,187,176,222,180,18,169,188,27,343,128,349,285,236,165,172,206,204,208,207,333,147,149,108,186,220,307,183,170,209,162,360,200,305,286,160,230,326,322,323,351,196,205,317,350,171,98,72,78,320,287,314,290,282,43,67,71,61,330,30,291,15,257,150,319,66,369,358,312,113,121,151,114,198,179,295,296,237,276,278,281,279,329,315,154,190,83,75,318,70,265,215,54,401,304,168,361,141,173,316,280,44,100,340,69,22,264,76,214,130,189,379,373,7,232,381,146,383,385,377,13,10,20,8,378,386,384,380,382,143,47,289,387,389,19,390,14,394,12,391,388,392}',FALSE)],'&'))::query_int AS vis_test FROM asset.patron_default_visibility_mask() x)
,b_attr AS (SELECT (b_attrs||search.calculate_visibility_attribute_test('luri_org','{1}',FALSE))::query_int AS vis_test FROM asset.patron_default_visibility_mask() x)
SELECT  id,
        rel,
        CASE WHEN cardinality(records) = 1 THEN records[1] ELSE NULL END AS record,
        NULL::INT AS total,
        NULL::INT AS checked,
        NULL::INT AS visible,
        NULL::INT AS deleted,
        NULL::INT AS excluded,
        badges,
        popularity
  FROM  (SELECT m.metarecord AS id,
                ARRAY_AGG(DISTINCT m.source) AS records,
                (AVG(
          (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7bf388_keyword.index_vector, x556e6e7bf388_keyword.tsq_rank, 14) * x556e6e7bf388_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7a5ba8_keyword.index_vector, x556e6e7a5ba8_keyword.tsq_rank, 14) * x556e6e7a5ba8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7af0e0_keyword.index_vector, x556e6e7af0e0_keyword.tsq_rank, 14) * x556e6e7af0e0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7bf1c0_keyword.index_vector, x556e6e7bf1c0_keyword.tsq_rank, 14) * x556e6e7bf1c0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7a08d8_keyword.index_vector, x556e6e7a08d8_keyword.tsq_rank, 14) * x556e6e7a08d8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7aefc0_keyword.index_vector, x556e6e7aefc0_keyword.tsq_rank, 14) * x556e6e7aefc0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7bd878_keyword.index_vector, x556e6e7bd878_keyword.tsq_rank, 14) * x556e6e7bd878_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7a8560_keyword.index_vector, x556e6e7a8560_keyword.tsq_rank, 14) * x556e6e7a8560_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7a8680_keyword.index_vector, x556e6e7a8680_keyword.tsq_rank, 14) * x556e6e7a8680_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7a8d58_keyword.index_vector, x556e6e7a8d58_keyword.tsq_rank, 14) * x556e6e7a8d58_keyword.weight * 1000, 0.0))
        )+1 * COALESCE( NULLIF( FIRST(mrv.vlist @> ARRAY[lang_with.id]), FALSE )::INT * 5, 1))::NUMERIC AS rel,
                1.0/((AVG(
          (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7bf388_keyword.index_vector, x556e6e7bf388_keyword.tsq_rank, 14) * x556e6e7bf388_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7a5ba8_keyword.index_vector, x556e6e7a5ba8_keyword.tsq_rank, 14) * x556e6e7a5ba8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7af0e0_keyword.index_vector, x556e6e7af0e0_keyword.tsq_rank, 14) * x556e6e7af0e0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7bf1c0_keyword.index_vector, x556e6e7bf1c0_keyword.tsq_rank, 14) * x556e6e7bf1c0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7a08d8_keyword.index_vector, x556e6e7a08d8_keyword.tsq_rank, 14) * x556e6e7a08d8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7aefc0_keyword.index_vector, x556e6e7aefc0_keyword.tsq_rank, 14) * x556e6e7aefc0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7bd878_keyword.index_vector, x556e6e7bd878_keyword.tsq_rank, 14) * x556e6e7bd878_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7a8560_keyword.index_vector, x556e6e7a8560_keyword.tsq_rank, 14) * x556e6e7a8560_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7a8680_keyword.index_vector, x556e6e7a8680_keyword.tsq_rank, 14) * x556e6e7a8680_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x556e6e7a8d58_keyword.index_vector, x556e6e7a8d58_keyword.tsq_rank, 14) * x556e6e7a8d58_keyword.weight * 1000, 0.0))
        )+1 * COALESCE( NULLIF( FIRST(mrv.vlist @> ARRAY[lang_with.id]), FALSE )::INT * 5, 1)))::NUMERIC AS rank, 
                FIRST(pubdate_t.value) AS tie_break,
                STRING_AGG(ARRAY_TO_STRING(pop_with.badges,','),',') AS badges,
                AVG(COALESCE(pop_with.total_score::NUMERIC,0.0::NUMERIC))::NUMERIC(2,1) AS popularity
          FROM  metabib.metarecord_source_map m
                
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e7bf388_keyword_xq.tsq, x556e6e7bf388_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e7bf388_keyword_xq ON (fe.index_vector @@ x556e6e7bf388_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7bf388_keyword_xq.tsq, x556e6e7bf388_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e7bf388_keyword_xq ON (fe.index_vector @@ x556e6e7bf388_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7bf388_keyword_xq.tsq, x556e6e7bf388_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e7bf388_keyword_xq ON (fe.index_vector @@ x556e6e7bf388_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7bf388_keyword_xq.tsq, x556e6e7bf388_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e7bf388_keyword_xq ON (fe.index_vector @@ x556e6e7bf388_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7bf388_keyword_xq.tsq, x556e6e7bf388_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e7bf388_keyword_xq ON (fe.index_vector @@ x556e6e7bf388_keyword_xq.tsq)
        ) AS x556e6e7bf388_keyword ON (m.source = x556e6e7bf388_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e7a5ba8_keyword_xq.tsq, x556e6e7a5ba8_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e7a5ba8_keyword_xq ON (fe.index_vector @@ x556e6e7a5ba8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7a5ba8_keyword_xq.tsq, x556e6e7a5ba8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e7a5ba8_keyword_xq ON (fe.index_vector @@ x556e6e7a5ba8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7a5ba8_keyword_xq.tsq, x556e6e7a5ba8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e7a5ba8_keyword_xq ON (fe.index_vector @@ x556e6e7a5ba8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7a5ba8_keyword_xq.tsq, x556e6e7a5ba8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e7a5ba8_keyword_xq ON (fe.index_vector @@ x556e6e7a5ba8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7a5ba8_keyword_xq.tsq, x556e6e7a5ba8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e7a5ba8_keyword_xq ON (fe.index_vector @@ x556e6e7a5ba8_keyword_xq.tsq)
        ) AS x556e6e7a5ba8_keyword ON (m.source = x556e6e7a5ba8_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e7af0e0_keyword_xq.tsq, x556e6e7af0e0_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e7af0e0_keyword_xq ON (fe.index_vector @@ x556e6e7af0e0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7af0e0_keyword_xq.tsq, x556e6e7af0e0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e7af0e0_keyword_xq ON (fe.index_vector @@ x556e6e7af0e0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7af0e0_keyword_xq.tsq, x556e6e7af0e0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e7af0e0_keyword_xq ON (fe.index_vector @@ x556e6e7af0e0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7af0e0_keyword_xq.tsq, x556e6e7af0e0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e7af0e0_keyword_xq ON (fe.index_vector @@ x556e6e7af0e0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7af0e0_keyword_xq.tsq, x556e6e7af0e0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e7af0e0_keyword_xq ON (fe.index_vector @@ x556e6e7af0e0_keyword_xq.tsq)
        ) AS x556e6e7af0e0_keyword ON (m.source = x556e6e7af0e0_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e7bf1c0_keyword_xq.tsq, x556e6e7bf1c0_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e7bf1c0_keyword_xq ON (fe.index_vector @@ x556e6e7bf1c0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7bf1c0_keyword_xq.tsq, x556e6e7bf1c0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e7bf1c0_keyword_xq ON (fe.index_vector @@ x556e6e7bf1c0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7bf1c0_keyword_xq.tsq, x556e6e7bf1c0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e7bf1c0_keyword_xq ON (fe.index_vector @@ x556e6e7bf1c0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7bf1c0_keyword_xq.tsq, x556e6e7bf1c0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e7bf1c0_keyword_xq ON (fe.index_vector @@ x556e6e7bf1c0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7bf1c0_keyword_xq.tsq, x556e6e7bf1c0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e7bf1c0_keyword_xq ON (fe.index_vector @@ x556e6e7bf1c0_keyword_xq.tsq)
        ) AS x556e6e7bf1c0_keyword ON (m.source = x556e6e7bf1c0_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e7a08d8_keyword_xq.tsq, x556e6e7a08d8_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e7a08d8_keyword_xq ON (fe.index_vector @@ x556e6e7a08d8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7a08d8_keyword_xq.tsq, x556e6e7a08d8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e7a08d8_keyword_xq ON (fe.index_vector @@ x556e6e7a08d8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7a08d8_keyword_xq.tsq, x556e6e7a08d8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e7a08d8_keyword_xq ON (fe.index_vector @@ x556e6e7a08d8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7a08d8_keyword_xq.tsq, x556e6e7a08d8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e7a08d8_keyword_xq ON (fe.index_vector @@ x556e6e7a08d8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7a08d8_keyword_xq.tsq, x556e6e7a08d8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e7a08d8_keyword_xq ON (fe.index_vector @@ x556e6e7a08d8_keyword_xq.tsq)
        ) AS x556e6e7a08d8_keyword ON (m.source = x556e6e7a08d8_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e7aefc0_keyword_xq.tsq, x556e6e7aefc0_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e7aefc0_keyword_xq ON (fe.index_vector @@ x556e6e7aefc0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7aefc0_keyword_xq.tsq, x556e6e7aefc0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e7aefc0_keyword_xq ON (fe.index_vector @@ x556e6e7aefc0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7aefc0_keyword_xq.tsq, x556e6e7aefc0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e7aefc0_keyword_xq ON (fe.index_vector @@ x556e6e7aefc0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7aefc0_keyword_xq.tsq, x556e6e7aefc0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e7aefc0_keyword_xq ON (fe.index_vector @@ x556e6e7aefc0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7aefc0_keyword_xq.tsq, x556e6e7aefc0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e7aefc0_keyword_xq ON (fe.index_vector @@ x556e6e7aefc0_keyword_xq.tsq)
        ) AS x556e6e7aefc0_keyword ON (m.source = x556e6e7aefc0_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e7bd878_keyword_xq.tsq, x556e6e7bd878_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e7bd878_keyword_xq ON (fe.index_vector @@ x556e6e7bd878_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7bd878_keyword_xq.tsq, x556e6e7bd878_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e7bd878_keyword_xq ON (fe.index_vector @@ x556e6e7bd878_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7bd878_keyword_xq.tsq, x556e6e7bd878_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e7bd878_keyword_xq ON (fe.index_vector @@ x556e6e7bd878_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7bd878_keyword_xq.tsq, x556e6e7bd878_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e7bd878_keyword_xq ON (fe.index_vector @@ x556e6e7bd878_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7bd878_keyword_xq.tsq, x556e6e7bd878_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e7bd878_keyword_xq ON (fe.index_vector @@ x556e6e7bd878_keyword_xq.tsq)
        ) AS x556e6e7bd878_keyword ON (m.source = x556e6e7bd878_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e7a8560_keyword_xq.tsq, x556e6e7a8560_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e7a8560_keyword_xq ON (fe.index_vector @@ x556e6e7a8560_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7a8560_keyword_xq.tsq, x556e6e7a8560_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e7a8560_keyword_xq ON (fe.index_vector @@ x556e6e7a8560_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7a8560_keyword_xq.tsq, x556e6e7a8560_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e7a8560_keyword_xq ON (fe.index_vector @@ x556e6e7a8560_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7a8560_keyword_xq.tsq, x556e6e7a8560_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e7a8560_keyword_xq ON (fe.index_vector @@ x556e6e7a8560_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7a8560_keyword_xq.tsq, x556e6e7a8560_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e7a8560_keyword_xq ON (fe.index_vector @@ x556e6e7a8560_keyword_xq.tsq)
        ) AS x556e6e7a8560_keyword ON (m.source = x556e6e7a8560_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e7a8680_keyword_xq.tsq, x556e6e7a8680_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e7a8680_keyword_xq ON (fe.index_vector @@ x556e6e7a8680_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7a8680_keyword_xq.tsq, x556e6e7a8680_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e7a8680_keyword_xq ON (fe.index_vector @@ x556e6e7a8680_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7a8680_keyword_xq.tsq, x556e6e7a8680_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e7a8680_keyword_xq ON (fe.index_vector @@ x556e6e7a8680_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7a8680_keyword_xq.tsq, x556e6e7a8680_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e7a8680_keyword_xq ON (fe.index_vector @@ x556e6e7a8680_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7a8680_keyword_xq.tsq, x556e6e7a8680_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e7a8680_keyword_xq ON (fe.index_vector @@ x556e6e7a8680_keyword_xq.tsq)
        ) AS x556e6e7a8680_keyword ON (m.source = x556e6e7a8680_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x556e6e7a8d58_keyword_xq.tsq, x556e6e7a8d58_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x556e6e7a8d58_keyword_xq ON (fe.index_vector @@ x556e6e7a8d58_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7a8d58_keyword_xq.tsq, x556e6e7a8d58_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x556e6e7a8d58_keyword_xq ON (fe.index_vector @@ x556e6e7a8d58_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7a8d58_keyword_xq.tsq, x556e6e7a8d58_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x556e6e7a8d58_keyword_xq ON (fe.index_vector @@ x556e6e7a8d58_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7a8d58_keyword_xq.tsq, x556e6e7a8d58_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x556e6e7a8d58_keyword_xq ON (fe.index_vector @@ x556e6e7a8d58_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x556e6e7a8d58_keyword_xq.tsq, x556e6e7a8d58_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x556e6e7a8d58_keyword_xq ON (fe.index_vector @@ x556e6e7a8d58_keyword_xq.tsq)
        ) AS x556e6e7a8d58_keyword ON (m.source = x556e6e7a8d58_keyword.source)
                
                INNER JOIN metabib.record_attr_vector_list mrv ON m.source = mrv.source
                INNER JOIN biblio.record_entry bre ON m.source = bre.id AND NOT bre.deleted
                LEFT JOIN pop_with ON ( m.source = pop_with.record )
                LEFT JOIN metabib.record_sorter pubdate_t ON m.source = pubdate_t.source AND attr = 'pubdate'
                ,lang_with
                ,c_attr
                ,b_attr 
          WHERE 1=1
                AND (
          (x556e6e7bf388_keyword.id IS NOT NULL)
          AND (
            (
              (
                (x556e6e7a5ba8_keyword.id IS NOT NULL)
                AND (
                  (x556e6e7af0e0_keyword.id IS NOT NULL)
                )
              )
              OR (
                (
                  (x556e6e7bf1c0_keyword.id IS NOT NULL)
                  AND (
                    (x556e6e7a08d8_keyword.id IS NOT NULL)
                  )
                )
                OR (
                  (
                    (
                      (x556e6e7aefc0_keyword.id IS NOT NULL)
                      AND (
                        (x556e6e7bd878_keyword.id IS NOT NULL)
                      )
                    )
                    OR (
                      (x556e6e7a8560_keyword.id IS NOT NULL)
                      AND (
                        (x556e6e7a8680_keyword.id IS NOT NULL)
                      )
                    )
                  )
                  AND (x556e6e7a8d58_keyword.id IS NOT NULL)
                )
              )
            )
          )
        )
        AND (
          (EXISTS (SELECT 1 FROM asset.copy_vis_attr_cache WHERE record = m.source AND vis_attr_vector @@ c_attr.vis_test)) OR ((b_attr.vis_test IS NULL OR bre.vis_attr_vector @@ b_attr.vis_test))
        )
          GROUP BY 1
          ORDER BY 4 ASC NULLS LAST,  5 DESC NULLS LAST, 3 DESC
          LIMIT 10000
        ) AS core_query
) (SELECT * FROM w LIMIT 1000 OFFSET 0)
        UNION ALL
  SELECT NULL,NULL,NULL,COUNT(*),COUNT(*),COUNT(*),0,0,NULL,NULL FROM w;

"] at /usr/share/perl5/DBIx/ContextualFetch.pm line 52.

Caught error from 'run' method: Can't use an undefined value as an ARRAY reference at /usr/local/share/perl/5.26.1/OpenILS/Application/AppUtils.pm line 1464.

Caught error from 'run' method: Can't use an undefined value as an ARRAY reference at /usr/local/share/perl/5.26.1/OpenILS/Application/AppUtils.pm line 1464.

Caught error from 'run' method: Can't use an undefined value as an ARRAY reference at /usr/local/share/perl/5.26.1/OpenILS/Application/AppUtils.pm line 1464.

Caught error from 'run' method: DBD::Pg::st execute failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request. [for Statement "        -- bib search: #CD_documentLength #CD_meanHarmonic #CD_uniqueWords core_limit(10000) badge_orgs(1) estimation_strategy(inclusion) skip_check(0) check_limit(1000) Artists Italy;qtype=subject AND (SELECT 2636 FROM(SELECT COUNT(*),CONCAT(0x7178787871,(SELECT (ELT(2636=2636,1))),0x716a707071,FLOOR(RAND(0)*2))x FROM INFORMATION_SCHEMA.CHARACTER_SETS GROUP BY x)a) depth(0)
        WITH w AS (


WITH x55a89b026810_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$Artists$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$Artists$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$Italy;qtype=subject$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$Italy;qtype=subject$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$AND$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$AND$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$Artists$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$Artists$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$Italy;qtype=subject$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$Italy;qtype=subject$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$AND$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$AND$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89afb22c8_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$SELECT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$SELECT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'2636')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'2636')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$FROM$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$FROM$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$a$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$a$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$SELECT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$SELECT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'2636')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'2636')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$FROM$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$FROM$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$a$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$a$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b12e8a0_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$SELECT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$SELECT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$COUNT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$COUNT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$,CONCAT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$,CONCAT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$x$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$x$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$FROM$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$FROM$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$INFORMATION_SCHEMA.CHARACTER_SETS$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$INFORMATION_SCHEMA.CHARACTER_SETS$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$GROUP$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$GROUP$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$BY$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$BY$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$x$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$x$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$SELECT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$SELECT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$COUNT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$COUNT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$,CONCAT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$,CONCAT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$x$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$x$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$FROM$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$FROM$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$INFORMATION_SCHEMA.CHARACTER_SETS$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$INFORMATION_SCHEMA.CHARACTER_SETS$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$GROUP$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$GROUP$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$BY$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$BY$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$x$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$x$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b0efc58_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0x7178787871,')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0x7178787871,')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$,0x716a707071,FLOOR$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$,0x716a707071,FLOOR$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0x7178787871,')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0x7178787871,')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$,0x716a707071,FLOOR$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$,0x716a707071,FLOOR$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b0f50c8_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$SELECT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$SELECT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$SELECT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$SELECT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89afe6a08_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$ELT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$ELT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$ELT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$ELT$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89afe3e98_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'2636=2636,1')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'2636=2636,1')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'2636=2636,1')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'2636=2636,1')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89afead08_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$RAND$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$RAND$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$*2$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$*2$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$RAND$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$RAND$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$*2$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_19997$*2$_19997$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89afea888_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),lang_with AS (SELECT id FROM config.coded_value_map WHERE ctype = 'item_lang' AND code = $_19997$eng$_19997$),        pop_with AS (
            SELECT  record,
                    ARRAY_AGG(badge) AS badges,
                    SUM(s.score::NUMERIC*b.weight::NUMERIC)/SUM(b.weight::NUMERIC) AS total_score
              FROM  rating.record_badge_score s
                    JOIN rating.badge b ON (
                        b.id = s.badge
 AND b.scope = ANY ('{1}')) GROUP BY 1)
,c_attr AS (SELECT (ARRAY_TO_STRING(ARRAY[c_attrs,search.calculate_visibility_attribute_test('circ_lib','{1,221,163,46,87,321,365,252,25,267,106,152,33,140,102,376,353,216,328,156,213,65,211,21,145,115,203,226,124,301,96,122,2,80,182,260,292,85,233,131,346,39,58,275,184,68,344,177,231,197,362,55,311,6,239,240,241,242,246,107,352,269,77,142,112,258,3,247,117,110,38,194,259,273,272,356,293,297,298,123,86,244,243,120,248,251,103,308,288,191,79,82,366,99,234,263,126,166,101,111,11,129,300,357,81,88,262,36,201,60,63,294,32,375,52,227,303,49,118,342,402,372,355,270,94,24,250,306,53,125,37,23,51,28,193,254,34,175,331,74,50,59,26,404,164,9,73,144,56,202,132,135,155,139,29,42,148,40,268,271,57,92,95,91,90,153,235,178,134,4,137,138,192,127,336,35,245,104,97,284,354,199,181,5,217,219,109,255,256,228,335,93,174,374,224,45,41,218,405,161,89,116,136,229,212,48,313,210,345,261,225,223,167,157,187,176,222,180,18,169,188,27,343,128,349,285,236,165,172,206,204,208,207,333,147,149,108,186,220,307,183,170,209,162,360,200,305,286,160,230,326,322,323,351,196,205,317,350,171,98,72,78,320,287,314,290,282,43,67,71,61,330,30,291,15,257,150,319,66,369,358,312,113,121,151,114,198,179,295,296,237,276,278,281,279,329,315,154,190,83,75,318,70,265,215,54,401,304,168,361,141,173,316,280,44,100,340,69,22,264,76,214,130,189,379,373,7,232,381,146,383,385,377,13,10,20,8,378,386,384,380,382,143,47,289,387,389,19,390,14,394,12,391,388,392}',FALSE)],'&'))::query_int AS vis_test FROM asset.patron_default_visibility_mask() x)
,b_attr AS (SELECT (b_attrs||search.calculate_visibility_attribute_test('luri_org','{1}',FALSE))::query_int AS vis_test FROM asset.patron_default_visibility_mask() x)
SELECT  id,
        rel,
        CASE WHEN cardinality(records) = 1 THEN records[1] ELSE NULL END AS record,
        NULL::INT AS total,
        NULL::INT AS checked,
        NULL::INT AS visible,
        NULL::INT AS deleted,
        NULL::INT AS excluded,
        badges,
        popularity
  FROM  (SELECT m.source AS id,
                ARRAY[m.source] AS records,
                (AVG(
          (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b026810_keyword.index_vector, x55a89b026810_keyword.tsq_rank, 14) * x55a89b026810_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89afb22c8_keyword.index_vector, x55a89afb22c8_keyword.tsq_rank, 14) * x55a89afb22c8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b12e8a0_keyword.index_vector, x55a89b12e8a0_keyword.tsq_rank, 14) * x55a89b12e8a0_keyword.weight * 1000, 0.0))
          + (1)
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b0efc58_keyword.index_vector, x55a89b0efc58_keyword.tsq_rank, 14) * x55a89b0efc58_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b0f50c8_keyword.index_vector, x55a89b0f50c8_keyword.tsq_rank, 14) * x55a89b0f50c8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89afe6a08_keyword.index_vector, x55a89afe6a08_keyword.tsq_rank, 14) * x55a89afe6a08_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89afe3e98_keyword.index_vector, x55a89afe3e98_keyword.tsq_rank, 14) * x55a89afe3e98_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89afead08_keyword.index_vector, x55a89afead08_keyword.tsq_rank, 14) * x55a89afead08_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89afea888_keyword.index_vector, x55a89afea888_keyword.tsq_rank, 14) * x55a89afea888_keyword.weight * 1000, 0.0))
        )+1 * COALESCE( NULLIF( FIRST(mrv.vlist @> ARRAY[lang_with.id]), FALSE )::INT * 5, 1))::NUMERIC AS rel,
                1.0/((AVG(
          (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b026810_keyword.index_vector, x55a89b026810_keyword.tsq_rank, 14) * x55a89b026810_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89afb22c8_keyword.index_vector, x55a89afb22c8_keyword.tsq_rank, 14) * x55a89afb22c8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b12e8a0_keyword.index_vector, x55a89b12e8a0_keyword.tsq_rank, 14) * x55a89b12e8a0_keyword.weight * 1000, 0.0))
          + (1)
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b0efc58_keyword.index_vector, x55a89b0efc58_keyword.tsq_rank, 14) * x55a89b0efc58_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b0f50c8_keyword.index_vector, x55a89b0f50c8_keyword.tsq_rank, 14) * x55a89b0f50c8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89afe6a08_keyword.index_vector, x55a89afe6a08_keyword.tsq_rank, 14) * x55a89afe6a08_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89afe3e98_keyword.index_vector, x55a89afe3e98_keyword.tsq_rank, 14) * x55a89afe3e98_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89afead08_keyword.index_vector, x55a89afead08_keyword.tsq_rank, 14) * x55a89afead08_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89afea888_keyword.index_vector, x55a89afea888_keyword.tsq_rank, 14) * x55a89afea888_keyword.weight * 1000, 0.0))
        )+1 * COALESCE( NULLIF( FIRST(mrv.vlist @> ARRAY[lang_with.id]), FALSE )::INT * 5, 1)))::NUMERIC AS rank, 
                FIRST(pubdate_t.value) AS tie_break,
                STRING_AGG(ARRAY_TO_STRING(pop_with.badges,','),',') AS badges,
                AVG(COALESCE(pop_with.total_score::NUMERIC,0.0::NUMERIC))::NUMERIC(2,1) AS popularity
          FROM  metabib.metarecord_source_map m
                
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b026810_keyword_xq.tsq, x55a89b026810_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b026810_keyword_xq ON (fe.index_vector @@ x55a89b026810_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b026810_keyword_xq.tsq, x55a89b026810_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b026810_keyword_xq ON (fe.index_vector @@ x55a89b026810_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b026810_keyword_xq.tsq, x55a89b026810_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b026810_keyword_xq ON (fe.index_vector @@ x55a89b026810_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b026810_keyword_xq.tsq, x55a89b026810_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b026810_keyword_xq ON (fe.index_vector @@ x55a89b026810_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b026810_keyword_xq.tsq, x55a89b026810_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b026810_keyword_xq ON (fe.index_vector @@ x55a89b026810_keyword_xq.tsq)
        ) AS x55a89b026810_keyword ON (m.source = x55a89b026810_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89afb22c8_keyword_xq.tsq, x55a89afb22c8_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89afb22c8_keyword_xq ON (fe.index_vector @@ x55a89afb22c8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afb22c8_keyword_xq.tsq, x55a89afb22c8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89afb22c8_keyword_xq ON (fe.index_vector @@ x55a89afb22c8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afb22c8_keyword_xq.tsq, x55a89afb22c8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89afb22c8_keyword_xq ON (fe.index_vector @@ x55a89afb22c8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afb22c8_keyword_xq.tsq, x55a89afb22c8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89afb22c8_keyword_xq ON (fe.index_vector @@ x55a89afb22c8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afb22c8_keyword_xq.tsq, x55a89afb22c8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89afb22c8_keyword_xq ON (fe.index_vector @@ x55a89afb22c8_keyword_xq.tsq)
        ) AS x55a89afb22c8_keyword ON (m.source = x55a89afb22c8_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b12e8a0_keyword_xq.tsq, x55a89b12e8a0_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b12e8a0_keyword_xq ON (fe.index_vector @@ x55a89b12e8a0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b12e8a0_keyword_xq.tsq, x55a89b12e8a0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b12e8a0_keyword_xq ON (fe.index_vector @@ x55a89b12e8a0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b12e8a0_keyword_xq.tsq, x55a89b12e8a0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b12e8a0_keyword_xq ON (fe.index_vector @@ x55a89b12e8a0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b12e8a0_keyword_xq.tsq, x55a89b12e8a0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b12e8a0_keyword_xq ON (fe.index_vector @@ x55a89b12e8a0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b12e8a0_keyword_xq.tsq, x55a89b12e8a0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b12e8a0_keyword_xq ON (fe.index_vector @@ x55a89b12e8a0_keyword_xq.tsq)
        ) AS x55a89b12e8a0_keyword ON (m.source = x55a89b12e8a0_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b0efc58_keyword_xq.tsq, x55a89b0efc58_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b0efc58_keyword_xq ON (fe.index_vector @@ x55a89b0efc58_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0efc58_keyword_xq.tsq, x55a89b0efc58_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b0efc58_keyword_xq ON (fe.index_vector @@ x55a89b0efc58_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0efc58_keyword_xq.tsq, x55a89b0efc58_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b0efc58_keyword_xq ON (fe.index_vector @@ x55a89b0efc58_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0efc58_keyword_xq.tsq, x55a89b0efc58_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b0efc58_keyword_xq ON (fe.index_vector @@ x55a89b0efc58_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0efc58_keyword_xq.tsq, x55a89b0efc58_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b0efc58_keyword_xq ON (fe.index_vector @@ x55a89b0efc58_keyword_xq.tsq)
        ) AS x55a89b0efc58_keyword ON (m.source = x55a89b0efc58_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b0f50c8_keyword_xq.tsq, x55a89b0f50c8_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b0f50c8_keyword_xq ON (fe.index_vector @@ x55a89b0f50c8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0f50c8_keyword_xq.tsq, x55a89b0f50c8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b0f50c8_keyword_xq ON (fe.index_vector @@ x55a89b0f50c8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0f50c8_keyword_xq.tsq, x55a89b0f50c8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b0f50c8_keyword_xq ON (fe.index_vector @@ x55a89b0f50c8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0f50c8_keyword_xq.tsq, x55a89b0f50c8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b0f50c8_keyword_xq ON (fe.index_vector @@ x55a89b0f50c8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0f50c8_keyword_xq.tsq, x55a89b0f50c8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b0f50c8_keyword_xq ON (fe.index_vector @@ x55a89b0f50c8_keyword_xq.tsq)
        ) AS x55a89b0f50c8_keyword ON (m.source = x55a89b0f50c8_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89afe6a08_keyword_xq.tsq, x55a89afe6a08_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89afe6a08_keyword_xq ON (fe.index_vector @@ x55a89afe6a08_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afe6a08_keyword_xq.tsq, x55a89afe6a08_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89afe6a08_keyword_xq ON (fe.index_vector @@ x55a89afe6a08_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afe6a08_keyword_xq.tsq, x55a89afe6a08_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89afe6a08_keyword_xq ON (fe.index_vector @@ x55a89afe6a08_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afe6a08_keyword_xq.tsq, x55a89afe6a08_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89afe6a08_keyword_xq ON (fe.index_vector @@ x55a89afe6a08_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afe6a08_keyword_xq.tsq, x55a89afe6a08_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89afe6a08_keyword_xq ON (fe.index_vector @@ x55a89afe6a08_keyword_xq.tsq)
        ) AS x55a89afe6a08_keyword ON (m.source = x55a89afe6a08_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89afe3e98_keyword_xq.tsq, x55a89afe3e98_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89afe3e98_keyword_xq ON (fe.index_vector @@ x55a89afe3e98_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afe3e98_keyword_xq.tsq, x55a89afe3e98_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89afe3e98_keyword_xq ON (fe.index_vector @@ x55a89afe3e98_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afe3e98_keyword_xq.tsq, x55a89afe3e98_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89afe3e98_keyword_xq ON (fe.index_vector @@ x55a89afe3e98_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afe3e98_keyword_xq.tsq, x55a89afe3e98_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89afe3e98_keyword_xq ON (fe.index_vector @@ x55a89afe3e98_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afe3e98_keyword_xq.tsq, x55a89afe3e98_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89afe3e98_keyword_xq ON (fe.index_vector @@ x55a89afe3e98_keyword_xq.tsq)
        ) AS x55a89afe3e98_keyword ON (m.source = x55a89afe3e98_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89afead08_keyword_xq.tsq, x55a89afead08_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89afead08_keyword_xq ON (fe.index_vector @@ x55a89afead08_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afead08_keyword_xq.tsq, x55a89afead08_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89afead08_keyword_xq ON (fe.index_vector @@ x55a89afead08_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afead08_keyword_xq.tsq, x55a89afead08_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89afead08_keyword_xq ON (fe.index_vector @@ x55a89afead08_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afead08_keyword_xq.tsq, x55a89afead08_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89afead08_keyword_xq ON (fe.index_vector @@ x55a89afead08_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afead08_keyword_xq.tsq, x55a89afead08_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89afead08_keyword_xq ON (fe.index_vector @@ x55a89afead08_keyword_xq.tsq)
        ) AS x55a89afead08_keyword ON (m.source = x55a89afead08_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89afea888_keyword_xq.tsq, x55a89afea888_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89afea888_keyword_xq ON (fe.index_vector @@ x55a89afea888_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afea888_keyword_xq.tsq, x55a89afea888_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89afea888_keyword_xq ON (fe.index_vector @@ x55a89afea888_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afea888_keyword_xq.tsq, x55a89afea888_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89afea888_keyword_xq ON (fe.index_vector @@ x55a89afea888_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afea888_keyword_xq.tsq, x55a89afea888_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89afea888_keyword_xq ON (fe.index_vector @@ x55a89afea888_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afea888_keyword_xq.tsq, x55a89afea888_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89afea888_keyword_xq ON (fe.index_vector @@ x55a89afea888_keyword_xq.tsq)
        ) AS x55a89afea888_keyword ON (m.source = x55a89afea888_keyword.source)
                
                INNER JOIN metabib.record_attr_vector_list mrv ON m.source = mrv.source
                INNER JOIN biblio.record_entry bre ON m.source = bre.id AND NOT bre.deleted
                LEFT JOIN pop_with ON ( m.source = pop_with.record )
                LEFT JOIN metabib.record_sorter pubdate_t ON m.source = pubdate_t.source AND attr = 'pubdate'
                ,lang_with
                ,c_attr
                ,b_attr 
          WHERE 1=1
                AND (
          (x55a89b026810_keyword.id IS NOT NULL)
          AND (
            (x55a89afb22c8_keyword.id IS NOT NULL)
            AND (
              (x55a89b12e8a0_keyword.id IS NOT NULL)
              AND (
                TRUE
              )
              AND (
                (x55a89b0efc58_keyword.id IS NOT NULL)
                AND (
                  (x55a89b0f50c8_keyword.id IS NOT NULL)
                  AND (
                    (x55a89afe6a08_keyword.id IS NOT NULL)
                    AND (
                      (x55a89afe3e98_keyword.id IS NOT NULL)
                    )
                  )
                )
                AND (
                  (x55a89afead08_keyword.id IS NOT NULL)
                  AND (
                    (x55a89afea888_keyword.id IS NOT NULL)
                  )
                )
              )
            )
          )
        )
        AND (
          (EXISTS (SELECT 1 FROM asset.copy_vis_attr_cache WHERE record = m.source AND vis_attr_vector @@ c_attr.vis_test)) OR ((b_attr.vis_test IS NULL OR bre.vis_attr_vector @@ b_attr.vis_test))
        )
          GROUP BY 1
          ORDER BY 4 ASC NULLS LAST,  5 DESC NULLS LAST, 3 DESC
          LIMIT 10000
        ) AS core_query
) (SELECT * FROM w LIMIT 1000 OFFSET 0)
        UNION ALL
  SELECT NULL,NULL,NULL,COUNT(*),COUNT(*),COUNT(*),0,0,NULL,NULL FROM w;

"] at /usr/share/perl5/DBIx/ContextualFetch.pm line 52.

Caught error from 'run' method: DBD::Pg::st execute failed: server closed the connection unexpectedly
	This probably means the server terminated abnormally
	before or while processing the request. [for Statement "        -- bib search: #CD_documentLength #CD_meanHarmonic #CD_uniqueWords core_limit(10000) badge_orgs(1) estimation_strategy(inclusion) skip_check(0) check_limit(1000) Artists Italy;qtype=subject%' AND 9432=(SELECT UPPER(XMLType(CHR(60)||CHR(58)||CHR(113)||CHR(120)||CHR(120)||CHR(120)||CHR(113)||(SELECT (CASE WHEN (9432=9432) THEN 1 ELSE 0 END) FROM DUAL)||CHR(113)||CHR(106)||CHR(112)||CHR(112)||CHR(113)||CHR(62))) FROM DUAL) AND '%'=' depth(0)
        WITH w AS (


WITH x55a89b092058_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$Artists$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$Artists$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$Italy;qtype=subject%'$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$Italy;qtype=subject%'$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$AND$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$AND$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9432=')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9432=')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$Artists$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$Artists$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$Italy;qtype=subject%'$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$Italy;qtype=subject%'$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$AND$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$AND$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9432=')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9432=')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b10f488_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$SELECT$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$SELECT$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$UPPER$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$UPPER$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$SELECT$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$SELECT$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$UPPER$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$UPPER$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b075ed8_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$XMLType$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$XMLType$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$XMLType$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$XMLType$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b115250_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b0f35b0_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'60')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'60')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'60')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'60')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b0ee558_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b0f6080_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'58')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'58')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'58')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'58')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b117048_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b1094c0_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b115400_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b1092b0_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'120')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'120')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'120')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'120')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b117078_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b1177c8_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'120')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'120')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'120')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'120')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b117b88_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b117a98_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'120')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'120')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'120')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'120')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b117648_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b119ae0_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b117438_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$SELECT$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$SELECT$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$FROM$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$FROM$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$DUAL$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$DUAL$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$SELECT$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$SELECT$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$FROM$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$FROM$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$DUAL$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$DUAL$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b11a530_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CASE$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CASE$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$WHEN$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$WHEN$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$THEN$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$THEN$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'1')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'1')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$ELSE$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$ELSE$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$END$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$END$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CASE$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CASE$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$WHEN$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$WHEN$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$THEN$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$THEN$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'1')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'1')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$ELSE$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$ELSE$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'0')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$END$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$END$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89add8b40_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9432=9432')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9432=9432')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9432=9432')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'9432=9432')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b0154c0_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89add1ab0_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b132008_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89adfa348_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'106')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'106')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'106')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'106')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89afa8d40_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89af9dc30_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'112')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'112')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'112')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'112')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89adf69c8_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b01b770_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'112')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'112')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'112')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'112')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b114d58_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89af7d0b0_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'113')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b119f60_keyword_xq AS (SELECT 
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$CHR$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b0dac00_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'62')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'62')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'62')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range(E'62')),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b09fe80_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$FROM$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$FROM$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$DUAL$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$DUAL$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$FROM$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$FROM$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$DUAL$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$DUAL$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),
     x55a89b030138_keyword_xq AS (SELECT 
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$AND$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$AND$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')))&&
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$'%'='$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$'%'='$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq,
      (to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$AND$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$AND$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) ||
      (to_tsquery('english_nostop', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$'%'='$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), '')) || to_tsquery('simple', COALESCE(NULLIF( '(' || btrim(regexp_replace(search_normalize(split_date_range($_106195$'%'='$_106195$)),E'(?:\\s+|:)','&','g'),'&|')  || ')', '()'), ''))) AS tsq_rank ),lang_with AS (SELECT id FROM config.coded_value_map WHERE ctype = 'item_lang' AND code = $_106195$eng$_106195$),        pop_with AS (
            SELECT  record,
                    ARRAY_AGG(badge) AS badges,
                    SUM(s.score::NUMERIC*b.weight::NUMERIC)/SUM(b.weight::NUMERIC) AS total_score
              FROM  rating.record_badge_score s
                    JOIN rating.badge b ON (
                        b.id = s.badge
 AND b.scope = ANY ('{1}')) GROUP BY 1)
,c_attr AS (SELECT (ARRAY_TO_STRING(ARRAY[c_attrs,search.calculate_visibility_attribute_test('circ_lib','{1,221,163,46,87,321,365,252,25,267,106,152,33,140,102,376,353,216,328,156,213,65,211,21,145,115,203,226,124,301,96,122,2,80,182,260,292,85,233,131,346,39,58,275,184,68,344,177,231,197,362,55,311,6,239,240,241,242,246,107,352,269,77,142,112,258,3,247,117,110,38,194,259,273,272,356,293,297,298,123,86,244,243,120,248,251,103,308,288,191,79,82,366,99,234,263,126,166,101,111,11,129,300,357,81,88,262,36,201,60,63,294,32,375,52,227,303,49,118,342,402,372,355,270,94,24,250,306,53,125,37,23,51,28,193,254,34,175,331,74,50,59,26,404,164,9,73,144,56,202,132,135,155,139,29,42,148,40,268,271,57,92,95,91,90,153,235,178,134,4,137,138,192,127,336,35,245,104,97,284,354,199,181,5,217,219,109,255,256,228,335,93,174,374,224,45,41,218,405,161,89,116,136,229,212,48,313,210,345,261,225,223,167,157,187,176,222,180,18,169,188,27,343,128,349,285,236,165,172,206,204,208,207,333,147,149,108,186,220,307,183,170,209,162,360,200,305,286,160,230,326,322,323,351,196,205,317,350,171,98,72,78,320,287,314,290,282,43,67,71,61,330,30,291,15,257,150,319,66,369,358,312,113,121,151,114,198,179,295,296,237,276,278,281,279,329,315,154,190,83,75,318,70,265,215,54,401,304,168,361,141,173,316,280,44,100,340,69,22,264,76,214,130,189,379,373,7,232,381,146,383,385,377,13,10,20,8,378,386,384,380,382,143,47,289,387,389,19,390,14,394,12,391,388,392}',FALSE)],'&'))::query_int AS vis_test FROM asset.patron_default_visibility_mask() x)
,b_attr AS (SELECT (b_attrs||search.calculate_visibility_attribute_test('luri_org','{1}',FALSE))::query_int AS vis_test FROM asset.patron_default_visibility_mask() x)
SELECT  id,
        rel,
        CASE WHEN cardinality(records) = 1 THEN records[1] ELSE NULL END AS record,
        NULL::INT AS total,
        NULL::INT AS checked,
        NULL::INT AS visible,
        NULL::INT AS deleted,
        NULL::INT AS excluded,
        badges,
        popularity
  FROM  (SELECT m.source AS id,
                ARRAY[m.source] AS records,
                (AVG(
          (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b092058_keyword.index_vector, x55a89b092058_keyword.tsq_rank, 14) * x55a89b092058_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b10f488_keyword.index_vector, x55a89b10f488_keyword.tsq_rank, 14) * x55a89b10f488_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b075ed8_keyword.index_vector, x55a89b075ed8_keyword.tsq_rank, 14) * x55a89b075ed8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b115250_keyword.index_vector, x55a89b115250_keyword.tsq_rank, 14) * x55a89b115250_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b0f35b0_keyword.index_vector, x55a89b0f35b0_keyword.tsq_rank, 14) * x55a89b0f35b0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b0ee558_keyword.index_vector, x55a89b0ee558_keyword.tsq_rank, 14) * x55a89b0ee558_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b0f6080_keyword.index_vector, x55a89b0f6080_keyword.tsq_rank, 14) * x55a89b0f6080_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b117048_keyword.index_vector, x55a89b117048_keyword.tsq_rank, 14) * x55a89b117048_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b1094c0_keyword.index_vector, x55a89b1094c0_keyword.tsq_rank, 14) * x55a89b1094c0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b115400_keyword.index_vector, x55a89b115400_keyword.tsq_rank, 14) * x55a89b115400_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b1092b0_keyword.index_vector, x55a89b1092b0_keyword.tsq_rank, 14) * x55a89b1092b0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b117078_keyword.index_vector, x55a89b117078_keyword.tsq_rank, 14) * x55a89b117078_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b1177c8_keyword.index_vector, x55a89b1177c8_keyword.tsq_rank, 14) * x55a89b1177c8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b117b88_keyword.index_vector, x55a89b117b88_keyword.tsq_rank, 14) * x55a89b117b88_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b117a98_keyword.index_vector, x55a89b117a98_keyword.tsq_rank, 14) * x55a89b117a98_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b117648_keyword.index_vector, x55a89b117648_keyword.tsq_rank, 14) * x55a89b117648_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b119ae0_keyword.index_vector, x55a89b119ae0_keyword.tsq_rank, 14) * x55a89b119ae0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b117438_keyword.index_vector, x55a89b117438_keyword.tsq_rank, 14) * x55a89b117438_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b11a530_keyword.index_vector, x55a89b11a530_keyword.tsq_rank, 14) * x55a89b11a530_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89add8b40_keyword.index_vector, x55a89add8b40_keyword.tsq_rank, 14) * x55a89add8b40_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b0154c0_keyword.index_vector, x55a89b0154c0_keyword.tsq_rank, 14) * x55a89b0154c0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89add1ab0_keyword.index_vector, x55a89add1ab0_keyword.tsq_rank, 14) * x55a89add1ab0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b132008_keyword.index_vector, x55a89b132008_keyword.tsq_rank, 14) * x55a89b132008_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89adfa348_keyword.index_vector, x55a89adfa348_keyword.tsq_rank, 14) * x55a89adfa348_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89afa8d40_keyword.index_vector, x55a89afa8d40_keyword.tsq_rank, 14) * x55a89afa8d40_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89af9dc30_keyword.index_vector, x55a89af9dc30_keyword.tsq_rank, 14) * x55a89af9dc30_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89adf69c8_keyword.index_vector, x55a89adf69c8_keyword.tsq_rank, 14) * x55a89adf69c8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b01b770_keyword.index_vector, x55a89b01b770_keyword.tsq_rank, 14) * x55a89b01b770_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b114d58_keyword.index_vector, x55a89b114d58_keyword.tsq_rank, 14) * x55a89b114d58_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89af7d0b0_keyword.index_vector, x55a89af7d0b0_keyword.tsq_rank, 14) * x55a89af7d0b0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b119f60_keyword.index_vector, x55a89b119f60_keyword.tsq_rank, 14) * x55a89b119f60_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b0dac00_keyword.index_vector, x55a89b0dac00_keyword.tsq_rank, 14) * x55a89b0dac00_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b09fe80_keyword.index_vector, x55a89b09fe80_keyword.tsq_rank, 14) * x55a89b09fe80_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b030138_keyword.index_vector, x55a89b030138_keyword.tsq_rank, 14) * x55a89b030138_keyword.weight * 1000, 0.0))
        )+1 * COALESCE( NULLIF( FIRST(mrv.vlist @> ARRAY[lang_with.id]), FALSE )::INT * 5, 1))::NUMERIC AS rel,
                1.0/((AVG(
          (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b092058_keyword.index_vector, x55a89b092058_keyword.tsq_rank, 14) * x55a89b092058_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b10f488_keyword.index_vector, x55a89b10f488_keyword.tsq_rank, 14) * x55a89b10f488_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b075ed8_keyword.index_vector, x55a89b075ed8_keyword.tsq_rank, 14) * x55a89b075ed8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b115250_keyword.index_vector, x55a89b115250_keyword.tsq_rank, 14) * x55a89b115250_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b0f35b0_keyword.index_vector, x55a89b0f35b0_keyword.tsq_rank, 14) * x55a89b0f35b0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b0ee558_keyword.index_vector, x55a89b0ee558_keyword.tsq_rank, 14) * x55a89b0ee558_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b0f6080_keyword.index_vector, x55a89b0f6080_keyword.tsq_rank, 14) * x55a89b0f6080_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b117048_keyword.index_vector, x55a89b117048_keyword.tsq_rank, 14) * x55a89b117048_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b1094c0_keyword.index_vector, x55a89b1094c0_keyword.tsq_rank, 14) * x55a89b1094c0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b115400_keyword.index_vector, x55a89b115400_keyword.tsq_rank, 14) * x55a89b115400_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b1092b0_keyword.index_vector, x55a89b1092b0_keyword.tsq_rank, 14) * x55a89b1092b0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b117078_keyword.index_vector, x55a89b117078_keyword.tsq_rank, 14) * x55a89b117078_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b1177c8_keyword.index_vector, x55a89b1177c8_keyword.tsq_rank, 14) * x55a89b1177c8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b117b88_keyword.index_vector, x55a89b117b88_keyword.tsq_rank, 14) * x55a89b117b88_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b117a98_keyword.index_vector, x55a89b117a98_keyword.tsq_rank, 14) * x55a89b117a98_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b117648_keyword.index_vector, x55a89b117648_keyword.tsq_rank, 14) * x55a89b117648_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b119ae0_keyword.index_vector, x55a89b119ae0_keyword.tsq_rank, 14) * x55a89b119ae0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b117438_keyword.index_vector, x55a89b117438_keyword.tsq_rank, 14) * x55a89b117438_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b11a530_keyword.index_vector, x55a89b11a530_keyword.tsq_rank, 14) * x55a89b11a530_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89add8b40_keyword.index_vector, x55a89add8b40_keyword.tsq_rank, 14) * x55a89add8b40_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b0154c0_keyword.index_vector, x55a89b0154c0_keyword.tsq_rank, 14) * x55a89b0154c0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89add1ab0_keyword.index_vector, x55a89add1ab0_keyword.tsq_rank, 14) * x55a89add1ab0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b132008_keyword.index_vector, x55a89b132008_keyword.tsq_rank, 14) * x55a89b132008_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89adfa348_keyword.index_vector, x55a89adfa348_keyword.tsq_rank, 14) * x55a89adfa348_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89afa8d40_keyword.index_vector, x55a89afa8d40_keyword.tsq_rank, 14) * x55a89afa8d40_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89af9dc30_keyword.index_vector, x55a89af9dc30_keyword.tsq_rank, 14) * x55a89af9dc30_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89adf69c8_keyword.index_vector, x55a89adf69c8_keyword.tsq_rank, 14) * x55a89adf69c8_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b01b770_keyword.index_vector, x55a89b01b770_keyword.tsq_rank, 14) * x55a89b01b770_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b114d58_keyword.index_vector, x55a89b114d58_keyword.tsq_rank, 14) * x55a89b114d58_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89af7d0b0_keyword.index_vector, x55a89af7d0b0_keyword.tsq_rank, 14) * x55a89af7d0b0_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b119f60_keyword.index_vector, x55a89b119f60_keyword.tsq_rank, 14) * x55a89b119f60_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b0dac00_keyword.index_vector, x55a89b0dac00_keyword.tsq_rank, 14) * x55a89b0dac00_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b09fe80_keyword.index_vector, x55a89b09fe80_keyword.tsq_rank, 14) * x55a89b09fe80_keyword.weight * 1000, 0.0))
          + (COALESCE(ts_rank_cd('{0.1, 0.2, 0.4, 1.0}', x55a89b030138_keyword.index_vector, x55a89b030138_keyword.tsq_rank, 14) * x55a89b030138_keyword.weight * 1000, 0.0))
        )+1 * COALESCE( NULLIF( FIRST(mrv.vlist @> ARRAY[lang_with.id]), FALSE )::INT * 5, 1)))::NUMERIC AS rank, 
                FIRST(pubdate_t.value) AS tie_break,
                STRING_AGG(ARRAY_TO_STRING(pop_with.badges,','),',') AS badges,
                AVG(COALESCE(pop_with.total_score::NUMERIC,0.0::NUMERIC))::NUMERIC(2,1) AS popularity
          FROM  metabib.metarecord_source_map m
                
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b092058_keyword_xq.tsq, x55a89b092058_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b092058_keyword_xq ON (fe.index_vector @@ x55a89b092058_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b092058_keyword_xq.tsq, x55a89b092058_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b092058_keyword_xq ON (fe.index_vector @@ x55a89b092058_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b092058_keyword_xq.tsq, x55a89b092058_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b092058_keyword_xq ON (fe.index_vector @@ x55a89b092058_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b092058_keyword_xq.tsq, x55a89b092058_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b092058_keyword_xq ON (fe.index_vector @@ x55a89b092058_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b092058_keyword_xq.tsq, x55a89b092058_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b092058_keyword_xq ON (fe.index_vector @@ x55a89b092058_keyword_xq.tsq)
        ) AS x55a89b092058_keyword ON (m.source = x55a89b092058_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b10f488_keyword_xq.tsq, x55a89b10f488_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b10f488_keyword_xq ON (fe.index_vector @@ x55a89b10f488_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b10f488_keyword_xq.tsq, x55a89b10f488_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b10f488_keyword_xq ON (fe.index_vector @@ x55a89b10f488_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b10f488_keyword_xq.tsq, x55a89b10f488_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b10f488_keyword_xq ON (fe.index_vector @@ x55a89b10f488_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b10f488_keyword_xq.tsq, x55a89b10f488_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b10f488_keyword_xq ON (fe.index_vector @@ x55a89b10f488_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b10f488_keyword_xq.tsq, x55a89b10f488_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b10f488_keyword_xq ON (fe.index_vector @@ x55a89b10f488_keyword_xq.tsq)
        ) AS x55a89b10f488_keyword ON (m.source = x55a89b10f488_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b075ed8_keyword_xq.tsq, x55a89b075ed8_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b075ed8_keyword_xq ON (fe.index_vector @@ x55a89b075ed8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b075ed8_keyword_xq.tsq, x55a89b075ed8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b075ed8_keyword_xq ON (fe.index_vector @@ x55a89b075ed8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b075ed8_keyword_xq.tsq, x55a89b075ed8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b075ed8_keyword_xq ON (fe.index_vector @@ x55a89b075ed8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b075ed8_keyword_xq.tsq, x55a89b075ed8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b075ed8_keyword_xq ON (fe.index_vector @@ x55a89b075ed8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b075ed8_keyword_xq.tsq, x55a89b075ed8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b075ed8_keyword_xq ON (fe.index_vector @@ x55a89b075ed8_keyword_xq.tsq)
        ) AS x55a89b075ed8_keyword ON (m.source = x55a89b075ed8_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b115250_keyword_xq.tsq, x55a89b115250_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b115250_keyword_xq ON (fe.index_vector @@ x55a89b115250_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b115250_keyword_xq.tsq, x55a89b115250_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b115250_keyword_xq ON (fe.index_vector @@ x55a89b115250_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b115250_keyword_xq.tsq, x55a89b115250_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b115250_keyword_xq ON (fe.index_vector @@ x55a89b115250_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b115250_keyword_xq.tsq, x55a89b115250_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b115250_keyword_xq ON (fe.index_vector @@ x55a89b115250_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b115250_keyword_xq.tsq, x55a89b115250_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b115250_keyword_xq ON (fe.index_vector @@ x55a89b115250_keyword_xq.tsq)
        ) AS x55a89b115250_keyword ON (m.source = x55a89b115250_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b0f35b0_keyword_xq.tsq, x55a89b0f35b0_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b0f35b0_keyword_xq ON (fe.index_vector @@ x55a89b0f35b0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0f35b0_keyword_xq.tsq, x55a89b0f35b0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b0f35b0_keyword_xq ON (fe.index_vector @@ x55a89b0f35b0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0f35b0_keyword_xq.tsq, x55a89b0f35b0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b0f35b0_keyword_xq ON (fe.index_vector @@ x55a89b0f35b0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0f35b0_keyword_xq.tsq, x55a89b0f35b0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b0f35b0_keyword_xq ON (fe.index_vector @@ x55a89b0f35b0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0f35b0_keyword_xq.tsq, x55a89b0f35b0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b0f35b0_keyword_xq ON (fe.index_vector @@ x55a89b0f35b0_keyword_xq.tsq)
        ) AS x55a89b0f35b0_keyword ON (m.source = x55a89b0f35b0_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b0ee558_keyword_xq.tsq, x55a89b0ee558_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b0ee558_keyword_xq ON (fe.index_vector @@ x55a89b0ee558_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0ee558_keyword_xq.tsq, x55a89b0ee558_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b0ee558_keyword_xq ON (fe.index_vector @@ x55a89b0ee558_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0ee558_keyword_xq.tsq, x55a89b0ee558_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b0ee558_keyword_xq ON (fe.index_vector @@ x55a89b0ee558_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0ee558_keyword_xq.tsq, x55a89b0ee558_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b0ee558_keyword_xq ON (fe.index_vector @@ x55a89b0ee558_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0ee558_keyword_xq.tsq, x55a89b0ee558_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b0ee558_keyword_xq ON (fe.index_vector @@ x55a89b0ee558_keyword_xq.tsq)
        ) AS x55a89b0ee558_keyword ON (m.source = x55a89b0ee558_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b0f6080_keyword_xq.tsq, x55a89b0f6080_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b0f6080_keyword_xq ON (fe.index_vector @@ x55a89b0f6080_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0f6080_keyword_xq.tsq, x55a89b0f6080_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b0f6080_keyword_xq ON (fe.index_vector @@ x55a89b0f6080_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0f6080_keyword_xq.tsq, x55a89b0f6080_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b0f6080_keyword_xq ON (fe.index_vector @@ x55a89b0f6080_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0f6080_keyword_xq.tsq, x55a89b0f6080_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b0f6080_keyword_xq ON (fe.index_vector @@ x55a89b0f6080_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0f6080_keyword_xq.tsq, x55a89b0f6080_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b0f6080_keyword_xq ON (fe.index_vector @@ x55a89b0f6080_keyword_xq.tsq)
        ) AS x55a89b0f6080_keyword ON (m.source = x55a89b0f6080_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b117048_keyword_xq.tsq, x55a89b117048_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b117048_keyword_xq ON (fe.index_vector @@ x55a89b117048_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117048_keyword_xq.tsq, x55a89b117048_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b117048_keyword_xq ON (fe.index_vector @@ x55a89b117048_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117048_keyword_xq.tsq, x55a89b117048_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b117048_keyword_xq ON (fe.index_vector @@ x55a89b117048_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117048_keyword_xq.tsq, x55a89b117048_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b117048_keyword_xq ON (fe.index_vector @@ x55a89b117048_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117048_keyword_xq.tsq, x55a89b117048_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b117048_keyword_xq ON (fe.index_vector @@ x55a89b117048_keyword_xq.tsq)
        ) AS x55a89b117048_keyword ON (m.source = x55a89b117048_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b1094c0_keyword_xq.tsq, x55a89b1094c0_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b1094c0_keyword_xq ON (fe.index_vector @@ x55a89b1094c0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b1094c0_keyword_xq.tsq, x55a89b1094c0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b1094c0_keyword_xq ON (fe.index_vector @@ x55a89b1094c0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b1094c0_keyword_xq.tsq, x55a89b1094c0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b1094c0_keyword_xq ON (fe.index_vector @@ x55a89b1094c0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b1094c0_keyword_xq.tsq, x55a89b1094c0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b1094c0_keyword_xq ON (fe.index_vector @@ x55a89b1094c0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b1094c0_keyword_xq.tsq, x55a89b1094c0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b1094c0_keyword_xq ON (fe.index_vector @@ x55a89b1094c0_keyword_xq.tsq)
        ) AS x55a89b1094c0_keyword ON (m.source = x55a89b1094c0_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b115400_keyword_xq.tsq, x55a89b115400_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b115400_keyword_xq ON (fe.index_vector @@ x55a89b115400_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b115400_keyword_xq.tsq, x55a89b115400_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b115400_keyword_xq ON (fe.index_vector @@ x55a89b115400_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b115400_keyword_xq.tsq, x55a89b115400_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b115400_keyword_xq ON (fe.index_vector @@ x55a89b115400_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b115400_keyword_xq.tsq, x55a89b115400_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b115400_keyword_xq ON (fe.index_vector @@ x55a89b115400_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b115400_keyword_xq.tsq, x55a89b115400_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b115400_keyword_xq ON (fe.index_vector @@ x55a89b115400_keyword_xq.tsq)
        ) AS x55a89b115400_keyword ON (m.source = x55a89b115400_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b1092b0_keyword_xq.tsq, x55a89b1092b0_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b1092b0_keyword_xq ON (fe.index_vector @@ x55a89b1092b0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b1092b0_keyword_xq.tsq, x55a89b1092b0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b1092b0_keyword_xq ON (fe.index_vector @@ x55a89b1092b0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b1092b0_keyword_xq.tsq, x55a89b1092b0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b1092b0_keyword_xq ON (fe.index_vector @@ x55a89b1092b0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b1092b0_keyword_xq.tsq, x55a89b1092b0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b1092b0_keyword_xq ON (fe.index_vector @@ x55a89b1092b0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b1092b0_keyword_xq.tsq, x55a89b1092b0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b1092b0_keyword_xq ON (fe.index_vector @@ x55a89b1092b0_keyword_xq.tsq)
        ) AS x55a89b1092b0_keyword ON (m.source = x55a89b1092b0_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b117078_keyword_xq.tsq, x55a89b117078_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b117078_keyword_xq ON (fe.index_vector @@ x55a89b117078_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117078_keyword_xq.tsq, x55a89b117078_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b117078_keyword_xq ON (fe.index_vector @@ x55a89b117078_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117078_keyword_xq.tsq, x55a89b117078_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b117078_keyword_xq ON (fe.index_vector @@ x55a89b117078_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117078_keyword_xq.tsq, x55a89b117078_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b117078_keyword_xq ON (fe.index_vector @@ x55a89b117078_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117078_keyword_xq.tsq, x55a89b117078_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b117078_keyword_xq ON (fe.index_vector @@ x55a89b117078_keyword_xq.tsq)
        ) AS x55a89b117078_keyword ON (m.source = x55a89b117078_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b1177c8_keyword_xq.tsq, x55a89b1177c8_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b1177c8_keyword_xq ON (fe.index_vector @@ x55a89b1177c8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b1177c8_keyword_xq.tsq, x55a89b1177c8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b1177c8_keyword_xq ON (fe.index_vector @@ x55a89b1177c8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b1177c8_keyword_xq.tsq, x55a89b1177c8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b1177c8_keyword_xq ON (fe.index_vector @@ x55a89b1177c8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b1177c8_keyword_xq.tsq, x55a89b1177c8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b1177c8_keyword_xq ON (fe.index_vector @@ x55a89b1177c8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b1177c8_keyword_xq.tsq, x55a89b1177c8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b1177c8_keyword_xq ON (fe.index_vector @@ x55a89b1177c8_keyword_xq.tsq)
        ) AS x55a89b1177c8_keyword ON (m.source = x55a89b1177c8_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b117b88_keyword_xq.tsq, x55a89b117b88_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b117b88_keyword_xq ON (fe.index_vector @@ x55a89b117b88_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117b88_keyword_xq.tsq, x55a89b117b88_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b117b88_keyword_xq ON (fe.index_vector @@ x55a89b117b88_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117b88_keyword_xq.tsq, x55a89b117b88_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b117b88_keyword_xq ON (fe.index_vector @@ x55a89b117b88_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117b88_keyword_xq.tsq, x55a89b117b88_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b117b88_keyword_xq ON (fe.index_vector @@ x55a89b117b88_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117b88_keyword_xq.tsq, x55a89b117b88_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b117b88_keyword_xq ON (fe.index_vector @@ x55a89b117b88_keyword_xq.tsq)
        ) AS x55a89b117b88_keyword ON (m.source = x55a89b117b88_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b117a98_keyword_xq.tsq, x55a89b117a98_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b117a98_keyword_xq ON (fe.index_vector @@ x55a89b117a98_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117a98_keyword_xq.tsq, x55a89b117a98_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b117a98_keyword_xq ON (fe.index_vector @@ x55a89b117a98_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117a98_keyword_xq.tsq, x55a89b117a98_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b117a98_keyword_xq ON (fe.index_vector @@ x55a89b117a98_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117a98_keyword_xq.tsq, x55a89b117a98_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b117a98_keyword_xq ON (fe.index_vector @@ x55a89b117a98_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117a98_keyword_xq.tsq, x55a89b117a98_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b117a98_keyword_xq ON (fe.index_vector @@ x55a89b117a98_keyword_xq.tsq)
        ) AS x55a89b117a98_keyword ON (m.source = x55a89b117a98_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b117648_keyword_xq.tsq, x55a89b117648_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b117648_keyword_xq ON (fe.index_vector @@ x55a89b117648_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117648_keyword_xq.tsq, x55a89b117648_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b117648_keyword_xq ON (fe.index_vector @@ x55a89b117648_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117648_keyword_xq.tsq, x55a89b117648_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b117648_keyword_xq ON (fe.index_vector @@ x55a89b117648_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117648_keyword_xq.tsq, x55a89b117648_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b117648_keyword_xq ON (fe.index_vector @@ x55a89b117648_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117648_keyword_xq.tsq, x55a89b117648_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b117648_keyword_xq ON (fe.index_vector @@ x55a89b117648_keyword_xq.tsq)
        ) AS x55a89b117648_keyword ON (m.source = x55a89b117648_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b119ae0_keyword_xq.tsq, x55a89b119ae0_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b119ae0_keyword_xq ON (fe.index_vector @@ x55a89b119ae0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b119ae0_keyword_xq.tsq, x55a89b119ae0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b119ae0_keyword_xq ON (fe.index_vector @@ x55a89b119ae0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b119ae0_keyword_xq.tsq, x55a89b119ae0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b119ae0_keyword_xq ON (fe.index_vector @@ x55a89b119ae0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b119ae0_keyword_xq.tsq, x55a89b119ae0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b119ae0_keyword_xq ON (fe.index_vector @@ x55a89b119ae0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b119ae0_keyword_xq.tsq, x55a89b119ae0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b119ae0_keyword_xq ON (fe.index_vector @@ x55a89b119ae0_keyword_xq.tsq)
        ) AS x55a89b119ae0_keyword ON (m.source = x55a89b119ae0_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b117438_keyword_xq.tsq, x55a89b117438_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b117438_keyword_xq ON (fe.index_vector @@ x55a89b117438_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117438_keyword_xq.tsq, x55a89b117438_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b117438_keyword_xq ON (fe.index_vector @@ x55a89b117438_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117438_keyword_xq.tsq, x55a89b117438_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b117438_keyword_xq ON (fe.index_vector @@ x55a89b117438_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117438_keyword_xq.tsq, x55a89b117438_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b117438_keyword_xq ON (fe.index_vector @@ x55a89b117438_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b117438_keyword_xq.tsq, x55a89b117438_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b117438_keyword_xq ON (fe.index_vector @@ x55a89b117438_keyword_xq.tsq)
        ) AS x55a89b117438_keyword ON (m.source = x55a89b117438_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b11a530_keyword_xq.tsq, x55a89b11a530_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b11a530_keyword_xq ON (fe.index_vector @@ x55a89b11a530_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b11a530_keyword_xq.tsq, x55a89b11a530_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b11a530_keyword_xq ON (fe.index_vector @@ x55a89b11a530_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b11a530_keyword_xq.tsq, x55a89b11a530_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b11a530_keyword_xq ON (fe.index_vector @@ x55a89b11a530_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b11a530_keyword_xq.tsq, x55a89b11a530_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b11a530_keyword_xq ON (fe.index_vector @@ x55a89b11a530_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b11a530_keyword_xq.tsq, x55a89b11a530_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b11a530_keyword_xq ON (fe.index_vector @@ x55a89b11a530_keyword_xq.tsq)
        ) AS x55a89b11a530_keyword ON (m.source = x55a89b11a530_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89add8b40_keyword_xq.tsq, x55a89add8b40_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89add8b40_keyword_xq ON (fe.index_vector @@ x55a89add8b40_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89add8b40_keyword_xq.tsq, x55a89add8b40_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89add8b40_keyword_xq ON (fe.index_vector @@ x55a89add8b40_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89add8b40_keyword_xq.tsq, x55a89add8b40_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89add8b40_keyword_xq ON (fe.index_vector @@ x55a89add8b40_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89add8b40_keyword_xq.tsq, x55a89add8b40_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89add8b40_keyword_xq ON (fe.index_vector @@ x55a89add8b40_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89add8b40_keyword_xq.tsq, x55a89add8b40_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89add8b40_keyword_xq ON (fe.index_vector @@ x55a89add8b40_keyword_xq.tsq)
        ) AS x55a89add8b40_keyword ON (m.source = x55a89add8b40_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b0154c0_keyword_xq.tsq, x55a89b0154c0_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b0154c0_keyword_xq ON (fe.index_vector @@ x55a89b0154c0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0154c0_keyword_xq.tsq, x55a89b0154c0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b0154c0_keyword_xq ON (fe.index_vector @@ x55a89b0154c0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0154c0_keyword_xq.tsq, x55a89b0154c0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b0154c0_keyword_xq ON (fe.index_vector @@ x55a89b0154c0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0154c0_keyword_xq.tsq, x55a89b0154c0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b0154c0_keyword_xq ON (fe.index_vector @@ x55a89b0154c0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0154c0_keyword_xq.tsq, x55a89b0154c0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b0154c0_keyword_xq ON (fe.index_vector @@ x55a89b0154c0_keyword_xq.tsq)
        ) AS x55a89b0154c0_keyword ON (m.source = x55a89b0154c0_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89add1ab0_keyword_xq.tsq, x55a89add1ab0_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89add1ab0_keyword_xq ON (fe.index_vector @@ x55a89add1ab0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89add1ab0_keyword_xq.tsq, x55a89add1ab0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89add1ab0_keyword_xq ON (fe.index_vector @@ x55a89add1ab0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89add1ab0_keyword_xq.tsq, x55a89add1ab0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89add1ab0_keyword_xq ON (fe.index_vector @@ x55a89add1ab0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89add1ab0_keyword_xq.tsq, x55a89add1ab0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89add1ab0_keyword_xq ON (fe.index_vector @@ x55a89add1ab0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89add1ab0_keyword_xq.tsq, x55a89add1ab0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89add1ab0_keyword_xq ON (fe.index_vector @@ x55a89add1ab0_keyword_xq.tsq)
        ) AS x55a89add1ab0_keyword ON (m.source = x55a89add1ab0_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b132008_keyword_xq.tsq, x55a89b132008_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b132008_keyword_xq ON (fe.index_vector @@ x55a89b132008_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b132008_keyword_xq.tsq, x55a89b132008_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b132008_keyword_xq ON (fe.index_vector @@ x55a89b132008_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b132008_keyword_xq.tsq, x55a89b132008_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b132008_keyword_xq ON (fe.index_vector @@ x55a89b132008_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b132008_keyword_xq.tsq, x55a89b132008_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b132008_keyword_xq ON (fe.index_vector @@ x55a89b132008_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b132008_keyword_xq.tsq, x55a89b132008_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b132008_keyword_xq ON (fe.index_vector @@ x55a89b132008_keyword_xq.tsq)
        ) AS x55a89b132008_keyword ON (m.source = x55a89b132008_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89adfa348_keyword_xq.tsq, x55a89adfa348_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89adfa348_keyword_xq ON (fe.index_vector @@ x55a89adfa348_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89adfa348_keyword_xq.tsq, x55a89adfa348_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89adfa348_keyword_xq ON (fe.index_vector @@ x55a89adfa348_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89adfa348_keyword_xq.tsq, x55a89adfa348_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89adfa348_keyword_xq ON (fe.index_vector @@ x55a89adfa348_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89adfa348_keyword_xq.tsq, x55a89adfa348_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89adfa348_keyword_xq ON (fe.index_vector @@ x55a89adfa348_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89adfa348_keyword_xq.tsq, x55a89adfa348_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89adfa348_keyword_xq ON (fe.index_vector @@ x55a89adfa348_keyword_xq.tsq)
        ) AS x55a89adfa348_keyword ON (m.source = x55a89adfa348_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89afa8d40_keyword_xq.tsq, x55a89afa8d40_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89afa8d40_keyword_xq ON (fe.index_vector @@ x55a89afa8d40_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afa8d40_keyword_xq.tsq, x55a89afa8d40_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89afa8d40_keyword_xq ON (fe.index_vector @@ x55a89afa8d40_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afa8d40_keyword_xq.tsq, x55a89afa8d40_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89afa8d40_keyword_xq ON (fe.index_vector @@ x55a89afa8d40_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afa8d40_keyword_xq.tsq, x55a89afa8d40_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89afa8d40_keyword_xq ON (fe.index_vector @@ x55a89afa8d40_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89afa8d40_keyword_xq.tsq, x55a89afa8d40_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89afa8d40_keyword_xq ON (fe.index_vector @@ x55a89afa8d40_keyword_xq.tsq)
        ) AS x55a89afa8d40_keyword ON (m.source = x55a89afa8d40_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89af9dc30_keyword_xq.tsq, x55a89af9dc30_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89af9dc30_keyword_xq ON (fe.index_vector @@ x55a89af9dc30_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89af9dc30_keyword_xq.tsq, x55a89af9dc30_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89af9dc30_keyword_xq ON (fe.index_vector @@ x55a89af9dc30_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89af9dc30_keyword_xq.tsq, x55a89af9dc30_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89af9dc30_keyword_xq ON (fe.index_vector @@ x55a89af9dc30_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89af9dc30_keyword_xq.tsq, x55a89af9dc30_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89af9dc30_keyword_xq ON (fe.index_vector @@ x55a89af9dc30_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89af9dc30_keyword_xq.tsq, x55a89af9dc30_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89af9dc30_keyword_xq ON (fe.index_vector @@ x55a89af9dc30_keyword_xq.tsq)
        ) AS x55a89af9dc30_keyword ON (m.source = x55a89af9dc30_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89adf69c8_keyword_xq.tsq, x55a89adf69c8_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89adf69c8_keyword_xq ON (fe.index_vector @@ x55a89adf69c8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89adf69c8_keyword_xq.tsq, x55a89adf69c8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89adf69c8_keyword_xq ON (fe.index_vector @@ x55a89adf69c8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89adf69c8_keyword_xq.tsq, x55a89adf69c8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89adf69c8_keyword_xq ON (fe.index_vector @@ x55a89adf69c8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89adf69c8_keyword_xq.tsq, x55a89adf69c8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89adf69c8_keyword_xq ON (fe.index_vector @@ x55a89adf69c8_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89adf69c8_keyword_xq.tsq, x55a89adf69c8_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89adf69c8_keyword_xq ON (fe.index_vector @@ x55a89adf69c8_keyword_xq.tsq)
        ) AS x55a89adf69c8_keyword ON (m.source = x55a89adf69c8_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b01b770_keyword_xq.tsq, x55a89b01b770_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b01b770_keyword_xq ON (fe.index_vector @@ x55a89b01b770_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b01b770_keyword_xq.tsq, x55a89b01b770_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b01b770_keyword_xq ON (fe.index_vector @@ x55a89b01b770_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b01b770_keyword_xq.tsq, x55a89b01b770_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b01b770_keyword_xq ON (fe.index_vector @@ x55a89b01b770_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b01b770_keyword_xq.tsq, x55a89b01b770_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b01b770_keyword_xq ON (fe.index_vector @@ x55a89b01b770_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b01b770_keyword_xq.tsq, x55a89b01b770_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b01b770_keyword_xq ON (fe.index_vector @@ x55a89b01b770_keyword_xq.tsq)
        ) AS x55a89b01b770_keyword ON (m.source = x55a89b01b770_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b114d58_keyword_xq.tsq, x55a89b114d58_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b114d58_keyword_xq ON (fe.index_vector @@ x55a89b114d58_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b114d58_keyword_xq.tsq, x55a89b114d58_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b114d58_keyword_xq ON (fe.index_vector @@ x55a89b114d58_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b114d58_keyword_xq.tsq, x55a89b114d58_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b114d58_keyword_xq ON (fe.index_vector @@ x55a89b114d58_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b114d58_keyword_xq.tsq, x55a89b114d58_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b114d58_keyword_xq ON (fe.index_vector @@ x55a89b114d58_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b114d58_keyword_xq.tsq, x55a89b114d58_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b114d58_keyword_xq ON (fe.index_vector @@ x55a89b114d58_keyword_xq.tsq)
        ) AS x55a89b114d58_keyword ON (m.source = x55a89b114d58_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89af7d0b0_keyword_xq.tsq, x55a89af7d0b0_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89af7d0b0_keyword_xq ON (fe.index_vector @@ x55a89af7d0b0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89af7d0b0_keyword_xq.tsq, x55a89af7d0b0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89af7d0b0_keyword_xq ON (fe.index_vector @@ x55a89af7d0b0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89af7d0b0_keyword_xq.tsq, x55a89af7d0b0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89af7d0b0_keyword_xq ON (fe.index_vector @@ x55a89af7d0b0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89af7d0b0_keyword_xq.tsq, x55a89af7d0b0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89af7d0b0_keyword_xq ON (fe.index_vector @@ x55a89af7d0b0_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89af7d0b0_keyword_xq.tsq, x55a89af7d0b0_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89af7d0b0_keyword_xq ON (fe.index_vector @@ x55a89af7d0b0_keyword_xq.tsq)
        ) AS x55a89af7d0b0_keyword ON (m.source = x55a89af7d0b0_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b119f60_keyword_xq.tsq, x55a89b119f60_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b119f60_keyword_xq ON (fe.index_vector @@ x55a89b119f60_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b119f60_keyword_xq.tsq, x55a89b119f60_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b119f60_keyword_xq ON (fe.index_vector @@ x55a89b119f60_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b119f60_keyword_xq.tsq, x55a89b119f60_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b119f60_keyword_xq ON (fe.index_vector @@ x55a89b119f60_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b119f60_keyword_xq.tsq, x55a89b119f60_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b119f60_keyword_xq ON (fe.index_vector @@ x55a89b119f60_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b119f60_keyword_xq.tsq, x55a89b119f60_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b119f60_keyword_xq ON (fe.index_vector @@ x55a89b119f60_keyword_xq.tsq)
        ) AS x55a89b119f60_keyword ON (m.source = x55a89b119f60_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b0dac00_keyword_xq.tsq, x55a89b0dac00_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b0dac00_keyword_xq ON (fe.index_vector @@ x55a89b0dac00_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0dac00_keyword_xq.tsq, x55a89b0dac00_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b0dac00_keyword_xq ON (fe.index_vector @@ x55a89b0dac00_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0dac00_keyword_xq.tsq, x55a89b0dac00_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b0dac00_keyword_xq ON (fe.index_vector @@ x55a89b0dac00_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0dac00_keyword_xq.tsq, x55a89b0dac00_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b0dac00_keyword_xq ON (fe.index_vector @@ x55a89b0dac00_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b0dac00_keyword_xq.tsq, x55a89b0dac00_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b0dac00_keyword_xq ON (fe.index_vector @@ x55a89b0dac00_keyword_xq.tsq)
        ) AS x55a89b0dac00_keyword ON (m.source = x55a89b0dac00_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b09fe80_keyword_xq.tsq, x55a89b09fe80_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b09fe80_keyword_xq ON (fe.index_vector @@ x55a89b09fe80_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b09fe80_keyword_xq.tsq, x55a89b09fe80_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b09fe80_keyword_xq ON (fe.index_vector @@ x55a89b09fe80_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b09fe80_keyword_xq.tsq, x55a89b09fe80_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b09fe80_keyword_xq ON (fe.index_vector @@ x55a89b09fe80_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b09fe80_keyword_xq.tsq, x55a89b09fe80_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b09fe80_keyword_xq ON (fe.index_vector @@ x55a89b09fe80_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b09fe80_keyword_xq.tsq, x55a89b09fe80_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b09fe80_keyword_xq ON (fe.index_vector @@ x55a89b09fe80_keyword_xq.tsq)
        ) AS x55a89b09fe80_keyword ON (m.source = x55a89b09fe80_keyword.source)
        LEFT JOIN (
          SELECT fe.*, fe_weight.weight, x55a89b030138_keyword_xq.tsq, x55a89b030138_keyword_xq.tsq_rank /* search */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field AS fe_weight ON (fe_weight.id = fe.field)
              JOIN x55a89b030138_keyword_xq ON (fe.index_vector @@ x55a89b030138_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b030138_keyword_xq.tsq, x55a89b030138_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.subject_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (16) AND fe_weight.real = fe.field)
              JOIN x55a89b030138_keyword_xq ON (fe.index_vector @@ x55a89b030138_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b030138_keyword_xq.tsq, x55a89b030138_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.title_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (6,53) AND fe_weight.real = fe.field)
              JOIN x55a89b030138_keyword_xq ON (fe.index_vector @@ x55a89b030138_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b030138_keyword_xq.tsq, x55a89b030138_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.author_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (8) AND fe_weight.real = fe.field)
              JOIN x55a89b030138_keyword_xq ON (fe.index_vector @@ x55a89b030138_keyword_xq.tsq)
                UNION ALL
          SELECT fe.id, fe.source, fe.field, fe.value, fe.index_vector, fe_weight.weight, x55a89b030138_keyword_xq.tsq, x55a89b030138_keyword_xq.tsq_rank /* virtual field addition */
            FROM  metabib.keyword_field_entry AS fe
              JOIN config.metabib_field_virtual_map AS fe_weight ON (fe_weight.virtual = 45 AND fe_weight.real IN (39,41,42,46,47,48,50) AND fe_weight.real = fe.field)
              JOIN x55a89b030138_keyword_xq ON (fe.index_vector @@ x55a89b030138_keyword_xq.tsq)
        ) AS x55a89b030138_keyword ON (m.source = x55a89b030138_keyword.source)
                
                INNER JOIN metabib.record_attr_vector_list mrv ON m.source = mrv.source
                INNER JOIN biblio.record_entry bre ON m.source = bre.id AND NOT bre.deleted
                LEFT JOIN pop_with ON ( m.source = pop_with.record )
                LEFT JOIN metabib.record_sorter pubdate_t ON m.source = pubdate_t.source AND attr = 'pubdate'
                ,lang_with
                ,c_attr
                ,b_attr 
          WHERE 1=1
                AND (
          (x55a89b092058_keyword.id IS NOT NULL)
          AND (
            (x55a89b10f488_keyword.id IS NOT NULL)
            AND (
              (x55a89b075ed8_keyword.id IS NOT NULL)
              AND (
                (
                  (
                    (x55a89b115250_keyword.id IS NOT NULL)
                    AND (
                      (x55a89b0f35b0_keyword.id IS NOT NULL)
                    )
                  )
                  OR (
                    (
                      (x55a89b0ee558_keyword.id IS NOT NULL)
                      AND (
                        (x55a89b0f6080_keyword.id IS NOT NULL)
                      )
                    )
                    OR (
                      (
                        (x55a89b117048_keyword.id IS NOT NULL)
                        AND (
                          (x55a89b1094c0_keyword.id IS NOT NULL)
                        )
                      )
                      OR (
                        (
                          (x55a89b115400_keyword.id IS NOT NULL)
                          AND (
                            (x55a89b1092b0_keyword.id IS NOT NULL)
                          )
                        )
                        OR (
                          (
                            (x55a89b117078_keyword.id IS NOT NULL)
                            AND (
                              (x55a89b1177c8_keyword.id IS NOT NULL)
                            )
                          )
                          OR (
                            (
                              (x55a89b117b88_keyword.id IS NOT NULL)
                              AND (
                                (x55a89b117a98_keyword.id IS NOT NULL)
                              )
                            )
                            OR (
                              (
                                (x55a89b117648_keyword.id IS NOT NULL)
                                AND (
                                  (x55a89b119ae0_keyword.id IS NOT NULL)
                                )
                              )
                              OR (
                                (
                                  (x55a89b117438_keyword.id IS NOT NULL)
                                  AND (
                                    (x55a89b11a530_keyword.id IS NOT NULL)
                                    AND (
                                      (x55a89add8b40_keyword.id IS NOT NULL)
                                    )
                                  )
                                )
                                OR (
                                  (
                                    (x55a89b0154c0_keyword.id IS NOT NULL)
                                    AND (
                                      (x55a89add1ab0_keyword.id IS NOT NULL)
                                    )
                                  )
                                  OR (
                                    (
                                      (x55a89b132008_keyword.id IS NOT NULL)
                                      AND (
                                        (x55a89adfa348_keyword.id IS NOT NULL)
                                      )
                                    )
                                    OR (
                                      (
                                        (
                                          (x55a89afa8d40_keyword.id IS NOT NULL)
                                          AND (
                                            (x55a89af9dc30_keyword.id IS NOT NULL)
                                          )
                                        )
                                        OR (
                                          (
                                            (
                                              (x55a89adf69c8_keyword.id IS NOT NULL)
                                              AND (
                                                (x55a89b01b770_keyword.id IS NOT NULL)
                                              )
                                            )
                                            OR (
                                              (
                                                (x55a89b114d58_keyword.id IS NOT NULL)
                                                AND (
                                                  (x55a89af7d0b0_keyword.id IS NOT NULL)
                                                )
                                              )
                                              OR (
                                                (x55a89b119f60_keyword.id IS NOT NULL)
                                                AND (
                                                  (x55a89b0dac00_keyword.id IS NOT NULL)
                                                )
                                              )
                                            )
                                          )
                                          AND (x55a89b09fe80_keyword.id IS NOT NULL)
                                        )
                                      )
                                      AND (x55a89b030138_keyword.id IS NOT NULL)
                                    )
                                  )
                                )
                              )
                            )
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
        AND (
          (EXISTS (SELECT 1 FROM asset.copy_vis_attr_cache WHERE record = m.source AND vis_attr_vector @@ c_attr.vis_test)) OR ((b_attr.vis_test IS NULL OR bre.vis_attr_vector @@ b_attr.vis_test))
        )
          GROUP BY 1
          ORDER BY 4 ASC NULLS LAST,  5 DESC NULLS LAST, 3 DESC
          LIMIT 10000
        ) AS core_query
) (SELECT * FROM w LIMIT 1000 OFFSET 0)
        UNION ALL
  SELECT NULL,NULL,NULL,COUNT(*),COUNT(*),COUNT(*),0,0,NULL,NULL FROM w;

"] at /usr/share/perl5/DBIx/ContextualFetch.pm line 52.

